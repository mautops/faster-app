{"config":{"lang":["zh","en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\ud83d\ude80 Faster APP","text":"<p>FastAPI \u6700\u4f73\u5b9e\u8df5\u6846\u67b6 - \u7ea6\u5b9a\u4f18\u4e8e\u914d\u7f6e</p> <p> </p> <p>\u4e3a FastAPI \u5e26\u6765 Django \u98ce\u683c\u7684\u9879\u76ee\u7ed3\u6784\u548c\u5f00\u53d1\u4f53\u9a8c</p> <p> \u5feb\u901f\u5f00\u59cb  GitHub</p>"},{"location":"#_1","title":"\ud83d\udca1 \u6838\u5fc3\u7406\u5ff5","text":"<p>\u7ea6\u5b9a\u4f18\u4e8e\u914d\u7f6e - \u901a\u8fc7\u6807\u51c6\u5316\u7684\u9879\u76ee\u7ed3\u6784\u548c\u667a\u80fd\u81ea\u52a8\u53d1\u73b0\uff0c\u8ba9\u4f60\u4e13\u6ce8\u4e8e\u4e1a\u52a1\u903b\u8f91\u800c\u975e\u57fa\u7840\u8bbe\u65bd\u642d\u5efa</p> <ul> <li> \u96f6\u914d\u7f6e\u542f\u52a8</li> </ul> <p>\u9075\u5faa\u7ea6\u5b9a\u7684\u76ee\u5f55\u7ed3\u6784\uff0c\u6846\u67b6\u81ea\u52a8\u53d1\u73b0\u5e76\u6ce8\u518c\u6240\u6709\u7ec4\u4ef6</p> <ul> <li> 5 \u5206\u949f\u4e0a\u624b</li> </ul> <p>\u5185\u7f6e\u9879\u76ee\u6a21\u677f\u548c\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u5feb\u901f\u642d\u5efa\u5b8c\u6574\u5e94\u7528</p> <ul> <li> \u751f\u4ea7\u5c31\u7eea</li> </ul> <p>\u4f01\u4e1a\u7ea7\u6a21\u578b\u57fa\u7c7b\u3001\u6570\u636e\u5e93\u8fc1\u79fb\u3001\u65e5\u5fd7\u914d\u7f6e\uff0c\u5f00\u7bb1\u5373\u7528</p> <ul> <li> \u5f00\u53d1\u8005\u53cb\u597d</li> </ul> <p>Django \u98ce\u683c\u7684\u547d\u4ee4\u884c\u3001\u81ea\u52a8 API \u6587\u6863\u3001\u70ed\u91cd\u8f7d\u652f\u6301</p>"},{"location":"#_2","title":"\u2728 \u6838\u5fc3\u7279\u6027","text":""},{"location":"#_3","title":"\ud83d\udd0d \u667a\u80fd\u81ea\u52a8\u53d1\u73b0","text":"<p>\u81ea\u52a8\u626b\u63cf\u5e76\u6ce8\u518c\u8def\u7531\u3001\u6a21\u578b\u3001\u547d\u4ee4\u3001\u4e2d\u95f4\u4ef6\u548c\u914d\u7f6e - \u65e0\u9700\u624b\u52a8\u914d\u7f6e</p> <pre><code># apps/users/routes.py - \u81ea\u52a8\u53d1\u73b0\u5e76\u6ce8\u518c\nrouter = APIRouter(prefix=\"/users\", tags=[\"\u7528\u6237\"])\n\n@router.get(\"\")\nasync def list_users():\n    return await User.all()\n</code></pre> <p> \u4e86\u89e3\u81ea\u52a8\u53d1\u73b0\u673a\u5236</p>"},{"location":"#_4","title":"\ud83d\uddc4\ufe0f \u4f01\u4e1a\u7ea7\u6a21\u578b\u57fa\u7c7b","text":"<p>\u5f00\u7bb1\u5373\u7528\u7684\u6a21\u578b\u57fa\u7c7b\uff0c\u901a\u8fc7\u7ec4\u5408\u5feb\u901f\u6784\u5efa\u6570\u636e\u6a21\u578b</p> <pre><code># UUID + \u65f6\u95f4\u6233 + \u591a\u79df\u6237\nclass Order(UUIDModel, DateTimeModel, ScopeModel):\n    order_no = fields.CharField(max_length=50)\n    amount = fields.DecimalField(max_digits=10, decimal_places=2)\n</code></pre> <p> \u63a2\u7d22\u6a21\u578b\u57fa\u7c7b</p>"},{"location":"#django","title":"\ud83d\udee0\ufe0f Django \u98ce\u683c\u547d\u4ee4\u884c","text":"<p>\u5f3a\u5927\u7684\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u7b80\u5316\u5f00\u53d1\u6d41\u7a0b</p> <pre><code>faster app demo      # \u521b\u5efa\u793a\u4f8b\u5e94\u7528\nfaster db migrate    # \u751f\u6210\u6570\u636e\u5e93\u8fc1\u79fb\nfaster server start  # \u542f\u52a8\u5f00\u53d1\u670d\u52a1\u5668\n</code></pre> <p> \u67e5\u770b\u547d\u4ee4\u884c\u5de5\u5177</p>"},{"location":"#_5","title":"\ud83d\ude80 \u5feb\u901f\u4f53\u9a8c","text":"\u5b89\u88c5\u521d\u59cb\u5316\u542f\u52a8 <pre><code># \u4f7f\u7528 uv\uff08\u63a8\u8350\uff09\nuv init my-project\ncd my-project\nuv add faster-app\nrm main.py\n</code></pre> <pre><code># \u521b\u5efa\u9879\u76ee\u7ed3\u6784\nfaster app demo\nfaster app env\n\n# \u521d\u59cb\u5316\u6570\u636e\u5e93\nfaster db init\nfaster db init_db\n</code></pre> <pre><code># \u542f\u52a8\u5f00\u53d1\u670d\u52a1\u5668\nfaster server start\n\n# \u8bbf\u95ee http://localhost:8000/docs\n</code></pre> <p> \u5b8c\u6574\u5b89\u88c5\u6307\u5357  \u5feb\u901f\u5165\u95e8\u6559\u7a0b</p>"},{"location":"#_6","title":"\ud83c\udfaf \u8bbe\u8ba1\u539f\u5219","text":"<p>\u516d\u5927\u6838\u5fc3\u539f\u5219</p> <ol> <li>\u7ea6\u5b9a\u4f18\u4e8e\u914d\u7f6e - \u6807\u51c6\u5316\u7ed3\u6784\uff0c\u81ea\u52a8\u53d1\u73b0\u7ec4\u4ef6</li> <li>\u81ea\u52a8\u53d1\u73b0\u4f18\u4e8e\u624b\u52a8\u6ce8\u518c - \u6d88\u9664 80% \u7684\u6837\u677f\u4ee3\u7801</li> <li>\u7ec4\u5408\u4f18\u4e8e\u7ee7\u627f - \u7075\u6d3b\u7684\u6a21\u578b\u57fa\u7c7b\u7ec4\u5408</li> <li>\u663e\u5f0f\u4f18\u4e8e\u9690\u5f0f - \u4fdd\u7559\u81ea\u5b9a\u4e49\u8986\u76d6\u80fd\u529b</li> <li>\u5f00\u53d1\u4f53\u9a8c\u4f18\u4e8e\u914d\u7f6e\u7075\u6d3b\u6027 - \u5f00\u7bb1\u5373\u7528\u7684\u529f\u80fd</li> <li>\u751f\u4ea7\u5c31\u7eea\u4f18\u4e8e\u6f14\u793a\u4ee3\u7801 - \u53ef\u76f4\u63a5\u7528\u4e8e\u5546\u4e1a\u9879\u76ee</li> </ol> <p> \u6df1\u5165\u4e86\u89e3\u8bbe\u8ba1\u54f2\u5b66</p>"},{"location":"#_7","title":"\ud83c\udf1f \u9002\u7528\u573a\u666f","text":"<p> \u5feb\u901f\u539f\u578b 5 \u5206\u949f\u642d\u5efa\u5b8c\u6574\u540e\u7aef</p> <p> \u56e2\u961f\u534f\u4f5c \u7edf\u4e00\u4ee3\u7801\u7ed3\u6784\u548c\u89c4\u8303</p> <p> \u4f01\u4e1a\u5e94\u7528 \u751f\u4ea7\u73af\u5883\u6700\u4f73\u5b9e\u8df5</p> <p> API \u670d\u52a1 RESTful API \u5f00\u53d1</p> <p> SaaS \u5e94\u7528 \u5185\u7f6e\u591a\u79df\u6237\u652f\u6301</p> <p> \u5fae\u670d\u52a1 \u6807\u51c6\u5316\u670d\u52a1\u7ed3\u6784</p>"},{"location":"#_8","title":"\ud83e\udd1d \u793e\u533a\u4e0e\u652f\u6301","text":"<p> \u6587\u6863\u4e2d\u5fc3 \u5b8c\u6574\u7684\u4f7f\u7528\u6307\u5357\u548c API \u53c2\u8003</p> <p> \u95ee\u9898\u53cd\u9988 \u62a5\u544a Bug \u6216\u63d0\u51fa\u6539\u8fdb\u5efa\u8bae</p> <p> \u8ba8\u8bba\u533a \u4e0e\u793e\u533a\u6210\u5458\u4ea4\u6d41\u8ba8\u8bba</p> <p> \u8d21\u732e\u6307\u5357 \u53c2\u4e0e\u5f00\u6e90\u9879\u76ee\u5efa\u8bbe</p>"},{"location":"#_9","title":"\ud83d\ude4f \u81f4\u8c22","text":"<p>\u611f\u8c22\u4ee5\u4e0b\u5f00\u6e90\u9879\u76ee\u7684\u542f\u53d1\uff1a</p> <ul> <li> <p>\u26a1 FastAPI   \u73b0\u4ee3\u3001\u5feb\u901f\u7684 Web \u6846\u67b6</p> </li> <li> <p>\ud83d\udc22 Tortoise ORM   \u5f02\u6b65 ORM \u6846\u67b6</p> </li> <li> <p>\ud83d\udd25 Fire   \u547d\u4ee4\u884c\u63a5\u53e3\u751f\u6210\u5668</p> </li> <li> <p>\ud83c\udfa8 Django   \u7ea6\u5b9a\u4f18\u4e8e\u914d\u7f6e\u7684\u7406\u5ff5</p> </li> </ul>"},{"location":"#_10","title":"\ud83d\udc68\u200d\ud83d\udcbb \u5f00\u53d1\u8005","text":"<p>\u88f4\u632f\u98de \u00b7 peizhenfei</p> <p> \u90ae\u7bb1\uff1apeizhenfei@cvte.com \u5fae\u4fe1\uff1a<code>hsdtsyl</code> (\u6dfb\u52a0\u8bf7\u5907\u6ce8\"Faster APP\") GitHub\uff1a@mautops \u516c\u53f8\uff1aCVTE</p> <p> \u95ee\u9898\u53cd\u9988\uff1aGitHub Issues \u529f\u80fd\u5efa\u8bae\uff1aGitHub Discussions</p> <p></p> <p>\u626b\u7801\u6dfb\u52a0\u5fae\u4fe1</p>"},{"location":"#_11","title":"\ud83d\udc9d \u8d5e\u52a9\u652f\u6301","text":"<p>\u5982\u679c Faster APP \u5e2e\u4f60\u8282\u7701\u4e86\u65f6\u95f4\u3001\u63d0\u5347\u4e86\u6548\u7387\uff0c\u6216\u8ba9\u4f60\u7684\u5f00\u53d1\u5de5\u4f5c\u53d8\u5f97\u66f4\u8f7b\u677e\uff0c\u4e0d\u59a8\u8bf7\u4f5c\u8005\u559d\u676f\u5496\u5561 \u2615\ufe0f \u4f60\u7684\u6bcf\u4e00\u4efd\u652f\u6301\uff0c\u90fd\u662f\u6211\u6301\u7eed\u4f18\u5316\u548c\u6dfb\u52a0\u65b0\u529f\u80fd\u7684\u52a8\u529b\uff01 \u2764\ufe0f</p> <p>\u5fae\u4fe1\u652f\u4ed8</p> <p></p> <p>\u652f\u4ed8\u5b9d</p> <p></p> <p>\u611f\u8c22\u6bcf\u4e00\u4efd\u652f\u6301\uff01\u4f60\u7684\u9f13\u52b1\u662f\u6211\u6301\u7eed\u66f4\u65b0\u7684\u52a8\u529b \ud83d\ude80</p> <p>\u2b50 \u5982\u679c\u8fd9\u4e2a\u9879\u76ee\u5bf9\u4f60\u6709\u5e2e\u52a9\uff0c\u8bf7\u7ed9\u6211\u4eec\u4e00\u4e2a Star\uff01</p> <p> GitHub  \u6587\u6863  Changelog</p> <p>Copyright \u00a9 2024 peizhenfei \u00b7 MIT License</p>"},{"location":"about/changelog/","title":"\u66f4\u65b0\u65e5\u5fd7","text":"<p>\u672c\u9875\u9762\u8bb0\u5f55 Faster APP \u7684\u6240\u6709\u7248\u672c\u66f4\u65b0\u5386\u53f2\u3002</p>"},{"location":"about/changelog/#v0042-2025-11-10","title":"v0.0.42 (2025-11-10)","text":"v0.0.42 - \u914d\u7f6e\u7cfb\u7edf\u5168\u9762\u5347\u7ea7 \ud83d\udd27"},{"location":"about/changelog/#_2","title":"\ud83c\udf89 \u65b0\u589e\u529f\u80fd","text":"<ul> <li> <p>\ud83d\udd10 \u654f\u611f\u4fe1\u606f\u4fdd\u62a4\uff1a\u4f7f\u7528 <code>SecretStr</code> \u4fdd\u62a4\u654f\u611f\u914d\u7f6e</p> <ul> <li>\u81ea\u52a8\u9690\u85cf\u5bc6\u7801\u3001\u5bc6\u94a5\u7b49\u654f\u611f\u4fe1\u606f</li> <li>\u9632\u6b62\u610f\u5916\u65e5\u5fd7\u6cc4\u9732</li> <li>JSON \u5e8f\u5217\u5316\u65f6\u81ea\u52a8\u8131\u654f\uff08\u663e\u793a <code>***HIDDEN***</code>\uff09</li> <li>\u652f\u6301\u5b57\u6bb5\uff1a<code>SECRET_KEY</code>, <code>DB_PASSWORD</code></li> <li>\u6587\u6863\uff1a\u654f\u611f\u4fe1\u606f\u4fdd\u62a4</li> </ul> </li> <li> <p>\ud83d\udd04 TORTOISE_ORM \u914d\u7f6e\u4f18\u5316\uff1a\u4ece <code>__init__</code> \u91cd\u6784\u4e3a <code>@property</code></p> <ul> <li>\u52a8\u6001\u751f\u6210\u914d\u7f6e\uff0c\u652f\u6301\u8fd0\u884c\u65f6\u66f4\u65b0</li> <li>\u9075\u5faa Pydantic \u6700\u4f73\u5b9e\u8df5</li> <li>\u907f\u514d\u521d\u59cb\u5316\u65f6\u673a\u95ee\u9898</li> <li>\u66f4\u597d\u7684\u53ef\u6d4b\u8bd5\u6027</li> <li>\u6587\u6863\uff1aTORTOISE_ORM \u914d\u7f6e</li> </ul> </li> <li> <p>\u2705 \u751f\u4ea7\u73af\u5883\u914d\u7f6e\u9a8c\u8bc1\uff1a\u5168\u9762\u7684\u5b89\u5168\u68c0\u67e5\u673a\u5236</p> <ul> <li>\u5b57\u6bb5\u7ea7\u9a8c\u8bc1\u5668\uff1a<ul> <li>\u7aef\u53e3\u53f7\u8303\u56f4\u68c0\u67e5\uff081-65535\uff09</li> <li>\u65e5\u5fd7\u7ea7\u522b\u9a8c\u8bc1</li> <li>JWT \u7b97\u6cd5\u767d\u540d\u5355</li> <li>Token \u8fc7\u671f\u65f6\u95f4\u5408\u7406\u6027</li> <li>\u6570\u636e\u5e93\u7c7b\u578b\u9a8c\u8bc1</li> </ul> </li> <li>\u6a21\u578b\u7ea7\u9a8c\u8bc1\u5668\uff08\u751f\u4ea7\u73af\u5883\uff09\uff1a<ul> <li>Secret Key \u5b89\u5168\u6027\u68c0\u67e5\uff08\u957f\u5ea6 &gt;= 32\uff09</li> <li>\u6570\u636e\u5e93\u5bc6\u7801\u5f3a\u5ea6\u68c0\u67e5\uff08\u957f\u5ea6 &gt;= 8\uff09</li> <li>\u6570\u636e\u5e93\u8fde\u63a5\u914d\u7f6e\u68c0\u67e5\uff08\u907f\u514d localhost\uff09</li> <li>\u9879\u76ee\u540d\u79f0\u89c4\u8303\u63d0\u9192</li> </ul> </li> <li>\u53cb\u597d\u7684\u9519\u8bef\u63d0\u793a\u548c\u8b66\u544a</li> <li>\u6587\u6863\uff1a\u751f\u4ea7\u73af\u5883\u9a8c\u8bc1</li> </ul> </li> <li> <p>\ud83c\udff7\ufe0f \u73af\u5883\u53d8\u91cf\u524d\u7f00\uff1a\u7edf\u4e00\u4f7f\u7528 <code>FASTER_</code> \u524d\u7f00</p> <ul> <li>\u907f\u514d\u591a\u5e94\u7528\u73af\u5883\u53d8\u91cf\u51b2\u7a81</li> <li>\u66f4\u6e05\u6670\u7684\u914d\u7f6e\u7ba1\u7406</li> <li>\u652f\u6301\u5d4c\u5957\u914d\u7f6e\uff1a<code>FASTER_DATABASE__HOST</code></li> <li>\u5b8c\u5168\u5411\u540e\u517c\u5bb9</li> <li>\u6587\u6863\uff1a\u73af\u5883\u53d8\u91cf\u524d\u7f00</li> </ul> </li> <li> <p>\ud83d\udce6 \u914d\u7f6e\u5206\u7ec4\u4e0e\u5d4c\u5957\uff1a\u6a21\u5757\u5316\u914d\u7f6e\u7ed3\u6784</p> <ul> <li>ServerSettings\uff1a\u670d\u52a1\u5668\u914d\u7f6e\uff08host, port\uff09</li> <li>JWTSettings\uff1aJWT \u8ba4\u8bc1\u914d\u7f6e\uff08secret_key, algorithm, expire_minutes\uff09</li> <li>DatabaseSettings\uff1a\u6570\u636e\u5e93\u914d\u7f6e\uff08type, host, port, user, password, database, db_schema\uff09</li> <li>LogSettings\uff1a\u65e5\u5fd7\u914d\u7f6e\uff08level, format\uff09</li> <li>\u6e05\u6670\u7684\u914d\u7f6e\u7ec4\u7ec7\uff0c\u6613\u4e8e\u7ef4\u62a4\u548c\u6269\u5c55</li> <li>IDE \u667a\u80fd\u63d0\u793a\u652f\u6301</li> <li>\u6587\u6863\uff1a\u914d\u7f6e\u5206\u7ec4</li> </ul> </li> <li> <p>\ud83d\uddc2\ufe0f \u914d\u7f6e\u6587\u4ef6\u91cd\u6784\uff1a\u6309\u7ec4\u62c6\u5206\u5230\u72ec\u7acb\u6587\u4ef6</p> <ul> <li><code>faster_app/settings/groups/server.py</code> - \u670d\u52a1\u5668\u914d\u7f6e</li> <li><code>faster_app/settings/groups/jwt.py</code> - JWT \u914d\u7f6e</li> <li><code>faster_app/settings/groups/database.py</code> - \u6570\u636e\u5e93\u914d\u7f6e</li> <li><code>faster_app/settings/groups/log.py</code> - \u65e5\u5fd7\u914d\u7f6e</li> <li><code>faster_app/settings/groups/__init__.py</code> - \u7edf\u4e00\u5bfc\u51fa</li> <li>\u66f4\u597d\u7684\u4ee3\u7801\u7ec4\u7ec7\u548c\u6a21\u5757\u5316</li> <li>\u6587\u6863\uff1a\u914d\u7f6e\u91cd\u6784</li> </ul> </li> <li> <p>\ud83d\udd17 DATABASE_URL \u652f\u6301\uff1a\u5355\u53d8\u91cf\u914d\u7f6e\u6570\u636e\u5e93</p> <ul> <li>\u9075\u5faa 12-Factor App \u6700\u4f73\u5b9e\u8df5</li> <li>\u652f\u6301 PostgreSQL\u3001MySQL\u3001SQLite</li> <li>\u652f\u6301 <code>DATABASE_URL</code> \u548c <code>FASTER_DATABASE_URL</code></li> <li>\u81ea\u52a8\u89e3\u6790\u8fde\u63a5\u5b57\u7b26\u4e32</li> <li>\u7279\u6b8a\u5b57\u7b26\u5bc6\u7801\u81ea\u52a8 URL \u89e3\u7801</li> <li>\u4e91\u5e73\u53f0\u53cb\u597d\uff08Heroku\u3001Railway\u3001Render \u7b49\uff09</li> <li>\u5b8c\u5168\u5411\u540e\u517c\u5bb9\u72ec\u7acb\u73af\u5883\u53d8\u91cf</li> <li>\u793a\u4f8b\uff1a     <pre><code># PostgreSQL\nFASTER_DATABASE_URL=postgresql://user:pass@host:5432/database\n\n# MySQL\nFASTER_DATABASE_URL=mysql://user:pass@host:3306/database\n\n# SQLite\nFASTER_DATABASE_URL=sqlite:///path/to/database.db\n</code></pre></li> <li>\u6587\u6863\uff1aDATABASE_URL \u652f\u6301</li> </ul> </li> <li> <p>\ud83c\udfe2 \u6570\u636e\u5e93 Schema \u652f\u6301\uff1a\u591a\u79df\u6237\u6570\u636e\u9694\u79bb</p> <ul> <li>\u901a\u8fc7 URL \u67e5\u8be2\u53c2\u6570\u6307\u5b9a schema\uff1a<code>?schema=tenant_a</code></li> <li>\u652f\u6301\u73af\u5883\u53d8\u91cf\uff1a<code>FASTER_DATABASE__DB_SCHEMA=tenant_a</code></li> <li>\u81ea\u52a8\u96c6\u6210\u5230 Tortoise ORM \u914d\u7f6e</li> <li>PostgreSQL \u5b8c\u5168\u652f\u6301\uff0cSQLite \u81ea\u52a8\u5ffd\u7565</li> <li>\u5178\u578b\u573a\u666f\uff1a<ul> <li>\u591a\u79df\u6237 SaaS \u5e94\u7528\uff08\u6bcf\u4e2a\u79df\u6237\u4e00\u4e2a schema\uff09</li> <li>\u5fae\u670d\u52a1\u6570\u636e\u9694\u79bb\uff08\u6bcf\u4e2a\u670d\u52a1\u4e00\u4e2a schema\uff09</li> <li>\u73af\u5883\u6570\u636e\u9694\u79bb\uff08dev/test/staging schema\uff09</li> </ul> </li> <li>\u793a\u4f8b\uff1a     <pre><code># \u79df\u6237 A\nFASTER_DATABASE_URL=postgresql://app:pass@db:5432/saas?schema=tenant_a\n\n# \u79df\u6237 B\nFASTER_DATABASE_URL=postgresql://app:pass@db:5432/saas?schema=tenant_b\n</code></pre></li> <li>\u6587\u6863\uff1a\u6570\u636e\u5e93 Schema \u652f\u6301</li> </ul> </li> </ul>"},{"location":"about/changelog/#_3","title":"\ud83d\udd27 \u6539\u8fdb\u4f18\u5316","text":"<ul> <li> <p>\ud83d\udcdd \u914d\u7f6e\u5b57\u6bb5\u547d\u540d\u89c4\u8303\uff1a\u7edf\u4e00\u4f7f\u7528 <code>snake_case</code></p> <ul> <li>\u66f4\u7b26\u5408 Python \u547d\u540d\u89c4\u8303</li> <li>\u66f4\u597d\u7684\u53ef\u8bfb\u6027</li> <li>\u4e0e Pydantic \u63a8\u8350\u4e00\u81f4</li> </ul> </li> <li> <p>\ud83d\udd04 discover.py \u4f18\u5316\uff1a\u6b63\u786e\u5904\u7406 <code>SecretStr</code> \u7c7b\u578b</p> <ul> <li>\u4f7f\u7528 <code>mode='python'</code> \u4fdd\u7559 <code>SecretStr</code> \u5bf9\u8c61</li> <li>\u907f\u514d\u914d\u7f6e\u5408\u5e76\u65f6\u7684\u7c7b\u578b\u4e22\u5931</li> <li>\u66f4\u597d\u7684\u7c7b\u578b\u63a8\u65ad</li> </ul> </li> <li> <p>\ud83c\udfaf logging.py \u9002\u914d\uff1a\u652f\u6301\u5d4c\u5957\u914d\u7f6e\u8bbf\u95ee</p> <ul> <li>\u4ece <code>configs.LOG_LEVEL</code> \u8fc1\u79fb\u5230 <code>configs.log.level</code></li> <li>\u4ece <code>configs.LOG_FORMAT</code> \u8fc1\u79fb\u5230 <code>configs.log.format</code></li> <li>\u5b8c\u5168\u517c\u5bb9\u65b0\u7684\u914d\u7f6e\u7ed3\u6784</li> </ul> </li> <li> <p>\ud83d\udcda \u914d\u7f6e\u4f18\u5148\u7ea7\u660e\u786e\uff1a\u6e05\u6670\u7684\u914d\u7f6e\u52a0\u8f7d\u987a\u5e8f</p> <ol> <li>\u6784\u9020\u51fd\u6570\u53c2\u6570</li> <li><code>FASTER_DATABASE_URL</code> / <code>DATABASE_URL</code>\uff08DATABASE_URL \u652f\u6301\uff09</li> <li><code>FASTER_*</code> \u73af\u5883\u53d8\u91cf</li> <li><code>.env</code> \u6587\u4ef6</li> <li>\u9ed8\u8ba4\u503c</li> </ol> </li> </ul>"},{"location":"about/changelog/#bug","title":"\ud83d\udc1b Bug \u4fee\u590d","text":"<ul> <li>\u4fee\u590d <code>SecretStr</code> \u5728\u914d\u7f6e\u5408\u5e76\u65f6\u7684\u7c7b\u578b\u4e22\u5931\u95ee\u9898</li> <li>\u4fee\u590d Pydantic \u5b57\u6bb5\u540d\u51b2\u7a81\uff08<code>schema</code> \u2192 <code>db_schema</code>\uff09</li> <li>\u4fee\u590d SQLite \u6587\u4ef6\u8def\u5f84\u89c4\u8303\u5316\u903b\u8f91</li> <li>\u4fee\u590d\u751f\u4ea7\u73af\u5883\u9a8c\u8bc1\u7684\u8fb9\u754c\u6761\u4ef6</li> </ul>"},{"location":"about/changelog/#_4","title":"\ud83d\udcd6 \u65b0\u589e\u6587\u6863","text":"<ul> <li>\u2728 \u654f\u611f\u4fe1\u606f\u4fdd\u62a4 - SecretStr \u4f7f\u7528\u6307\u5357</li> <li>\u2728 TORTOISE_ORM \u914d\u7f6e - \u52a8\u6001\u914d\u7f6e\u6700\u4f73\u5b9e\u8df5</li> <li>\u2728 \u751f\u4ea7\u73af\u5883\u9a8c\u8bc1 - \u5b89\u5168\u68c0\u67e5\u8be6\u89e3</li> <li>\u2728 \u73af\u5883\u53d8\u91cf\u524d\u7f00 - \u524d\u7f00\u914d\u7f6e\u8bf4\u660e</li> <li>\u2728 \u914d\u7f6e\u5206\u7ec4 - \u6a21\u5757\u5316\u914d\u7f6e\u6307\u5357</li> <li>\u2728 \u914d\u7f6e\u91cd\u6784 - \u6587\u4ef6\u7ed3\u6784\u8bf4\u660e</li> <li>\u2728 DATABASE_URL \u652f\u6301 - \u5b8c\u6574\u4f7f\u7528\u6307\u5357</li> <li>\u2728 \u6570\u636e\u5e93 Schema \u652f\u6301 - \u591a\u79df\u6237\u67b6\u6784\u6307\u5357</li> </ul>"},{"location":"about/changelog/#_5","title":"\ud83d\udd04 \u5411\u540e\u517c\u5bb9\u6027","text":"<ul> <li>\u2705 \u5b8c\u5168\u5411\u540e\u517c\u5bb9\uff1a\u6240\u6709\u65e7\u7684\u914d\u7f6e\u65b9\u5f0f\u4ecd\u7136\u6709\u6548</li> <li>\u2705 \u6e10\u8fdb\u5f0f\u5347\u7ea7\uff1a\u53ef\u4ee5\u6309\u9700\u8fc1\u79fb\u5230\u65b0\u65b9\u5f0f</li> <li>\u2705 \u96f6\u7834\u574f\u6027\u53d8\u66f4\uff1a\u73b0\u6709\u9879\u76ee\u65e0\u9700\u4fee\u6539\u4ee3\u7801</li> </ul>"},{"location":"about/changelog/#_6","title":"\ud83d\udca1 \u5347\u7ea7\u5efa\u8bae","text":"<p>\u63a8\u8350\u4f7f\u7528\u65b0\u7684\u914d\u7f6e\u65b9\u5f0f\uff0c\u4f46\u4e0d\u5f3a\u5236\uff1a</p> <pre><code># \u2705 \u63a8\u8350\uff08\u65b0\u65b9\u5f0f\uff09\nexport FASTER_DATABASE_URL=postgresql://user:pass@host:5432/db?schema=tenant_a\n\n# \u2705 \u4ecd\u7136\u652f\u6301\uff08\u65e7\u65b9\u5f0f\uff09\nexport FASTER_DATABASE__TYPE=postgres\nexport FASTER_DATABASE__HOST=host\nexport FASTER_DATABASE__PORT=5432\nexport FASTER_DATABASE__DB_SCHEMA=tenant_a\n</code></pre>"},{"location":"about/changelog/#_7","title":"\ud83c\udfaf \u8bbe\u8ba1\u539f\u5219","text":"<p>\u672c\u6b21\u914d\u7f6e\u7cfb\u7edf\u5347\u7ea7\u9075\u5faa\u4ee5\u4e0b\u539f\u5219\uff1a</p> <ol> <li>\u5b89\u5168\u7b2c\u4e00\uff1a\u654f\u611f\u4fe1\u606f\u4fdd\u62a4 + \u751f\u4ea7\u73af\u5883\u9a8c\u8bc1</li> <li>\u7b80\u5355\u5b9e\u7528\uff1aDATABASE_URL \u7b80\u5316\u914d\u7f6e</li> <li>\u6a21\u5757\u5316\uff1a\u914d\u7f6e\u5206\u7ec4\u4fbf\u4e8e\u7ef4\u62a4</li> <li>\u4e91\u539f\u751f\uff1a\u7b26\u5408 12-Factor App \u6700\u4f73\u5b9e\u8df5</li> <li>\u5411\u540e\u517c\u5bb9\uff1a\u4e0d\u7834\u574f\u73b0\u6709\u4ee3\u7801</li> <li>\u6587\u6863\u5b8c\u5584\uff1a\u6bcf\u4e2a\u529f\u80fd\u90fd\u6709\u8be6\u7ec6\u6587\u6863</li> </ol>"},{"location":"about/changelog/#_8","title":"\ud83d\udcca \u5f71\u54cd\u8303\u56f4","text":"<ul> <li>\u914d\u7f6e\u7cfb\u7edf\uff1a\u5168\u9762\u5347\u7ea7\uff0c\u66f4\u5b89\u5168\u3001\u66f4\u7075\u6d3b</li> <li>\u591a\u79df\u6237\u652f\u6301\uff1aSchema \u652f\u6301\u4f7f\u591a\u79df\u6237\u67b6\u6784\u66f4\u7b80\u5355</li> <li>\u90e8\u7f72\u53cb\u597d\uff1aDATABASE_URL \u7b80\u5316\u4e91\u5e73\u53f0\u90e8\u7f72</li> <li>\u5f00\u53d1\u4f53\u9a8c\uff1a\u914d\u7f6e\u5206\u7ec4\u548c IDE \u63d0\u793a\u63d0\u5347\u5f00\u53d1\u6548\u7387</li> </ul>"},{"location":"about/changelog/#v0042-2025-10-14","title":"v0.0.42 (2025-10-14)","text":"v0.0.42 - \u6587\u6863\u7ad9\u5efa\u8bbe\u4e0e\u8bbe\u8ba1\u54f2\u5b66\u5b8c\u5584"},{"location":"about/changelog/#_9","title":"\ud83c\udf89 \u65b0\u589e\u529f\u80fd","text":"<ul> <li>\u2728 MkDocs \u6587\u6863\u7ad9\uff1a\u5b8c\u6574\u7684\u6587\u6863\u7cfb\u7edf<ul> <li>\u4f7f\u7528 Material for MkDocs \u4e3b\u9898</li> <li>\u652f\u6301\u4e2d\u6587\u641c\u7d22\u548c\u8bed\u6cd5\u9ad8\u4eae</li> <li>\u81ea\u52a8\u751f\u6210 API \u6587\u6863\uff08mkdocstrings\uff09</li> <li>\u65e5\u95f4/\u591c\u95f4\u6a21\u5f0f\u5207\u6362</li> </ul> </li> <li>\ud83d\udcd6 \u5b8c\u6574\u6587\u6863\u5185\u5bb9\uff1a<ul> <li>\u5feb\u901f\u5f00\u59cb\u6307\u5357\uff08\u5b89\u88c5\u3001\u5feb\u901f\u5165\u95e8\u3001\u9879\u76ee\u7ed3\u6784\uff09</li> <li>\u6838\u5fc3\u529f\u80fd\u8be6\u89e3\uff08\u81ea\u52a8\u53d1\u73b0\u3001\u6a21\u578b\u57fa\u7c7b\u3001\u8def\u7531\u3001CLI\u3001\u4e2d\u95f4\u4ef6\u3001\u914d\u7f6e\uff09</li> <li>\u547d\u4ee4\u884c\u5de5\u5177\u53c2\u8003</li> <li>API \u53c2\u8003\u6587\u6863</li> <li>\u6700\u4f73\u5b9e\u8df5\u6307\u5357</li> <li>\u8d21\u732e\u6307\u5357</li> </ul> </li> <li>\ud83c\udfa8 \u8bbe\u8ba1\u54f2\u5b66\u62bd\u8c61\uff1a\u516d\u5927\u6838\u5fc3\u8bbe\u8ba1\u539f\u5219<ul> <li>\u7ea6\u5b9a\u4f18\u4e8e\u914d\u7f6e</li> <li>\u81ea\u52a8\u53d1\u73b0\u4f18\u4e8e\u624b\u52a8\u6ce8\u518c</li> <li>\u7ec4\u5408\u4f18\u4e8e\u7ee7\u627f</li> <li>\u663e\u5f0f\u4f18\u4e8e\u9690\u5f0f</li> <li>\u5f00\u53d1\u4f53\u9a8c\u4f18\u4e8e\u914d\u7f6e\u7075\u6d3b\u6027</li> <li>\u751f\u4ea7\u5c31\u7eea\u4f18\u4e8e\u6f14\u793a\u4ee3\u7801</li> </ul> </li> </ul>"},{"location":"about/changelog/#_10","title":"\ud83d\udd27 \u6539\u8fdb\u4f18\u5316","text":"<ul> <li>\ud83d\udcdd \u5728 <code>Makefile</code> \u4e2d\u6dfb\u52a0\u6587\u6863\u76f8\u5173\u547d\u4ee4</li> <li>\ud83c\udfaf \u5b8c\u5584\u9879\u76ee\u8bbe\u8ba1\u7406\u5ff5\u548c\u9002\u7528\u573a\u666f\u8bf4\u660e</li> <li>\ud83d\udcda \u6dfb\u52a0\u8bbe\u8ba1\u7075\u611f\u548c\u6846\u67b6\u5bf9\u6bd4</li> </ul>"},{"location":"about/changelog/#bug_1","title":"\ud83d\udc1b Bug \u4fee\u590d","text":"<ul> <li>\u4fee\u590d\u6587\u6863\u6784\u5efa\u8b66\u544a</li> </ul>"},{"location":"about/changelog/#v0037-2025-10-13","title":"v0.0.37 (2025-10-13)","text":"v0.0.37 - \u679a\u4e3e\u6a21\u578b\u4e0e Docker \u652f\u6301"},{"location":"about/changelog/#_11","title":"\ud83c\udf89 \u65b0\u589e\u529f\u80fd","text":"<ul> <li>\u2728 EnumModel \u57fa\u7c7b\uff1a\u679a\u4e3e\u5b57\u6bb5\u652f\u6301<ul> <li>\u652f\u6301 Python Enum \u7c7b\u578b</li> <li>\u9002\u7528\u4e8e\u72b6\u6001\u673a\u3001\u5206\u7c7b\u7b49\u573a\u666f</li> <li>\u7c7b\u578b\u5b89\u5168\u7684\u679a\u4e3e\u503c</li> </ul> </li> <li>\ud83d\udc33 Docker \u6784\u5efa\u547d\u4ee4\uff1a<code>make image</code><ul> <li>\u591a\u9636\u6bb5\u6784\u5efa\u4f18\u5316</li> <li>\u57fa\u4e8e uv \u7684\u4f9d\u8d56\u7ba1\u7406</li> <li>\u751f\u4ea7\u73af\u5883\u5c31\u7eea</li> </ul> </li> </ul>"},{"location":"about/changelog/#_12","title":"\ud83d\udd27 \u6539\u8fdb\u4f18\u5316","text":"<ul> <li>\u4f18\u5316 Docker \u955c\u50cf\u5927\u5c0f</li> <li>\u6539\u8fdb\u6784\u5efa\u6d41\u7a0b</li> </ul>"},{"location":"about/changelog/#v0036-2025-10-12","title":"v0.0.36 (2025-10-12)","text":"v0.0.36 - \u5185\u7f6e\u4e2d\u95f4\u4ef6\u4e0e\u540e\u53f0\u4efb\u52a1"},{"location":"about/changelog/#_13","title":"\ud83c\udf89 \u65b0\u589e\u529f\u80fd","text":"<ul> <li>\u26a1 \u5185\u7f6e\u4e2d\u95f4\u4ef6\u7cfb\u7edf<ul> <li>\u8bf7\u6c42\u8ffd\u8e2a\u4e2d\u95f4\u4ef6</li> <li>\u65e5\u5fd7\u4e2d\u95f4\u4ef6</li> <li>CORS \u4e2d\u95f4\u4ef6</li> <li>\u4e2d\u95f4\u4ef6\u4f18\u5148\u7ea7\u63a7\u5236</li> </ul> </li> <li>\ud83d\udd04 \u540e\u53f0\u4efb\u52a1\u652f\u6301<ul> <li>\u5f02\u6b65\u4efb\u52a1\u793a\u4f8b</li> <li>\u4efb\u52a1\u961f\u5217\u96c6\u6210</li> <li>Celery \u652f\u6301</li> </ul> </li> <li>\ud83d\udd0d \u8def\u7531\u8c03\u8bd5\u89c4\u5219\uff1a\u6539\u8fdb\u8def\u7531\u53d1\u73b0\u7684\u8c03\u8bd5\u8f93\u51fa</li> </ul>"},{"location":"about/changelog/#_14","title":"\ud83d\udd27 \u6539\u8fdb\u4f18\u5316","text":"<ul> <li>\u7981\u7528\u9ed8\u8ba4\u5185\u7f6e\u4e2d\u95f4\u4ef6\uff08\u53ef\u9009\u542f\u7528\uff09</li> <li>\u4f18\u5316\u4e2d\u95f4\u4ef6\u6ce8\u518c\u6d41\u7a0b</li> <li>\u5b8c\u5584\u6587\u6863\u548c\u914d\u7f6e\u8bf4\u660e</li> </ul>"},{"location":"about/changelog/#bug_2","title":"\ud83d\udc1b Bug \u4fee\u590d","text":"<ul> <li>\u4fee\u590d runtime \u6587\u4ef6\u5939\u6253\u5305\u95ee\u9898</li> <li>\u6dfb\u52a0 runtime \u5230 package data</li> </ul>"},{"location":"about/changelog/#v0035-2025-09-30","title":"v0.0.35 (2025-09-30)","text":"v0.0.35 - \u7edf\u4e00 API \u8f93\u51fa\u683c\u5f0f"},{"location":"about/changelog/#_15","title":"\ud83c\udf89 \u65b0\u589e\u529f\u80fd","text":"<ul> <li>\ud83d\udce4 \u7edf\u4e00\u7684 API \u8f93\u51fa\u683c\u5f0f<ul> <li>\u6807\u51c6\u5316\u7684\u54cd\u5e94\u7ed3\u6784</li> <li>\u6210\u529f/\u5931\u8d25\u54cd\u5e94\u5c01\u88c5</li> <li>\u7edf\u4e00\u7684\u9519\u8bef\u5904\u7406</li> <li>\u5206\u9875\u6570\u636e\u683c\u5f0f\u5316</li> </ul> </li> </ul>"},{"location":"about/changelog/#_16","title":"\ud83d\udd27 \u6539\u8fdb\u4f18\u5316","text":"<ul> <li>\u4f18\u5316\u54cd\u5e94\u5de5\u5177\u51fd\u6570</li> <li>\u6539\u8fdb\u9519\u8bef\u6d88\u606f\u683c\u5f0f</li> </ul>"},{"location":"about/changelog/#bug_3","title":"\ud83d\udc1b Bug \u4fee\u590d","text":"<ul> <li>\u4fee\u590d demo \u53c2\u6570\u5f02\u5e38\u95ee\u9898</li> </ul>"},{"location":"about/changelog/#v0034-2025-09-24","title":"v0.0.34 (2025-09-24)","text":"v0.0.34 - \u4e2d\u95f4\u4ef6\u81ea\u52a8\u53d1\u73b0"},{"location":"about/changelog/#_17","title":"\ud83c\udf89 \u65b0\u589e\u529f\u80fd","text":"<ul> <li>\ud83d\udd0d \u4e2d\u95f4\u4ef6\u81ea\u52a8\u53d1\u73b0<ul> <li>\u626b\u63cf <code>middleware/</code> \u76ee\u5f55</li> <li>\u81ea\u52a8\u6ce8\u518c <code>BaseMiddleware</code> \u5b50\u7c7b</li> <li>\u652f\u6301\u4f18\u5148\u7ea7\u6392\u5e8f</li> </ul> </li> <li>\ud83d\udcda \u5b8c\u5584\u6587\u6863<ul> <li>\u4e2d\u95f4\u4ef6\u4f7f\u7528\u6587\u6863</li> <li>\u914d\u7f6e\u8bf4\u660e</li> <li>\u6700\u4f73\u5b9e\u8df5</li> </ul> </li> </ul>"},{"location":"about/changelog/#_18","title":"\ud83d\udd27 \u6539\u8fdb\u4f18\u5316","text":"<ul> <li>\u79fb\u9664\u65e7\u4e2d\u95f4\u4ef6\u6587\u4ef6</li> <li>\u65b0\u589e\u6807\u51c6\u5316\u7684 <code>middlewares.py</code></li> <li>\u4f18\u5316\u8def\u7531\u53d1\u73b0\u903b\u8f91</li> </ul>"},{"location":"about/changelog/#bug_4","title":"\ud83d\udc1b Bug \u4fee\u590d","text":"<ul> <li>\u6dfb\u52a0 asyncpg \u4f9d\u8d56</li> <li>\u66f4\u65b0 demo \u8def\u7531</li> </ul>"},{"location":"about/changelog/#v0033-2025-09-24","title":"v0.0.33 (2025-09-24)","text":"v0.0.33 - \u5206\u9875\u529f\u80fd\u96c6\u6210"},{"location":"about/changelog/#_19","title":"\ud83c\udf89 \u65b0\u589e\u529f\u80fd","text":"<ul> <li>\ud83d\udcc4 \u5206\u9875\u652f\u6301\uff1a\u96c6\u6210 fastapi-pagination<ul> <li>\u81ea\u52a8\u5206\u9875\u88c5\u9970\u5668</li> <li>\u591a\u79cd\u5206\u9875\u7b56\u7565</li> <li>\u7edf\u4e00\u7684\u5206\u9875\u54cd\u5e94\u683c\u5f0f</li> </ul> </li> </ul>"},{"location":"about/changelog/#_20","title":"\ud83d\udd27 \u6539\u8fdb\u4f18\u5316","text":"<ul> <li>\u4f18\u5316\u5206\u9875\u914d\u7f6e</li> <li>\u6539\u8fdb\u67e5\u8be2\u6027\u80fd</li> </ul>"},{"location":"about/changelog/#bug_5","title":"\ud83d\udc1b Bug \u4fee\u590d","text":"<ul> <li>\u4fee\u590d\u627e\u4e0d\u5230 apps \u8def\u5f84\u7684\u95ee\u9898</li> <li>\u4fee\u590d\u65e5\u5fd7\u914d\u7f6e\u95ee\u9898</li> </ul>"},{"location":"about/changelog/#v0032-v0025-2025-09-22-2025-09-24","title":"v0.0.32 - v0.0.25 (2025-09-22 \u81f3 2025-09-24)","text":"\u914d\u7f6e\u7cfb\u7edf\u4e0e\u5f02\u5e38\u5904\u7406\u4f18\u5316"},{"location":"about/changelog/#_21","title":"\ud83c\udf89 \u65b0\u589e\u529f\u80fd","text":"<ul> <li>\ud83d\udd27 \u914d\u7f6e\u7cfb\u7edf\u5b8c\u5584<ul> <li>\u57fa\u4e8e PROJECT_NAME \u626b\u63cf\u914d\u7f6e\u6587\u4ef6</li> <li>\u6539\u8fdb DefaultSettings \u7ee7\u627f\u673a\u5236</li> <li>\u52a8\u6001\u521b\u5efa SQLite \u6570\u636e\u5e93\u6587\u4ef6</li> </ul> </li> <li>\u26a0\ufe0f \u5168\u5c40\u5f02\u5e38\u5904\u7406<ul> <li>\u81ea\u5b9a\u4e49\u5f02\u5e38\u7c7b</li> <li>\u7edf\u4e00\u9519\u8bef\u54cd\u5e94\u683c\u5f0f</li> <li>\u5f02\u5e38\u6d4b\u8bd5\u793a\u4f8b</li> </ul> </li> <li>\ud83d\udc33 Docker \u652f\u6301\uff1a\u6dfb\u52a0 Dockerfile \u548c\u90e8\u7f72\u6587\u6863</li> </ul>"},{"location":"about/changelog/#_22","title":"\ud83d\udd27 \u6539\u8fdb\u4f18\u5316","text":"<ul> <li>\u5b8c\u5584 discover \u76f8\u5173\u903b\u8f91</li> <li>\u8c03\u6574 settings \u7ed3\u6784</li> <li>\u79fb\u9664\u7edf\u4e00\u8fd4\u56de\u683c\u5f0f\uff08\u4fdd\u6301\u7075\u6d3b\u6027\uff09</li> <li>Python \u7248\u672c\u8981\u6c42\uff1a\u5347\u7ea7\u5230 &gt;= 3.12</li> </ul>"},{"location":"about/changelog/#bug_6","title":"\ud83d\udc1b Bug \u4fee\u590d","text":"<ul> <li>\u4fee\u590d\u6570\u636e\u5e93\u88c5\u9970\u5668\u5f02\u5e38</li> <li>\u4fee\u590d DB \u547d\u4ee4 BUG</li> <li>\u4fee\u590d\u5faa\u73af\u5bfc\u5165\u9519\u8bef</li> <li>\u4fee\u590d DefaultSettings \u7c7b\u65b9\u6cd5\u548c\u5c5e\u6027\u7ee7\u627f</li> <li>\u4fee\u590d SQLite \u6570\u636e\u5e93\u6587\u4ef6\u521b\u5efa</li> </ul>"},{"location":"about/changelog/#v0024-v0017-2025-09-12-2025-09-14","title":"v0.0.24 - v0.0.17 (2025-09-12 \u81f3 2025-09-14)","text":"\u6570\u636e\u5e93\u8fc1\u79fb\u4e0e\u5206\u9875\u529f\u80fd"},{"location":"about/changelog/#_23","title":"\ud83c\udf89 \u65b0\u589e\u529f\u80fd","text":"<ul> <li>\ud83d\udcc4 \u5206\u9875\u529f\u80fd\uff1a\u6dfb\u52a0\u57fa\u7840\u5206\u9875\u652f\u6301</li> <li>\ud83d\uddc4\ufe0f \u6570\u636e\u5e93\u547d\u4ee4\u6539\u8fdb<ul> <li>\u4f18\u5316\u5185\u7f6e DB \u547d\u4ee4</li> <li>\u6539\u8fdb\u8fc1\u79fb\u529f\u80fd</li> <li>\u6dfb\u52a0\u5143\u7c7b\u652f\u6301</li> </ul> </li> </ul>"},{"location":"about/changelog/#_24","title":"\ud83d\udd27 \u6539\u8fdb\u4f18\u5316","text":"<ul> <li>\u4f18\u5316\u6570\u636e\u5e93\u8fc1\u79fb\u6d41\u7a0b</li> <li>\u6539\u8fdb\u547d\u4ee4\u57fa\u7c7b</li> </ul>"},{"location":"about/changelog/#bug_7","title":"\ud83d\udc1b Bug \u4fee\u590d","text":"<ul> <li>\u4fee\u590d DB \u8fc1\u79fb\u529f\u80fd\u9519\u8bef</li> <li>\u4fee\u590d\u547d\u4ee4\u57fa\u7c7b Python path</li> <li>\u4fee\u590d FastAPI \u542f\u52a8\u65f6\u7684\u73af\u5883\u53d8\u91cf</li> </ul>"},{"location":"about/changelog/#v0016-v0012-2025-09-10-2025-09-12","title":"v0.0.16 - v0.0.12 (2025-09-10 \u81f3 2025-09-12)","text":"\u547d\u4ee4\u7cfb\u7edf\u4e0e\u914d\u7f6e\u4f18\u5316"},{"location":"about/changelog/#_25","title":"\ud83c\udf89 \u65b0\u589e\u529f\u80fd","text":"<ul> <li>\ud83d\udee0\ufe0f \u547d\u4ee4\u57fa\u7c7b\u4f18\u5316<ul> <li>\u6dfb\u52a0 Python path \u4fee\u6b63</li> <li>\u5143\u7c7b\u652f\u6301</li> <li>\u6539\u8fdb\u547d\u4ee4\u6ce8\u518c</li> </ul> </li> </ul>"},{"location":"about/changelog/#_26","title":"\ud83d\udd27 \u6539\u8fdb\u4f18\u5316","text":"<ul> <li>\u79fb\u9664 <code>main.py</code> \u5230\u5305\u5185\u90e8</li> <li>\u4f18\u5316 config \u76ee\u5f55\u62f7\u8d1d</li> <li>\u6539\u8fdb <code>.env.example</code> \u6587\u4ef6</li> </ul>"},{"location":"about/changelog/#bug_8","title":"\ud83d\udc1b Bug \u4fee\u590d","text":"<ul> <li>\u4fee\u590d DB migrate \u529f\u80fd\u9519\u8bef</li> <li>\u4fee\u590d FastAPI \u542f\u52a8\u73af\u5883\u53d8\u91cf</li> <li>\u4fee\u590d\u914d\u7f6e\u76ee\u5f55\u62f7\u8d1d\u95ee\u9898</li> </ul>"},{"location":"about/changelog/#v0011-v008-2025-09-10","title":"v0.0.11 - v0.0.8 (2025-09-10)","text":"\u547d\u4ee4\u884c\u5de5\u5177\u4e0e\u9879\u76ee\u521d\u59cb\u5316"},{"location":"about/changelog/#_27","title":"\ud83c\udf89 \u65b0\u589e\u529f\u80fd","text":"<ul> <li>\ud83d\ude80 faster-app \u547d\u4ee4\uff1a\u6dfb\u52a0\u5168\u5c40\u547d\u4ee4\u652f\u6301</li> <li>\ud83c\udfac init \u5b50\u547d\u4ee4\uff1a\u9879\u76ee\u521d\u59cb\u5316\u5de5\u5177</li> <li>\ud83d\udce6 main.py \u96c6\u6210\uff1a\u79fb\u52a8 main.py \u5230\u5305\u5185</li> </ul>"},{"location":"about/changelog/#_28","title":"\ud83d\udd27 \u6539\u8fdb\u4f18\u5316","text":"<ul> <li>\u4f18\u5316\u547d\u4ee4\u884c\u5de5\u5177\u7ed3\u6784</li> <li>\u6539\u8fdb\u9879\u76ee\u521d\u59cb\u5316\u6d41\u7a0b</li> </ul>"},{"location":"about/changelog/#bug_9","title":"\ud83d\udc1b Bug \u4fee\u590d","text":"<ul> <li>\u4fee\u590d .env.example \u95ee\u9898</li> <li>\u4fee\u590d\u547d\u4ee4\u884c\u5de5\u5177 bug</li> </ul>"},{"location":"about/changelog/#v007-v006-2025-09-10","title":"v0.0.7 - v0.0.6 (2025-09-10)","text":"\u5e94\u7528\u6a21\u677f\u7cfb\u7edf"},{"location":"about/changelog/#_29","title":"\ud83c\udf89 \u65b0\u589e\u529f\u80fd","text":"<ul> <li>\ud83d\ude80 App \u547d\u4ee4\u7cfb\u7edf<ul> <li><code>faster app demo</code>: \u521b\u5efa\u6f14\u793a\u5e94\u7528</li> <li><code>faster app config</code>: \u751f\u6210\u914d\u7f6e\u6587\u4ef6</li> <li><code>faster app env</code>: \u521b\u5efa\u73af\u5883\u914d\u7f6e</li> </ul> </li> <li>\ud83d\udcc1 \u6a21\u677f\u7cfb\u7edf<ul> <li>Demo \u5e94\u7528\u6a21\u677f\uff08\u5b8c\u6574 MVC \u7ed3\u6784\uff09</li> <li>\u914d\u7f6e\u6a21\u677f</li> <li>\u6807\u51c6\u5316\u5e94\u7528\u7ed3\u6784</li> </ul> </li> <li>\ud83d\udd27 \u547d\u4ee4\u57fa\u7c7b\u4f18\u5316<ul> <li>\u6dfb\u52a0 BASE_PATH \u652f\u6301</li> <li>\u6a21\u677f\u5b9a\u4f4d\u529f\u80fd</li> </ul> </li> </ul>"},{"location":"about/changelog/#_30","title":"\ud83d\udd27 \u6539\u8fdb\u4f18\u5316","text":"<ul> <li>\u6570\u636e\u5e93\u547d\u4ee4\u589e\u5f3a</li> <li>\u6539\u8fdb\u914d\u7f6e\u7ba1\u7406</li> </ul>"},{"location":"about/changelog/#_31","title":"\ud83d\udca1 \u5f71\u54cd","text":"<p>\u8fd9\u4e9b\u529f\u80fd\u8ba9\u5f00\u53d1\u8005\u80fd\u591f\u5feb\u901f\u642d\u5efa\u6807\u51c6\u5316\u7684\u5e94\u7528\u7ed3\u6784\uff0c\u6781\u5927\u63d0\u5347\u5f00\u53d1\u6548\u7387\u3002</p>"},{"location":"about/changelog/#v005-2025-09-10","title":"v0.0.5 (2025-09-10)","text":"v0.0.5 - \u9879\u76ee\u91cd\u547d\u540d"},{"location":"about/changelog/#_32","title":"\ud83c\udf89 \u91cd\u5927\u53d8\u66f4","text":"<ul> <li>\ud83d\udd04 \u9879\u76ee\u91cd\u547d\u540d\uff1aFaster API \u2192 Faster APP<ul> <li>\u66f4\u540d\u53cd\u6620\u9879\u76ee\u5b9a\u4f4d\uff08\u5b8c\u6574\u5e94\u7528\u6846\u67b6\u800c\u975e\u4ec5 API\uff09</li> <li>\u66f4\u65b0\u6240\u6709\u6587\u6863\u548c\u914d\u7f6e</li> <li>\u4fee\u6b63 GitHub \u4ed3\u5e93\u94fe\u63a5</li> </ul> </li> </ul>"},{"location":"about/changelog/#_33","title":"\ud83d\udd27 \u6539\u8fdb\u4f18\u5316","text":"<ul> <li>\u4fee\u590d\u5bfc\u5165\u8def\u5f84\uff1a\u4f7f\u7528\u5b8c\u6574\u7684 <code>faster_app.settings</code> \u8def\u5f84</li> <li>\u66f4\u65b0\u914d\u7f6e\uff1a\u4e3b\u673a\u5730\u5740\u8c03\u6574</li> <li>\u6dfb\u52a0 pydantic \u914d\u7f6e <code>extra=\"ignore\"</code> \u63d0\u5347\u517c\u5bb9\u6027</li> <li>\u7b80\u5316\u9ed8\u8ba4 API \u54cd\u5e94\u6d88\u606f</li> </ul>"},{"location":"about/changelog/#_34","title":"\ud83d\udcdd \u6587\u6863\u66f4\u65b0","text":"<ul> <li>\u540c\u6b65\u66f4\u65b0\u6240\u6709\u6587\u6863</li> <li>\u66f4\u65b0 README</li> <li>\u4fee\u6b63\u914d\u7f6e\u793a\u4f8b</li> </ul>"},{"location":"about/changelog/#v004-v001-2025-09-09","title":"v0.0.4 - v0.0.1 (2025-09-09)","text":"\u65e9\u671f\u7248\u672c - \u9879\u76ee\u521d\u59cb\u5316"},{"location":"about/changelog/#_35","title":"\ud83c\udf89 \u6838\u5fc3\u529f\u80fd","text":"<ul> <li>\ud83c\udfd7\ufe0f \u57fa\u7840\u6846\u67b6\u642d\u5efa<ul> <li>FastAPI \u96c6\u6210</li> <li>Tortoise ORM \u96c6\u6210</li> <li>\u57fa\u7840\u9879\u76ee\u7ed3\u6784</li> </ul> </li> <li>\ud83d\udd0d \u81ea\u52a8\u53d1\u73b0\u673a\u5236<ul> <li>\u8def\u7531\u81ea\u52a8\u53d1\u73b0</li> <li>\u6a21\u578b\u81ea\u52a8\u53d1\u73b0</li> <li>\u547d\u4ee4\u81ea\u52a8\u53d1\u73b0</li> </ul> </li> <li>\ud83d\uddc4\ufe0f \u6a21\u578b\u57fa\u7c7b<ul> <li>UUIDModel</li> <li>DateTimeModel</li> <li>StatusModel</li> </ul> </li> <li>\ud83d\udee0\ufe0f \u547d\u4ee4\u884c\u5de5\u5177<ul> <li>DB \u547d\u4ee4\uff08init, migrate, upgrade\uff09</li> <li>Server \u547d\u4ee4</li> <li>\u57fa\u7840\u547d\u4ee4\u7cfb\u7edf</li> </ul> </li> <li>\u2699\ufe0f \u914d\u7f6e\u7cfb\u7edf<ul> <li>\u73af\u5883\u53d8\u91cf\u652f\u6301</li> <li>BaseSettings \u96c6\u6210</li> <li>\u914d\u7f6e\u81ea\u52a8\u53d1\u73b0</li> </ul> </li> </ul>"},{"location":"about/changelog/#bug_10","title":"\ud83d\udc1b Bug \u4fee\u590d","text":"<ul> <li>\u4fee\u590d\u5404\u79cd\u521d\u671f bug</li> <li>\u4f18\u5316\u4ee3\u7801\u7ed3\u6784</li> <li>\u6539\u8fdb\u9519\u8bef\u5904\u7406</li> </ul>"},{"location":"about/changelog/#_36","title":"\ud83d\udcdd \u6587\u6863","text":"<ul> <li>\u521b\u5efa README</li> <li>\u6dfb\u52a0\u57fa\u7840\u6587\u6863</li> <li>\u793a\u4f8b\u4ee3\u7801</li> </ul>"},{"location":"about/changelog/#_37","title":"\u7248\u672c\u89c4\u5212","text":""},{"location":"about/changelog/#_38","title":"\ud83d\ude80 \u5373\u5c06\u63a8\u51fa","text":"<ul> <li>v0.1.0 (\u8ba1\u5212\u4e2d)</li> <li>\ud83d\udd10 \u8ba4\u8bc1\u6388\u6743\u7cfb\u7edf</li> <li>\ud83d\udce7 \u90ae\u4ef6\u53d1\u9001\u652f\u6301</li> <li>\ud83d\udce6 \u6587\u4ef6\u4e0a\u4f20\u7ec4\u4ef6</li> <li>\ud83d\udd04 WebSocket \u652f\u6301</li> <li>\ud83d\udcca \u6027\u80fd\u76d1\u63a7\u96c6\u6210</li> </ul>"},{"location":"about/changelog/#_39","title":"\ud83d\udca1 \u672a\u6765\u5c55\u671b","text":"<ul> <li>v0.2.0 (\u89c4\u5212\u4e2d)</li> <li>\ud83e\uddea \u6d4b\u8bd5\u6846\u67b6\u96c6\u6210</li> <li>\ud83d\udcc8 \u76d1\u63a7\u548c\u8ffd\u8e2a</li> <li>\ud83c\udf10 \u56fd\u9645\u5316\u652f\u6301</li> <li>\ud83c\udfa8 Admin \u540e\u53f0\u754c\u9762</li> <li>\ud83d\udd0c \u63d2\u4ef6\u7cfb\u7edf</li> </ul>"},{"location":"about/changelog/#_40","title":"\ud83d\udc68\u200d\ud83d\udcbb \u5f00\u53d1\u8005\u4fe1\u606f","text":"<p>\u88f4\u632f\u98de (peizhenfei)</p> <ul> <li>\ud83d\udce7 \u90ae\u7bb1: peizhenfei@cvte.com</li> <li>\ud83d\udcac \u5fae\u4fe1: <code>hsdtsyl</code> (\u9ed1\u8272\u7684\u78b3\u9178\u996e\u6599)</li> <li>\ud83d\udc19 GitHub: @mautops</li> <li>\ud83c\udfe2 \u7ec4\u7ec7: CVTE</li> </ul> <p>\u8054\u7cfb\u65b9\u5f0f</p> <p>\u5982\u6709\u95ee\u9898\u6216\u5efa\u8bae\uff0c\u6b22\u8fce\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8054\u7cfb\uff1a</p> <pre><code>- \ud83d\udcee **\u90ae\u4ef6\u54a8\u8be2**: peizhenfei@cvte.com\n- \ud83d\udcac **\u5fae\u4fe1\u4ea4\u6d41**: hsdtsyl (\u6dfb\u52a0\u65f6\u8bf7\u5907\u6ce8\"Faster APP\")\n- \ud83d\udc1b **\u95ee\u9898\u53cd\u9988**: [GitHub Issues](https://github.com/mautops/faster-app/issues)\n- \ud83d\udca1 **\u529f\u80fd\u5efa\u8bae**: [GitHub Discussions](https://github.com/mautops/faster-app/discussions)\n</code></pre>"},{"location":"about/changelog/#_41","title":"\ud83e\udd1d \u8d21\u732e","text":"<p>\u611f\u8c22\u6240\u6709\u4e3a Faster APP \u505a\u51fa\u8d21\u732e\u7684\u5f00\u53d1\u8005\uff01</p> <p>\u5982\u679c\u4f60\u60f3\u53c2\u4e0e\u8d21\u732e\uff0c\u8bf7\u9605\u8bfb \u8d21\u732e\u6307\u5357\u3002</p>"},{"location":"about/changelog/#_42","title":"\ud83d\udce6 \u83b7\u53d6\u6700\u65b0\u7248\u672c","text":"<pre><code># \u4f7f\u7528 uv\nuv add faster-app --upgrade\n\n# \u4f7f\u7528 pip\npip install --upgrade faster-app\n</code></pre> <p>\u67e5\u770b GitHub Releases \u83b7\u53d6\u8be6\u7ec6\u7684\u53d1\u5e03\u8bf4\u660e\u3002</p>"},{"location":"about/license/","title":"\u8bb8\u53ef\u8bc1","text":"<p>Faster APP \u91c7\u7528 MIT \u8bb8\u53ef\u8bc1\u3002</p>"},{"location":"about/license/#mit-license","title":"MIT License","text":"<p>Copyright \u00a9 2024 peizhenfei</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"about/license/#_2","title":"\u7b2c\u4e09\u65b9\u8bb8\u53ef\u8bc1","text":"<p>Faster APP \u4f7f\u7528\u4e86\u4ee5\u4e0b\u5f00\u6e90\u9879\u76ee\uff1a</p> <ul> <li>FastAPI: MIT License</li> <li>Tortoise ORM: Apache License 2.0</li> <li>Fire: Apache License 2.0</li> <li>Pydantic: MIT License</li> <li>Uvicorn: BSD License</li> </ul>"},{"location":"about/v0.0.42-summary/","title":"v0.0.42 \u914d\u7f6e\u7cfb\u7edf\u5347\u7ea7\u603b\u7ed3","text":""},{"location":"about/v0.0.42-summary/#_1","title":"\ud83c\udfaf \u6982\u8ff0","text":"<p>\u672c\u6b21\u66f4\u65b0\u5bf9 Faster APP \u7684\u914d\u7f6e\u7cfb\u7edf\u8fdb\u884c\u4e86\u5168\u9762\u5347\u7ea7\uff0c\u5f15\u5165\u4e86 9 \u5927\u6838\u5fc3\u529f\u80fd\uff0c\u4f7f\u914d\u7f6e\u66f4\u5b89\u5168\u3001\u66f4\u7075\u6d3b\u3001\u66f4\u6613\u7528\u3002</p>"},{"location":"about/v0.0.42-summary/#9","title":"\ud83d\udce6 \u6838\u5fc3\u529f\u80fd\uff089 \u5927\u529f\u80fd\uff09","text":""},{"location":"about/v0.0.42-summary/#1","title":"1\ufe0f\u20e3 \u654f\u611f\u4fe1\u606f\u4fdd\u62a4 \ud83d\udd10","text":"<p>\u95ee\u9898\uff1a\u5bc6\u7801\u3001\u5bc6\u94a5\u7b49\u654f\u611f\u4fe1\u606f\u5bb9\u6613\u5728\u65e5\u5fd7\u4e2d\u6cc4\u9732 \u89e3\u51b3\u65b9\u6848\uff1a\u4f7f\u7528 Pydantic <code>SecretStr</code> \u7c7b\u578b</p> <pre><code>from pydantic import SecretStr\n\nclass JWTSettings(BaseModel):\n    secret_key: SecretStr = SecretStr(\"your-secret\")\n\n# JSON \u5e8f\u5217\u5316\u81ea\u52a8\u8131\u654f\nprint(settings.jwt.secret_key)  # SecretStr('***HIDDEN***')\n\n# \u9700\u8981\u65f6\u83b7\u53d6\u539f\u59cb\u503c\nactual_key = settings.jwt.secret_key.get_secret_value()\n</code></pre>"},{"location":"about/v0.0.42-summary/#2-tortoise_orm","title":"2\ufe0f\u20e3 TORTOISE_ORM \u52a8\u6001\u914d\u7f6e \ud83d\udd04","text":"<p>\u95ee\u9898\uff1a\u5728 <code>__init__</code> \u4e2d\u751f\u6210\u914d\u7f6e\uff0c\u65e0\u6cd5\u53cd\u6620\u8fd0\u884c\u65f6\u66f4\u65b0 \u89e3\u51b3\u65b9\u6848\uff1a\u6539\u4e3a <code>@property</code> \u52a8\u6001\u751f\u6210</p> <pre><code>class Settings(BaseSettings):\n    @property\n    def TORTOISE_ORM(self) -&gt; dict:\n        \"\"\"\u52a8\u6001\u751f\u6210\u914d\u7f6e\uff0c\u59cb\u7ec8\u4f7f\u7528\u6700\u65b0\u503c\"\"\"\n        return {\n            \"connections\": {\n                \"POSTGRES\": {\n                    \"credentials\": {\n                        \"host\": self.database.host,  # \u52a8\u6001\u8bfb\u53d6\n                        \"password\": self.database.password.get_secret_value(),\n                    }\n                }\n            }\n        }\n</code></pre>"},{"location":"about/v0.0.42-summary/#3","title":"3\ufe0f\u20e3 \u751f\u4ea7\u73af\u5883\u914d\u7f6e\u9a8c\u8bc1 \u2705","text":"<p>\u95ee\u9898\uff1a\u751f\u4ea7\u73af\u5883\u914d\u7f6e\u9519\u8bef\u5bfc\u81f4\u5b89\u5168\u9690\u60a3 \u89e3\u51b3\u65b9\u6848\uff1a\u5b57\u6bb5\u7ea7 + \u6a21\u578b\u7ea7\u9a8c\u8bc1\u5668</p> <pre><code>@field_validator(\"port\")\ndef validate_port(cls, v):\n    if not 1 &lt;= v &lt;= 65535:\n        raise ValueError(f\"\u7aef\u53e3\u5fc5\u987b\u5728 1-65535 \u4e4b\u95f4\")\n    return v\n\n@model_validator(mode=\"after\")\ndef validate_production_settings(self):\n    if not self.debug:  # \u751f\u4ea7\u73af\u5883\n        if len(self.jwt.secret_key.get_secret_value()) &lt; 32:\n            raise ValueError(\"\u751f\u4ea7\u73af\u5883\u5bc6\u94a5\u957f\u5ea6\u5fc5\u987b &gt;= 32\")\n    return self\n</code></pre>"},{"location":"about/v0.0.42-summary/#4","title":"4\ufe0f\u20e3 \u73af\u5883\u53d8\u91cf\u524d\u7f00 \ud83c\udff7\ufe0f","text":"<p>\u95ee\u9898\uff1a\u591a\u5e94\u7528\u73af\u5883\u53d8\u91cf\u51b2\u7a81 \u89e3\u51b3\u65b9\u6848\uff1a\u7edf\u4e00\u4f7f\u7528 <code>FASTER_</code> \u524d\u7f00</p> <pre><code># \u907f\u514d\u51b2\u7a81\nexport FASTER_DATABASE__HOST=localhost  # \u2705\nexport FASTER_SERVER__PORT=8000         # \u2705\n\n# \u800c\u4e0d\u662f\nexport DATABASE_HOST=localhost  # \u274c \u53ef\u80fd\u51b2\u7a81\n</code></pre>"},{"location":"about/v0.0.42-summary/#5","title":"5\ufe0f\u20e3 \u914d\u7f6e\u5206\u7ec4\u4e0e\u5d4c\u5957 \ud83d\udce6","text":"<p>\u95ee\u9898\uff1a\u6240\u6709\u914d\u7f6e\u6241\u5e73\u5316\uff0c\u96be\u4ee5\u7ba1\u7406 \u89e3\u51b3\u65b9\u6848\uff1a\u6309\u529f\u80fd\u6a21\u5757\u5206\u7ec4</p> <pre><code>class Settings(BaseSettings):\n    server: ServerSettings      # \u670d\u52a1\u5668\u914d\u7f6e\n    jwt: JWTSettings            # JWT \u914d\u7f6e\n    database: DatabaseSettings  # \u6570\u636e\u5e93\u914d\u7f6e\n    log: LogSettings            # \u65e5\u5fd7\u914d\u7f6e\n\n# \u8bbf\u95ee\u65b9\u5f0f\nsettings.server.host\nsettings.database.port\nsettings.jwt.secret_key\n</code></pre>"},{"location":"about/v0.0.42-summary/#6","title":"6\ufe0f\u20e3 \u914d\u7f6e\u6587\u4ef6\u91cd\u6784 \ud83d\uddc2\ufe0f","text":"<p>\u95ee\u9898\uff1a\u6240\u6709\u914d\u7f6e\u5728\u4e00\u4e2a\u6587\u4ef6\u4e2d\uff0c\u96be\u4ee5\u7ef4\u62a4 \u89e3\u51b3\u65b9\u6848\uff1a\u62c6\u5206\u5230\u72ec\u7acb\u6587\u4ef6</p> <pre><code>faster_app/settings/groups/\n\u251c\u2500\u2500 __init__.py      # \u7edf\u4e00\u5bfc\u51fa\n\u251c\u2500\u2500 server.py        # ServerSettings\n\u251c\u2500\u2500 jwt.py           # JWTSettings  \n\u251c\u2500\u2500 database.py      # DatabaseSettings\n\u2514\u2500\u2500 log.py           # LogSettings\n</code></pre>"},{"location":"about/v0.0.42-summary/#7-database_url","title":"7\ufe0f\u20e3 DATABASE_URL \u652f\u6301 \ud83d\udd17","text":"<p>\u95ee\u9898\uff1a\u6570\u636e\u5e93\u914d\u7f6e\u9700\u8981\u591a\u4e2a\u73af\u5883\u53d8\u91cf \u89e3\u51b3\u65b9\u6848\uff1a\u5355\u4e2a URL \u5b57\u7b26\u4e32</p> <pre><code># \u65b0\u65b9\u5f0f\uff08\u63a8\u8350\uff09- 1 \u4e2a\u53d8\u91cf\nexport FASTER_DATABASE_URL=postgresql://user:pass@host:5432/db\n\n# \u65e7\u65b9\u5f0f\uff08\u4ecd\u652f\u6301\uff09- 6 \u4e2a\u53d8\u91cf\nexport FASTER_DATABASE__TYPE=postgres\nexport FASTER_DATABASE__HOST=host\nexport FASTER_DATABASE__PORT=5432\nexport FASTER_DATABASE__USER=user\nexport FASTER_DATABASE__PASSWORD=pass\nexport FASTER_DATABASE__DATABASE=db\n</code></pre> <p>\u4f18\u52bf\uff1a - \u2705 \u7b26\u5408 12-Factor App \u6700\u4f73\u5b9e\u8df5 - \u2705 \u4e91\u5e73\u53f0\u53cb\u597d\uff08Heroku\u3001Railway\u3001Render\uff09 - \u2705 \u7b80\u5316\u90e8\u7f72\u914d\u7f6e - \u2705 \u5b8c\u5168\u5411\u540e\u517c\u5bb9</p>"},{"location":"about/v0.0.42-summary/#8-schema","title":"8\ufe0f\u20e3 \u6570\u636e\u5e93 Schema \u652f\u6301 \ud83c\udfe2","text":"<p>\u95ee\u9898\uff1a\u591a\u79df\u6237\u5e94\u7528\u6570\u636e\u9694\u79bb\u56f0\u96be \u89e3\u51b3\u65b9\u6848\uff1a\u652f\u6301 PostgreSQL Schema</p> <pre><code># \u79df\u6237 A\nexport FASTER_DATABASE_URL=postgresql://app:pass@db:5432/saas?schema=tenant_a\n\n# \u79df\u6237 B\nexport FASTER_DATABASE_URL=postgresql://app:pass@db:5432/saas?schema=tenant_b\n</code></pre> <p>\u5178\u578b\u573a\u666f\uff1a - \u591a\u79df\u6237 SaaS \u5e94\u7528\uff08\u6bcf\u79df\u6237\u4e00\u4e2a schema\uff09 - \u5fae\u670d\u52a1\u6570\u636e\u9694\u79bb\uff08\u6bcf\u670d\u52a1\u4e00\u4e2a schema\uff09 - \u73af\u5883\u6570\u636e\u9694\u79bb\uff08dev/test/staging\uff09</p>"},{"location":"about/v0.0.42-summary/#9_1","title":"9\ufe0f\u20e3 \u914d\u7f6e\u5b57\u6bb5\u547d\u540d\u89c4\u8303 \ud83d\udcdd","text":"<p>\u95ee\u9898\uff1a\u5b57\u6bb5\u547d\u540d\u4e0d\u7edf\u4e00 \u89e3\u51b3\u65b9\u6848\uff1a\u7edf\u4e00\u4f7f\u7528 <code>snake_case</code></p> <pre><code># \u2705 \u63a8\u8350\uff08\u65b0\uff09\nclass ServerSettings(BaseModel):\n    host: str = \"0.0.0.0\"\n    port: int = 8000\n\n# \u274c \u907f\u514d\uff08\u65e7\uff09\nclass ServerSettings(BaseModel):\n    HOST: str = \"0.0.0.0\"\n    PORT: int = 8000\n</code></pre>"},{"location":"about/v0.0.42-summary/#_2","title":"\ud83d\udd27 \u914d\u7f6e\u65b9\u5f0f\u5bf9\u6bd4","text":""},{"location":"about/v0.0.42-summary/#_3","title":"\u65e7\u65b9\u5f0f\uff08\u4ecd\u652f\u6301\uff09","text":"<pre><code>export FASTER_DATABASE__TYPE=postgres\nexport FASTER_DATABASE__HOST=prod.db.com\nexport FASTER_DATABASE__PORT=5432\nexport FASTER_DATABASE__USER=app\nexport FASTER_DATABASE__PASSWORD=secret\nexport FASTER_DATABASE__DATABASE=myapp\n</code></pre>"},{"location":"about/v0.0.42-summary/#_4","title":"\u65b0\u65b9\u5f0f\uff08\u63a8\u8350\uff09","text":"<pre><code>export FASTER_DATABASE_URL=postgresql://app:secret@prod.db.com:5432/myapp?schema=tenant_a\n</code></pre> <p>\u6548\u679c\uff1a6 \u4e2a\u53d8\u91cf \u2192 1 \u4e2a\u53d8\u91cf \u2728</p>"},{"location":"about/v0.0.42-summary/#_5","title":"\ud83d\udcd6 \u5b8c\u6574\u6587\u6863","text":"<p>\u672c\u6b21\u66f4\u65b0\u65b0\u589e 8 \u7bc7\u8be6\u7ec6\u6587\u6863\uff1a</p> <ol> <li>\u654f\u611f\u4fe1\u606f\u4fdd\u62a4</li> <li>TORTOISE_ORM \u914d\u7f6e</li> <li>\u751f\u4ea7\u73af\u5883\u9a8c\u8bc1</li> <li>\u73af\u5883\u53d8\u91cf\u524d\u7f00</li> <li>\u914d\u7f6e\u5206\u7ec4</li> <li>\u914d\u7f6e\u91cd\u6784</li> <li>DATABASE_URL \u652f\u6301</li> <li>\u6570\u636e\u5e93 Schema \u652f\u6301</li> </ol>"},{"location":"about/v0.0.42-summary/#_6","title":"\ud83d\udd04 \u5411\u540e\u517c\u5bb9\u6027","text":"<p>\u2705 \u5b8c\u5168\u5411\u540e\u517c\u5bb9 - \u6240\u6709\u65e7\u7684\u914d\u7f6e\u65b9\u5f0f\u4ecd\u7136\u6709\u6548 - \u53ef\u4ee5\u6309\u9700\u6e10\u8fdb\u5f0f\u8fc1\u79fb - \u96f6\u7834\u574f\u6027\u53d8\u66f4</p>"},{"location":"about/v0.0.42-summary/#_7","title":"\ud83c\udfaf \u8bbe\u8ba1\u539f\u5219","text":"<ol> <li>\u5b89\u5168\u7b2c\u4e00 - \u654f\u611f\u4fe1\u606f\u4fdd\u62a4 + \u751f\u4ea7\u73af\u5883\u9a8c\u8bc1</li> <li>\u7b80\u5355\u5b9e\u7528 - DATABASE_URL \u7b80\u5316\u914d\u7f6e</li> <li>\u6a21\u5757\u5316 - \u914d\u7f6e\u5206\u7ec4\u4fbf\u4e8e\u7ef4\u62a4</li> <li>\u4e91\u539f\u751f - \u7b26\u5408 12-Factor App \u6700\u4f73\u5b9e\u8df5</li> <li>\u5411\u540e\u517c\u5bb9 - \u4e0d\u7834\u574f\u73b0\u6709\u4ee3\u7801</li> <li>\u6587\u6863\u5b8c\u5584 - \u6bcf\u4e2a\u529f\u80fd\u90fd\u6709\u8be6\u7ec6\u6587\u6863</li> </ol>"},{"location":"about/v0.0.42-summary/#_8","title":"\ud83d\udcca \u5f71\u54cd\u8303\u56f4","text":"\u65b9\u9762 \u6539\u8fdb \u5b89\u5168\u6027 \u654f\u611f\u4fe1\u606f\u81ea\u52a8\u4fdd\u62a4 + \u751f\u4ea7\u9a8c\u8bc1 \u6613\u7528\u6027 DATABASE_URL \u7b80\u5316\u914d\u7f6e \u53ef\u7ef4\u62a4\u6027 \u914d\u7f6e\u5206\u7ec4 + \u6587\u4ef6\u62c6\u5206 \u6269\u5c55\u6027 \u6a21\u5757\u5316\u7ed3\u6784\u6613\u4e8e\u6269\u5c55 \u591a\u79df\u6237 Schema \u652f\u6301\u7b80\u5316\u67b6\u6784 \u4e91\u90e8\u7f72 \u7b26\u5408\u4e91\u5e73\u53f0\u6807\u51c6"},{"location":"about/v0.0.42-summary/#_9","title":"\ud83d\ude80 \u5feb\u901f\u5f00\u59cb","text":""},{"location":"about/v0.0.42-summary/#1-database_url","title":"1. \u4f7f\u7528 DATABASE_URL","text":"<pre><code># \u5f00\u53d1\u73af\u5883\nexport FASTER_DATABASE_URL=sqlite:///dev.db\n\n# \u751f\u4ea7\u73af\u5883\nexport FASTER_DATABASE_URL=postgresql://app:secret@prod.db:5432/myapp\n</code></pre>"},{"location":"about/v0.0.42-summary/#2-saas","title":"2. \u591a\u79df\u6237 SaaS","text":"<pre><code># \u79df\u6237 A\ndocker run -e FASTER_DATABASE_URL=\"postgresql://app:pass@db:5432/saas?schema=tenant_a\" myapp\n\n# \u79df\u6237 B\ndocker run -e FASTER_DATABASE_URL=\"postgresql://app:pass@db:5432/saas?schema=tenant_b\" myapp\n</code></pre>"},{"location":"about/v0.0.42-summary/#3_1","title":"3. \u914d\u7f6e\u8bbf\u95ee","text":"<pre><code>from faster_app.settings import configs\n\n# \u8bbf\u95ee\u914d\u7f6e\nprint(configs.server.host)\nprint(configs.database.type)\nprint(configs.jwt.secret_key.get_secret_value())\nprint(configs.database.db_schema)\n</code></pre>"},{"location":"about/v0.0.42-summary/#_10","title":"\u2705 \u603b\u7ed3","text":"<p>v0.0.42 \u662f\u914d\u7f6e\u7cfb\u7edf\u7684\u91cd\u5927\u5347\u7ea7\uff1a</p> <ul> <li>\u2705 9 \u5927\u6838\u5fc3\u529f\u80fd</li> <li>\u2705 8 \u7bc7\u8be6\u7ec6\u6587\u6863</li> <li>\u2705 \u5b8c\u5168\u5411\u540e\u517c\u5bb9</li> <li>\u2705 \u751f\u4ea7\u73af\u5883\u5c31\u7eea</li> <li>\u2705 \u591a\u79df\u6237\u53cb\u597d</li> <li>\u2705 \u4e91\u539f\u751f\u8bbe\u8ba1</li> </ul> <p>\u63a8\u8350\u6240\u6709\u7528\u6237\u5347\u7ea7\uff0c\u4eab\u53d7\u66f4\u5b89\u5168\u3001\u66f4\u7075\u6d3b\u7684\u914d\u7f6e\u4f53\u9a8c\uff01 \ud83c\udf89</p>"},{"location":"api/app/","title":"\u5e94\u7528\u6838\u5fc3 API","text":"<p>options: show_root_heading: true heading_level: 2</p>"},{"location":"api/app/#faster_app.app","title":"<code>app</code>","text":"<p>Faster APP \u5e94\u7528\u5b9e\u4f8b\u6a21\u5757</p>"},{"location":"api/app/#faster_app.app.create_app","title":"<code>create_app()</code>","text":"<p>\u521b\u5efa FastAPI \u5e94\u7528\u5b9e\u4f8b</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>faster_app/app.py</code> <pre><code>def create_app() -&gt; FastAPI:\n    \"\"\"\u521b\u5efa FastAPI \u5e94\u7528\u5b9e\u4f8b\"\"\"\n    app = FastAPI(\n        title=configs.PROJECT_NAME,\n        version=configs.VERSION,\n        debug=configs.DEBUG,\n        lifespan=lifespan,\n        docs_url=None,\n        redoc_url=None,\n    )\n\n    # \u6dfb\u52a0\u9759\u6001\u6587\u4ef6\u670d\u52a1\u5668\n    try:\n        app.mount(\n            \"/static\", StaticFiles(directory=f\"{BASE_DIR}/statics\"), name=\"static\"\n        )\n    except Exception as e:\n        logger.error(f\"\u9759\u6001\u6587\u4ef6\u670d\u52a1\u5668\u542f\u52a8\u5931\u8d25: {e}\")\n\n    # \u6dfb\u52a0\u4e2d\u95f4\u4ef6\n    middlewares = MiddlewareDiscover().discover()\n    for middleware in middlewares:\n        app.add_middleware(middleware[\"class\"], **middleware[\"kwargs\"])\n        logger.info(f\"Loaded middleware: {middleware['class'].__name__}\")\n\n    # \u6dfb\u52a0\u8def\u7531\n    routes = RoutesDiscover().discover()\n    for route in routes:\n        app.include_router(route)\n\n    return app\n</code></pre>"},{"location":"api/app/#faster_app.app.get_app","title":"<code>get_app()</code>","text":"<p>\u83b7\u53d6\u5e94\u7528\u5b9e\u4f8b(\u5355\u4f8b\u6a21\u5f0f)</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>faster_app/app.py</code> <pre><code>def get_app() -&gt; FastAPI:\n    \"\"\"\u83b7\u53d6\u5e94\u7528\u5b9e\u4f8b(\u5355\u4f8b\u6a21\u5f0f)\"\"\"\n    if not hasattr(get_app, \"_app\"):\n        get_app._app = create_app()\n    return get_app._app\n</code></pre>"},{"location":"api/models/","title":"\u6a21\u578b API","text":"<p>options: show_root_heading: true heading_level: 2 members: - UUIDModel - DateTimeModel - EnumModel - ScopeModel</p>"},{"location":"api/models/#faster_app.models.base","title":"<code>base</code>","text":"<p>\u6a21\u578b\u57fa\u7c7b, \u4f7f\u7528 pydantic \u5e93\u7ba1\u7406\u6a21\u578b</p>"},{"location":"api/models/#faster_app.models.base.UUIDModel","title":"<code>UUIDModel</code>","text":"<p>               Bases: <code>Model</code></p> <p>\u6a21\u578b\u57fa\u7c7b</p> Source code in <code>faster_app/models/base.py</code> <pre><code>class UUIDModel(Model):\n    \"\"\"\u6a21\u578b\u57fa\u7c7b\"\"\"\n\n    id = UUIDField(primary_key=True, verbose_name=\"ID\")\n\n    class Meta:\n        abstract = True\n</code></pre>"},{"location":"api/models/#faster_app.models.base.DateTimeModel","title":"<code>DateTimeModel</code>","text":"<p>               Bases: <code>Model</code></p> <p>\u6a21\u578b\u57fa\u7c7b</p> Source code in <code>faster_app/models/base.py</code> <pre><code>class DateTimeModel(Model):\n    \"\"\"\u6a21\u578b\u57fa\u7c7b\"\"\"\n\n    created_at = DatetimeField(auto_now_add=True, verbose_name=\"\u521b\u5efa\u65f6\u95f4\")\n    updated_at = DatetimeField(auto_now=True, verbose_name=\"\u66f4\u65b0\u65f6\u95f4\")\n\n    class Meta:\n        abstract = True\n</code></pre>"},{"location":"api/models/#faster_app.models.base.StatusModel","title":"<code>StatusModel</code>","text":"<p>               Bases: <code>Model</code></p> <p>\u6a21\u578b\u57fa\u7c7b</p> Source code in <code>faster_app/models/base.py</code> <pre><code>class StatusModel(Model):\n    \"\"\"\u6a21\u578b\u57fa\u7c7b\"\"\"\n\n    class StatusEnum(IntEnum):\n        \"\"\"\u72b6\u6001\u679a\u4e3e\"\"\"\n\n        ACTIVE = 1\n        INACTIVE = 0\n\n    status = IntEnumField(default=1, verbose_name=\"\u72b6\u6001\", enum_type=StatusEnum)\n\n    class Meta:\n        abstract = True\n</code></pre>"},{"location":"api/models/#faster_app.models.base.StatusModel.StatusEnum","title":"<code>StatusEnum</code>","text":"<p>               Bases: <code>IntEnum</code></p> <p>\u72b6\u6001\u679a\u4e3e</p> Source code in <code>faster_app/models/base.py</code> <pre><code>class StatusEnum(IntEnum):\n    \"\"\"\u72b6\u6001\u679a\u4e3e\"\"\"\n\n    ACTIVE = 1\n    INACTIVE = 0\n</code></pre>"},{"location":"api/models/#faster_app.models.base.ScopeModel","title":"<code>ScopeModel</code>","text":"<p>               Bases: <code>Model</code></p> <p>\u4f5c\u7528\u57df\u6a21\u578b\u57fa\u7c7b, \u5b58\u50a8\u4f5c\u7528\u57df</p> Source code in <code>faster_app/models/base.py</code> <pre><code>class ScopeModel(Model):\n    \"\"\"\u4f5c\u7528\u57df\u6a21\u578b\u57fa\u7c7b, \u5b58\u50a8\u4f5c\u7528\u57df\"\"\"\n\n    class ScopeEnum(StrEnum):\n        \"\"\"\u4f5c\u7528\u57df\u679a\u4e3e\"\"\"\n\n        SYSTEM = \"system\"\n        TENANT = \"tenant\"\n        PROJECT = \"project\"\n        OBJECT = \"object\"\n\n    scope = CharEnumField(ScopeEnum, default=ScopeEnum.PROJECT, verbose_name=\"\u4f5c\u7528\u57df\")\n\n    class Meta:\n        abstract = True\n</code></pre>"},{"location":"api/models/#faster_app.models.base.ScopeModel.ScopeEnum","title":"<code>ScopeEnum</code>","text":"<p>               Bases: <code>StrEnum</code></p> <p>\u4f5c\u7528\u57df\u679a\u4e3e</p> Source code in <code>faster_app/models/base.py</code> <pre><code>class ScopeEnum(StrEnum):\n    \"\"\"\u4f5c\u7528\u57df\u679a\u4e3e\"\"\"\n\n    SYSTEM = \"system\"\n    TENANT = \"tenant\"\n    PROJECT = \"project\"\n    OBJECT = \"object\"\n</code></pre>"},{"location":"api/overview/","title":"API \u53c2\u8003\u6982\u89c8","text":"<p>\u672c\u8282\u63d0\u4f9b Faster APP \u6838\u5fc3 API \u7684\u5b8c\u6574\u53c2\u8003\u6587\u6863\u3002</p>"},{"location":"api/overview/#_1","title":"\u6a21\u5757\u6982\u89c8","text":"\u6a21\u5757 \u8bf4\u660e \u4e3b\u8981\u5185\u5bb9 <code>faster_app.app</code> \u5e94\u7528\u6838\u5fc3 <code>create_app()</code>, <code>get_app()</code> <code>faster_app.models.base</code> \u6a21\u578b\u57fa\u7c7b <code>UUIDModel</code>, <code>DateTimeModel</code>, <code>EnumModel</code>, <code>ScopeModel</code> <code>faster_app.routes</code> \u8def\u7531\u5de5\u5177 \u8def\u7531\u88c5\u9970\u5668\u3001\u54cd\u5e94\u5de5\u5177 <code>faster_app.utils</code> \u5de5\u5177\u51fd\u6570 CRUD\u3001\u54cd\u5e94\u3001\u88c5\u9970\u5668 <code>faster_app.commands.base</code> \u547d\u4ee4\u57fa\u7c7b <code>BaseCommand</code> <code>faster_app.settings</code> \u914d\u7f6e\u7ba1\u7406 <code>BaseSettings</code>, <code>get_settings()</code>"},{"location":"api/overview/#_2","title":"\u5feb\u901f\u5bfc\u822a","text":"<p>\u66f4\u591a\u8be6\u7ec6\u6587\u6863\u8bf7\u67e5\u770b\u5404\u5b50\u9875\u9762...</p>"},{"location":"api/overview/#faster_app.app","title":"<code>app</code>","text":"<p>Faster APP \u5e94\u7528\u5b9e\u4f8b\u6a21\u5757</p>"},{"location":"api/overview/#faster_app.app.create_app","title":"<code>create_app()</code>","text":"<p>\u521b\u5efa FastAPI \u5e94\u7528\u5b9e\u4f8b</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>faster_app/app.py</code> <pre><code>def create_app() -&gt; FastAPI:\n    \"\"\"\u521b\u5efa FastAPI \u5e94\u7528\u5b9e\u4f8b\"\"\"\n    app = FastAPI(\n        title=configs.PROJECT_NAME,\n        version=configs.VERSION,\n        debug=configs.DEBUG,\n        lifespan=lifespan,\n        docs_url=None,\n        redoc_url=None,\n    )\n\n    # \u6dfb\u52a0\u9759\u6001\u6587\u4ef6\u670d\u52a1\u5668\n    try:\n        app.mount(\n            \"/static\", StaticFiles(directory=f\"{BASE_DIR}/statics\"), name=\"static\"\n        )\n    except Exception as e:\n        logger.error(f\"\u9759\u6001\u6587\u4ef6\u670d\u52a1\u5668\u542f\u52a8\u5931\u8d25: {e}\")\n\n    # \u6dfb\u52a0\u4e2d\u95f4\u4ef6\n    middlewares = MiddlewareDiscover().discover()\n    for middleware in middlewares:\n        app.add_middleware(middleware[\"class\"], **middleware[\"kwargs\"])\n        logger.info(f\"Loaded middleware: {middleware['class'].__name__}\")\n\n    # \u6dfb\u52a0\u8def\u7531\n    routes = RoutesDiscover().discover()\n    for route in routes:\n        app.include_router(route)\n\n    return app\n</code></pre>"},{"location":"api/overview/#faster_app.app.get_app","title":"<code>get_app()</code>","text":"<p>\u83b7\u53d6\u5e94\u7528\u5b9e\u4f8b(\u5355\u4f8b\u6a21\u5f0f)</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>faster_app/app.py</code> <pre><code>def get_app() -&gt; FastAPI:\n    \"\"\"\u83b7\u53d6\u5e94\u7528\u5b9e\u4f8b(\u5355\u4f8b\u6a21\u5f0f)\"\"\"\n    if not hasattr(get_app, \"_app\"):\n        get_app._app = create_app()\n    return get_app._app\n</code></pre>"},{"location":"api/overview/#faster_app.models.base","title":"<code>base</code>","text":"<p>\u6a21\u578b\u57fa\u7c7b, \u4f7f\u7528 pydantic \u5e93\u7ba1\u7406\u6a21\u578b</p>"},{"location":"api/overview/#faster_app.models.base.UUIDModel","title":"<code>UUIDModel</code>","text":"<p>               Bases: <code>Model</code></p> <p>\u6a21\u578b\u57fa\u7c7b</p> Source code in <code>faster_app/models/base.py</code> <pre><code>class UUIDModel(Model):\n    \"\"\"\u6a21\u578b\u57fa\u7c7b\"\"\"\n\n    id = UUIDField(primary_key=True, verbose_name=\"ID\")\n\n    class Meta:\n        abstract = True\n</code></pre>"},{"location":"api/overview/#faster_app.models.base.DateTimeModel","title":"<code>DateTimeModel</code>","text":"<p>               Bases: <code>Model</code></p> <p>\u6a21\u578b\u57fa\u7c7b</p> Source code in <code>faster_app/models/base.py</code> <pre><code>class DateTimeModel(Model):\n    \"\"\"\u6a21\u578b\u57fa\u7c7b\"\"\"\n\n    created_at = DatetimeField(auto_now_add=True, verbose_name=\"\u521b\u5efa\u65f6\u95f4\")\n    updated_at = DatetimeField(auto_now=True, verbose_name=\"\u66f4\u65b0\u65f6\u95f4\")\n\n    class Meta:\n        abstract = True\n</code></pre>"},{"location":"api/overview/#faster_app.models.base.StatusModel","title":"<code>StatusModel</code>","text":"<p>               Bases: <code>Model</code></p> <p>\u6a21\u578b\u57fa\u7c7b</p> Source code in <code>faster_app/models/base.py</code> <pre><code>class StatusModel(Model):\n    \"\"\"\u6a21\u578b\u57fa\u7c7b\"\"\"\n\n    class StatusEnum(IntEnum):\n        \"\"\"\u72b6\u6001\u679a\u4e3e\"\"\"\n\n        ACTIVE = 1\n        INACTIVE = 0\n\n    status = IntEnumField(default=1, verbose_name=\"\u72b6\u6001\", enum_type=StatusEnum)\n\n    class Meta:\n        abstract = True\n</code></pre>"},{"location":"api/overview/#faster_app.models.base.StatusModel.StatusEnum","title":"<code>StatusEnum</code>","text":"<p>               Bases: <code>IntEnum</code></p> <p>\u72b6\u6001\u679a\u4e3e</p> Source code in <code>faster_app/models/base.py</code> <pre><code>class StatusEnum(IntEnum):\n    \"\"\"\u72b6\u6001\u679a\u4e3e\"\"\"\n\n    ACTIVE = 1\n    INACTIVE = 0\n</code></pre>"},{"location":"api/overview/#faster_app.models.base.ScopeModel","title":"<code>ScopeModel</code>","text":"<p>               Bases: <code>Model</code></p> <p>\u4f5c\u7528\u57df\u6a21\u578b\u57fa\u7c7b, \u5b58\u50a8\u4f5c\u7528\u57df</p> Source code in <code>faster_app/models/base.py</code> <pre><code>class ScopeModel(Model):\n    \"\"\"\u4f5c\u7528\u57df\u6a21\u578b\u57fa\u7c7b, \u5b58\u50a8\u4f5c\u7528\u57df\"\"\"\n\n    class ScopeEnum(StrEnum):\n        \"\"\"\u4f5c\u7528\u57df\u679a\u4e3e\"\"\"\n\n        SYSTEM = \"system\"\n        TENANT = \"tenant\"\n        PROJECT = \"project\"\n        OBJECT = \"object\"\n\n    scope = CharEnumField(ScopeEnum, default=ScopeEnum.PROJECT, verbose_name=\"\u4f5c\u7528\u57df\")\n\n    class Meta:\n        abstract = True\n</code></pre>"},{"location":"api/overview/#faster_app.models.base.ScopeModel.ScopeEnum","title":"<code>ScopeEnum</code>","text":"<p>               Bases: <code>StrEnum</code></p> <p>\u4f5c\u7528\u57df\u679a\u4e3e</p> Source code in <code>faster_app/models/base.py</code> <pre><code>class ScopeEnum(StrEnum):\n    \"\"\"\u4f5c\u7528\u57df\u679a\u4e3e\"\"\"\n\n    SYSTEM = \"system\"\n    TENANT = \"tenant\"\n    PROJECT = \"project\"\n    OBJECT = \"object\"\n</code></pre>"},{"location":"api/overview/#faster_app.utils","title":"<code>utils</code>","text":"<p>Utility functions and decorators</p>"},{"location":"api/routes/","title":"\u8def\u7531 API","text":"<p>options: show_root_heading: true heading_level: 2</p>"},{"location":"api/routes/#faster_app.routes","title":"<code>routes</code>","text":"<p>\u8def\u7531\u7ba1\u7406\u6a21\u5757</p> <p>\u63d0\u4f9b\u4e86 FastAPI \u8def\u7531\u7684\u7edf\u4e00\u8fd4\u56de\u683c\u5f0f\u548c\u81ea\u52a8\u53d1\u73b0\u529f\u80fd</p>"},{"location":"api/routes/#faster_app.routes.ApiResponse","title":"<code>ApiResponse</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>\u7edf\u4e00\u8fd4\u56de\u683c\u5f0f</p> Source code in <code>faster_app/routes/base.py</code> <pre><code>class ApiResponse(BaseModel):\n    \"\"\"\u7edf\u4e00\u8fd4\u56de\u683c\u5f0f\"\"\"\n\n    message: str\n    data: dict\n</code></pre>"},{"location":"api/routes/#faster_app.routes.RoutesDiscover","title":"<code>RoutesDiscover</code>","text":"<p>               Bases: <code>BaseDiscover</code></p> Source code in <code>faster_app/routes/discover.py</code> <pre><code>class RoutesDiscover(BaseDiscover):\n    INSTANCE_TYPE = APIRouter\n    TARGETS = [\n        {\n            \"directory\": \"apps\",\n            \"filename\": \"routes.py\",\n            \"skip_dirs\": [\"__pycache__\"],\n            \"skip_files\": [],\n        },\n        {\n            \"directory\": f\"{BASE_DIR}/routes/builtins\",\n            \"filename\": None,\n            \"skip_dirs\": [\"__pycache__\"],\n            \"skip_files\": [],\n        },\n        # \u9ed8\u8ba4\u4e0d\u52a0\u8f7d\u5185\u7f6e\u8def\u7531\u6837\u4f8b, \u5f00\u53d1\u73af\u5883\u53cd\u6ce8\u91ca\u4ee3\u7801\u8fdb\u884c\u8c03\u8bd5\n        # {\n        #     \"directory\": f\"{BASE_DIR}/apps\",\n        #     \"filename\": None,\n        #     \"skip_dirs\": [\"__pycache__\"],\n        #     \"skip_files\": [],\n        # },\n    ]\n\n    def import_and_extract_instances(\n        self, file_path: str, module_name: str\n    ) -&gt; list[APIRouter]:\n        \"\"\"\n        \u5bfc\u5165\u6a21\u5757\u5e76\u63d0\u53d6\u8def\u7531\u5b9e\u4f8b\n        \u5bf9\u4e8e\u8def\u7531, \u6211\u4eec\u67e5\u627e\u5df2\u7ecf\u5b9e\u4f8b\u5316\u7684 APIRouter \u5bf9\u8c61\n        \"\"\"\n        instances = []\n\n        try:\n            # \u52a8\u6001\u5bfc\u5165\u6a21\u5757\n            import importlib.util\n            import inspect\n\n            spec = importlib.util.spec_from_file_location(module_name, file_path)\n            if spec is None or spec.loader is None:\n                return instances\n\n            module = importlib.util.module_from_spec(spec)\n            spec.loader.exec_module(module)\n\n            # \u67e5\u627e\u6a21\u5757\u4e2d\u6240\u6709\u7684 APIRouter \u5b9e\u4f8b\n            for _, obj in inspect.getmembers(module):\n                if isinstance(obj, self.INSTANCE_TYPE):\n                    instances.append(obj)\n\n        except Exception as e:\n            # \u9759\u9ed8\u8df3\u8fc7\u5bfc\u5165\u5931\u8d25\u7684\u6a21\u5757, \u907f\u514d\u963b\u65ad\u6574\u4e2a\u53d1\u73b0\u8fc7\u7a0b\n            print(f\"Warning: Failed to import routes from {module_name}: {e}\")\n\n        return instances\n</code></pre>"},{"location":"api/routes/#faster_app.routes.RoutesDiscover.discover","title":"<code>discover()</code>","text":"<p>\u81ea\u52a8\u626b\u63cf TARGETS \u4e2d\u7684\u76ee\u5f55\u548c\u6587\u4ef6, \u5bfc\u51fa\u6240\u6709\u7684\u5b9e\u4f8b</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>faster_app/utils/discover.py</code> <pre><code>def discover(self) -&gt; List[type]:\n    \"\"\"\n    \u81ea\u52a8\u626b\u63cf TARGETS \u4e2d\u7684\u76ee\u5f55\u548c\u6587\u4ef6,\n    \u5bfc\u51fa\u6240\u6709\u7684\u5b9e\u4f8b\n    \"\"\"\n    instances = []\n\n    # \u626b\u63cf TARGETS \u4e2d\u7684\u76ee\u5f55\u548c\u6587\u4ef6\n    for target in self.TARGETS:\n        instances.extend(\n            self.scan(\n                directory=target.get(\"directory\"),\n                filename=target.get(\"filename\"),\n                skip_files=target.get(\"skip_files\"),\n                skip_dirs=target.get(\"skip_dirs\"),\n            )\n        )\n    return instances\n</code></pre>"},{"location":"api/routes/#faster_app.routes.RoutesDiscover.walk","title":"<code>walk(directory, filename=None, skip_files=[], skip_dirs=[])</code>","text":"<p>\u904d\u5386\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>faster_app/utils/discover.py</code> <pre><code>def walk(\n    self,\n    directory: str,\n    filename: str = None,\n    skip_files: List[str] = [],\n    skip_dirs: List[str] = [],\n) -&gt; List[str]:\n    \"\"\"\n    \u904d\u5386\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\n    \"\"\"\n    results = []\n    if not os.path.exists(directory) or not os.path.isdir(directory):\n        return results\n\n    for root, dirs, files in os.walk(directory):\n        # \u8fc7\u6ee4\u6389\u9700\u8981\u8df3\u8fc7\u7684\u76ee\u5f55, \u76f4\u63a5\u4fee\u6539 dirs \u5217\u8868\u6765\u5f71\u54cd os.walk \u7684\u904d\u5386\n        dirs[:] = [d for d in dirs if d not in skip_dirs]\n\n        for file in files:\n            if filename is None or file == filename:\n                if file in skip_files:\n                    continue\n                # \u53ea\u5904\u7406 .py \u6587\u4ef6\n                if file.endswith(\".py\"):\n                    results.append(os.path.join(root, file))\n    return results\n</code></pre>"},{"location":"api/routes/#faster_app.routes.RoutesDiscover.scan","title":"<code>scan(directory, filename=None, skip_files=[], skip_dirs=[])</code>","text":"<p>\u901a\u7528\u626b\u63cf\u65b9\u6cd5</p> <p>\u53c2\u6570\uff1a</p> \u540d\u79f0 \u7c7b\u578b \u63cf\u8ff0 \u9ed8\u8ba4 <code>directory</code> <code>str</code> <p>\u8981\u626b\u63cf\u7684\u76ee\u5f55\u8def\u5f84</p> \u5fc5\u9700 <code>filename</code> <code>str</code> <p>\u8981\u626b\u63cf\u7684\u5177\u4f53\u6587\u4ef6\u540d, \u5982\u679c\u4e3a None \u5219\u626b\u63cf\u76ee\u5f55\u4e0b\u6240\u6709 .py \u6587\u4ef6</p> <code>None</code> <code>skip_files</code> <code>List[str]</code> <p>\u8981\u8df3\u8fc7\u7684\u6587\u4ef6\u5217\u8868</p> <code>[]</code> <code>skip_dirs</code> <code>List[str]</code> <p>\u8981\u8df3\u8fc7\u7684\u76ee\u5f55\u5217\u8868</p> <code>[]</code> <p>Returns:     \u626b\u63cf\u5230\u7684\u6240\u6709\u5b9e\u4f8b\u5217\u8868</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>faster_app/utils/discover.py</code> <pre><code>def scan(\n    self,\n    directory: str,\n    filename: str = None,\n    skip_files: List[str] = [],\n    skip_dirs: List[str] = [],\n) -&gt; List[type]:\n    \"\"\"\n    \u901a\u7528\u626b\u63cf\u65b9\u6cd5\n\n    Args:\n        directory: \u8981\u626b\u63cf\u7684\u76ee\u5f55\u8def\u5f84\n        filename: \u8981\u626b\u63cf\u7684\u5177\u4f53\u6587\u4ef6\u540d, \u5982\u679c\u4e3a None \u5219\u626b\u63cf\u76ee\u5f55\u4e0b\u6240\u6709 .py \u6587\u4ef6\n        skip_files: \u8981\u8df3\u8fc7\u7684\u6587\u4ef6\u5217\u8868\n        skip_dirs: \u8981\u8df3\u8fc7\u7684\u76ee\u5f55\u5217\u8868\n    Returns:\n        \u626b\u63cf\u5230\u7684\u6240\u6709\u5b9e\u4f8b\u5217\u8868\n    \"\"\"\n    instances = []\n\n    files = self.walk(directory, filename, skip_files, skip_dirs)\n\n    for file in files:\n        instances.extend(\n            self.import_and_extract_instances(file, file.split(\"/\")[-1][:-3])\n        )\n\n    return instances\n</code></pre>"},{"location":"api/routes/#faster_app.routes.RoutesDiscover.import_and_extract_instances","title":"<code>import_and_extract_instances(file_path, module_name)</code>","text":"<p>\u5bfc\u5165\u6a21\u5757\u5e76\u63d0\u53d6\u8def\u7531\u5b9e\u4f8b \u5bf9\u4e8e\u8def\u7531, \u6211\u4eec\u67e5\u627e\u5df2\u7ecf\u5b9e\u4f8b\u5316\u7684 APIRouter \u5bf9\u8c61</p> \u6e90\u4ee3\u7801\u4f4d\u4e8e\uff1a <code>faster_app/routes/discover.py</code> <pre><code>def import_and_extract_instances(\n    self, file_path: str, module_name: str\n) -&gt; list[APIRouter]:\n    \"\"\"\n    \u5bfc\u5165\u6a21\u5757\u5e76\u63d0\u53d6\u8def\u7531\u5b9e\u4f8b\n    \u5bf9\u4e8e\u8def\u7531, \u6211\u4eec\u67e5\u627e\u5df2\u7ecf\u5b9e\u4f8b\u5316\u7684 APIRouter \u5bf9\u8c61\n    \"\"\"\n    instances = []\n\n    try:\n        # \u52a8\u6001\u5bfc\u5165\u6a21\u5757\n        import importlib.util\n        import inspect\n\n        spec = importlib.util.spec_from_file_location(module_name, file_path)\n        if spec is None or spec.loader is None:\n            return instances\n\n        module = importlib.util.module_from_spec(spec)\n        spec.loader.exec_module(module)\n\n        # \u67e5\u627e\u6a21\u5757\u4e2d\u6240\u6709\u7684 APIRouter \u5b9e\u4f8b\n        for _, obj in inspect.getmembers(module):\n            if isinstance(obj, self.INSTANCE_TYPE):\n                instances.append(obj)\n\n    except Exception as e:\n        # \u9759\u9ed8\u8df3\u8fc7\u5bfc\u5165\u5931\u8d25\u7684\u6a21\u5757, \u907f\u514d\u963b\u65ad\u6574\u4e2a\u53d1\u73b0\u8fc7\u7a0b\n        print(f\"Warning: Failed to import routes from {module_name}: {e}\")\n\n    return instances\n</code></pre>"},{"location":"api/utils/","title":"\u5de5\u5177\u51fd\u6570 API","text":"<p>options: show_root_heading: true heading_level: 2 members: - crud - response - decorators</p>"},{"location":"api/utils/#faster_app.utils","title":"<code>utils</code>","text":"<p>Utility functions and decorators</p>"},{"location":"best-practices/api-design/","title":"API \u8bbe\u8ba1\u6700\u4f73\u5b9e\u8df5","text":"<p>\u672c\u9875\u9762\u4ecb\u7ecd RESTful API \u8bbe\u8ba1\u7684\u6700\u4f73\u5b9e\u8df5\u3002</p>"},{"location":"best-practices/api-design/#restful","title":"RESTful \u89c4\u8303","text":""},{"location":"best-practices/api-design/#_1","title":"\u8d44\u6e90\u547d\u540d","text":"<pre><code># \u2705 \u63a8\u8350\uff1a\u4f7f\u7528\u540d\u8bcd\u590d\u6570\nrouter = APIRouter(prefix=\"/users\", tags=[\"\u7528\u6237\"])\nrouter = APIRouter(prefix=\"/articles\", tags=[\"\u6587\u7ae0\"])\n\n# \u274c \u4e0d\u63a8\u8350\uff1a\u4f7f\u7528\u52a8\u8bcd\nrouter = APIRouter(prefix=\"/get_users\")\nrouter = APIRouter(prefix=\"/create_article\")\n</code></pre>"},{"location":"best-practices/api-design/#http","title":"HTTP \u65b9\u6cd5","text":"\u65b9\u6cd5 \u7528\u9014 \u793a\u4f8b GET \u83b7\u53d6\u8d44\u6e90 <code>GET /users</code> POST \u521b\u5efa\u8d44\u6e90 <code>POST /users</code> PUT \u5b8c\u6574\u66f4\u65b0 <code>PUT /users/{id}</code> PATCH \u90e8\u5206\u66f4\u65b0 <code>PATCH /users/{id}</code> DELETE \u5220\u9664\u8d44\u6e90 <code>DELETE /users/{id}</code>"},{"location":"best-practices/api-design/#_2","title":"\u72b6\u6001\u7801\u4f7f\u7528","text":"<pre><code>@router.post(\"\", status_code=201)  # \u521b\u5efa\u6210\u529f\nasync def create_user(data: UserCreate):\n    pass\n\n@router.delete(\"/{id}\", status_code=204)  # \u5220\u9664\u6210\u529f\uff08\u65e0\u5185\u5bb9\uff09\nasync def delete_user(id: str):\n    pass\n</code></pre> <p>\u66f4\u591a\u8be6\u7ec6\u5185\u5bb9...</p>"},{"location":"best-practices/database/","title":"\u6570\u636e\u5e93\u8bbe\u8ba1\u6700\u4f73\u5b9e\u8df5","text":"<p>\u672c\u9875\u9762\u4ecb\u7ecd\u6570\u636e\u5e93\u8bbe\u8ba1\u7684\u6700\u4f73\u5b9e\u8df5\u3002</p>"},{"location":"best-practices/database/#_2","title":"\u6a21\u578b\u8bbe\u8ba1","text":""},{"location":"best-practices/database/#_3","title":"\u4f7f\u7528\u5408\u9002\u7684\u57fa\u7c7b","text":"<pre><code># \u2705 \u63a8\u8350\uff1a\u5927\u591a\u6570\u4e1a\u52a1\u8868\nclass User(UUIDModel, DateTimeModel):\n    pass\n\n# \u2705 \u63a8\u8350\uff1a\u591a\u79df\u6237\u5e94\u7528\nclass Order(UUIDModel, DateTimeModel, ScopeModel):\n    pass\n</code></pre>"},{"location":"best-practices/database/#_4","title":"\u6dfb\u52a0\u7d22\u5f15","text":"<pre><code>class User(UUIDModel):\n    username = fields.CharField(max_length=50)\n    email = fields.CharField(max_length=100)\n\n    class Meta:\n        table = \"users\"\n        indexes = [\n            (\"username\",),\n            (\"email\",),\n            (\"username\", \"email\"),  # \u590d\u5408\u7d22\u5f15\n        ]\n</code></pre>"},{"location":"best-practices/database/#_5","title":"\u8fc1\u79fb\u7ba1\u7406","text":""},{"location":"best-practices/database/#_6","title":"\u547d\u540d\u89c4\u8303","text":"<pre><code># \u2705 \u63a8\u8350\uff1a\u63cf\u8ff0\u6027\u540d\u79f0\nfaster db migrate --name=\"add_user_email_index\"\nfaster db migrate --name=\"create_order_table\"\n\n# \u274c \u4e0d\u63a8\u8350\uff1a\u65e0\u610f\u4e49\u540d\u79f0\nfaster db migrate --name=\"update1\"\nfaster db migrate --name=\"fix\"\n</code></pre> <p>\u66f4\u591a\u8be6\u7ec6\u5185\u5bb9...</p>"},{"location":"best-practices/deployment/","title":"\u90e8\u7f72\u6307\u5357","text":"<p>\u672c\u9875\u9762\u4ecb\u7ecd\u5982\u4f55\u5c06 Faster APP \u5e94\u7528\u90e8\u7f72\u5230\u751f\u4ea7\u73af\u5883\u3002</p>"},{"location":"best-practices/deployment/#_2","title":"\u90e8\u7f72\u65b9\u5f0f","text":""},{"location":"best-practices/deployment/#docker","title":"Docker \u90e8\u7f72","text":"<pre><code># \u521b\u5efa Dockerfile\nfaster app docker\n\n# \u6784\u5efa\u955c\u50cf\ndocker build -t my-app:latest .\n\n# \u8fd0\u884c\u5bb9\u5668\ndocker run -d \\\n  -p 8000:8000 \\\n  --env-file .env.production \\\n  my-app:latest\n</code></pre>"},{"location":"best-practices/deployment/#uv","title":"\u4f7f\u7528 uv \u90e8\u7f72","text":"<pre><code># \u5b89\u88c5\u751f\u4ea7\u4f9d\u8d56\nuv sync --no-dev\n\n# \u542f\u52a8\u5e94\u7528\nuv run faster server start\n</code></pre>"},{"location":"best-practices/deployment/#_3","title":"\u751f\u4ea7\u73af\u5883\u914d\u7f6e","text":"<pre><code># .env.production\nDEBUG=False\nHOST=0.0.0.0\nPORT=8000\nDATABASE_URL=postgresql://user:pass@db:5432/myapp\n</code></pre> <p>\u66f4\u591a\u8be6\u7ec6\u5185\u5bb9...</p>"},{"location":"best-practices/organization/","title":"\u9879\u76ee\u7ec4\u7ec7\u6700\u4f73\u5b9e\u8df5","text":"<p>\u672c\u9875\u9762\u4ecb\u7ecd\u5982\u4f55\u5408\u7406\u7ec4\u7ec7 Faster APP \u9879\u76ee\u7ed3\u6784\u3002</p>"},{"location":"best-practices/organization/#_2","title":"\u6a21\u5757\u5212\u5206\u539f\u5219","text":""},{"location":"best-practices/organization/#_3","title":"\u6309\u4e1a\u52a1\u529f\u80fd\u5212\u5206","text":"<pre><code>apps/\n\u251c\u2500\u2500 auth/          # \u8ba4\u8bc1\u6388\u6743\n\u251c\u2500\u2500 users/         # \u7528\u6237\u7ba1\u7406\n\u251c\u2500\u2500 posts/         # \u6587\u7ae0\u7ba1\u7406\n\u251c\u2500\u2500 comments/      # \u8bc4\u8bba\u7ba1\u7406\n\u2514\u2500\u2500 notifications/ # \u901a\u77e5\u7cfb\u7edf\n</code></pre>"},{"location":"best-practices/organization/#_4","title":"\u6309\u6280\u672f\u5c42\u6b21\u5212\u5206\uff08\u4e0d\u63a8\u8350\uff09","text":"<pre><code># \u274c \u4e0d\u63a8\u8350\u8fd9\u79cd\u7ed3\u6784\napps/\n\u251c\u2500\u2500 models/\n\u251c\u2500\u2500 views/\n\u2514\u2500\u2500 services/\n</code></pre>"},{"location":"best-practices/organization/#_5","title":"\u6a21\u5757\u5927\u5c0f\u63a7\u5236","text":"<ul> <li>\u5c0f\u578b\u9879\u76ee\uff08&lt; 10 \u4e2a\u6a21\u578b\uff09\uff1a3-5 \u4e2a\u6a21\u5757</li> <li>\u4e2d\u578b\u9879\u76ee\uff0810-50 \u4e2a\u6a21\u578b\uff09\uff1a8-15 \u4e2a\u6a21\u5757</li> <li>\u5927\u578b\u9879\u76ee\uff08&gt; 50 \u4e2a\u6a21\u578b\uff09\uff1a\u6309\u4e1a\u52a1\u57df\u5212\u5206</li> </ul> <p>\u66f4\u591a\u8be6\u7ec6\u5185\u5bb9...</p>"},{"location":"cli/app/","title":"App \u547d\u4ee4\u53c2\u8003","text":"<p><code>faster app</code> \u547d\u4ee4\u7ec4\u7528\u4e8e\u5feb\u901f\u521b\u5efa\u9879\u76ee\u7ed3\u6784\u548c\u914d\u7f6e\u6587\u4ef6\u3002</p>"},{"location":"cli/app/#_1","title":"\u547d\u4ee4\u5217\u8868","text":"\u547d\u4ee4 \u8bf4\u660e \u4f7f\u7528\u9891\u7387 <code>demo</code> \u521b\u5efa\u793a\u4f8b\u5e94\u7528 \u2b50\u2b50\u2b50\u2b50\u2b50 <code>config</code> \u521b\u5efa\u914d\u7f6e\u76ee\u5f55 \u2b50\u2b50\u2b50\u2b50 <code>env</code> \u521b\u5efa\u73af\u5883\u53d8\u91cf\u6587\u4ef6 \u2b50\u2b50\u2b50\u2b50\u2b50 <code>main</code> \u521b\u5efa\u4e3b\u5165\u53e3\u6587\u4ef6 \u2b50\u2b50\u2b50 <code>middleware</code> \u521b\u5efa\u4e2d\u95f4\u4ef6\u76ee\u5f55 \u2b50\u2b50\u2b50 <code>docker</code> \u521b\u5efa Docker \u914d\u7f6e \u2b50\u2b50\u2b50"},{"location":"cli/app/#faster-app-demo","title":"faster app demo","text":"<p>\u521b\u5efa\u793a\u4f8b\u5e94\u7528\u6a21\u5757\uff0c\u5305\u542b\u5b8c\u6574\u7684 CRUD \u793a\u4f8b\u3002</p> <p>\u8bed\u6cd5\uff1a</p> <pre><code>faster app demo\n</code></pre> <p>\u751f\u6210\u6587\u4ef6\uff1a</p> <pre><code>apps/demo/\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 models.py      # \u6570\u636e\u6a21\u578b\u793a\u4f8b\n\u251c\u2500\u2500 routes.py      # API \u8def\u7531\u793a\u4f8b\n\u251c\u2500\u2500 schemas.py     # Pydantic \u6a21\u578b\u793a\u4f8b\n\u251c\u2500\u2500 commands.py    # \u547d\u4ee4\u884c\u5de5\u5177\u793a\u4f8b\n\u2514\u2500\u2500 tasks.py       # \u5f02\u6b65\u4efb\u52a1\u793a\u4f8b\n</code></pre> <p>\u4f7f\u7528\u573a\u666f\uff1a</p> <ul> <li>\u9879\u76ee\u521d\u59cb\u5316\u65f6\u5feb\u901f\u642d\u5efa\u9aa8\u67b6</li> <li>\u5b66\u4e60 Faster APP \u7684\u6807\u51c6\u7ed3\u6784</li> <li>\u4f5c\u4e3a\u65b0\u6a21\u5757\u7684\u6a21\u677f</li> </ul>"},{"location":"cli/app/#faster-app-config","title":"faster app config","text":"<p>\u521b\u5efa\u81ea\u5b9a\u4e49\u914d\u7f6e\u76ee\u5f55\u3002</p> <p>\u8bed\u6cd5\uff1a</p> <pre><code>faster app config\n</code></pre> <p>\u751f\u6210\u6587\u4ef6\uff1a</p> <pre><code>config/\n\u251c\u2500\u2500 __init__.py\n\u2514\u2500\u2500 settings.py    # \u914d\u7f6e\u6a21\u677f\n</code></pre> <p>\u4f7f\u7528\u573a\u666f\uff1a</p> <ul> <li>\u9700\u8981\u81ea\u5b9a\u4e49\u5e94\u7528\u914d\u7f6e</li> <li>\u6dfb\u52a0\u7b2c\u4e09\u65b9\u670d\u52a1\u914d\u7f6e</li> <li>\u8986\u76d6\u9ed8\u8ba4\u914d\u7f6e</li> </ul>"},{"location":"cli/app/#faster-app-env","title":"faster app env","text":"<p>\u521b\u5efa\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u6587\u4ef6\u3002</p> <p>\u8bed\u6cd5\uff1a</p> <pre><code>faster app env\n</code></pre> <p>\u751f\u6210\u6587\u4ef6\uff1a</p> <pre><code>.env\n</code></pre> <p>\u6587\u4ef6\u5185\u5bb9\uff1a</p> <pre><code># \u5e94\u7528\u914d\u7f6e\nDEBUG=True\nHOST=0.0.0.0\nPORT=8000\n\n# \u6570\u636e\u5e93\u914d\u7f6e\nDATABASE_URL=sqlite://./faster_app.db\n\n# \u65e5\u5fd7\u914d\u7f6e\nLOG_LEVEL=INFO\n</code></pre> <p>\u4f7f\u7528\u573a\u666f\uff1a</p> <ul> <li>\u9879\u76ee\u521d\u59cb\u5316</li> <li>\u914d\u7f6e\u6570\u636e\u5e93\u8fde\u63a5</li> <li>\u8bbe\u7f6e\u73af\u5883\u7279\u5b9a\u7684\u53c2\u6570</li> </ul> <p>\u66f4\u591a\u8be6\u7ec6\u5185\u5bb9...</p>"},{"location":"cli/custom/","title":"\u81ea\u5b9a\u4e49\u547d\u4ee4","text":"<p>\u672c\u9875\u9762\u4ecb\u7ecd\u5982\u4f55\u521b\u5efa\u548c\u4f7f\u7528\u81ea\u5b9a\u4e49\u547d\u4ee4\u3002</p>"},{"location":"cli/custom/#_2","title":"\u521b\u5efa\u81ea\u5b9a\u4e49\u547d\u4ee4","text":"<pre><code># apps/users/commands.py\nfrom faster_app.commands.base import BaseCommand\nfrom .models import User\n\nclass UserCommand(BaseCommand):\n    \"\"\"\u7528\u6237\u7ba1\u7406\u547d\u4ee4\"\"\"\n\n    async def create_admin(self, username: str, email: str):\n        \"\"\"\u521b\u5efa\u7ba1\u7406\u5458\u8d26\u53f7\"\"\"\n        user = await User.create(\n            username=username,\n            email=email,\n            is_staff=True\n        )\n        print(f\"\u2705 \u7ba1\u7406\u5458 {username} \u521b\u5efa\u6210\u529f\")\n\n    async def count(self):\n        \"\"\"\u7edf\u8ba1\u7528\u6237\u6570\u91cf\"\"\"\n        count = await User.all().count()\n        print(f\"\u603b\u7528\u6237\u6570: {count}\")\n</code></pre>"},{"location":"cli/custom/#_3","title":"\u4f7f\u7528\u81ea\u5b9a\u4e49\u547d\u4ee4","text":"<pre><code>faster user create_admin --username=admin --email=admin@example.com\nfaster user count\n</code></pre>"},{"location":"cli/custom/#_4","title":"\u547d\u540d\u89c4\u5219","text":"<p>\u7c7b\u540d\u81ea\u52a8\u8f6c\u6362\u4e3a\u547d\u4ee4\u7ec4\u540d\uff1a</p> \u7c7b\u540d \u547d\u4ee4\u7ec4 <code>UserCommand</code> <code>user</code> <code>ArticleCommand</code> <code>article</code> <code>UserProfileCommand</code> <code>user_profile</code> <p>\u66f4\u591a\u8be6\u7ec6\u5185\u5bb9...</p>"},{"location":"cli/db/","title":"DB \u547d\u4ee4\u53c2\u8003","text":"<p><code>faster db</code> \u547d\u4ee4\u7ec4\u7528\u4e8e\u6570\u636e\u5e93\u7ba1\u7406\uff0c\u57fa\u4e8e Aerich \u5b9e\u73b0\u3002</p>"},{"location":"cli/db/#_1","title":"\u547d\u4ee4\u5217\u8868","text":"\u547d\u4ee4 \u8bf4\u660e \u4f7f\u7528\u9891\u7387 <code>init</code> \u521d\u59cb\u5316\u8fc1\u79fb\u914d\u7f6e \u2b50\u2b50\u2b50\u2b50\u2b50 <code>init_db</code> \u521d\u59cb\u5316\u6570\u636e\u5e93 \u2b50\u2b50\u2b50\u2b50\u2b50 <code>migrate</code> \u751f\u6210\u8fc1\u79fb\u6587\u4ef6 \u2b50\u2b50\u2b50\u2b50\u2b50 <code>upgrade</code> \u6267\u884c\u8fc1\u79fb \u2b50\u2b50\u2b50\u2b50\u2b50 <code>downgrade</code> \u56de\u6eda\u8fc1\u79fb \u2b50\u2b50\u2b50 <code>history</code> \u67e5\u770b\u5386\u53f2 \u2b50\u2b50\u2b50 <code>heads</code> \u67e5\u770b\u5f85\u5e94\u7528\u8fc1\u79fb \u2b50\u2b50\u2b50 <code>dev_clean</code> \u6e05\u7406\u5f00\u53d1\u6570\u636e \u2b50\u2b50"},{"location":"cli/db/#faster-db-init","title":"faster db init","text":"<p>\u521d\u59cb\u5316\u6570\u636e\u5e93\u8fc1\u79fb\u914d\u7f6e\u3002</p> <p>\u8bed\u6cd5\uff1a</p> <pre><code>faster db init\n</code></pre> <p>\u529f\u80fd\u8bf4\u660e\uff1a</p> <ul> <li>\u521b\u5efa <code>migrations/</code> \u76ee\u5f55</li> <li>\u521d\u59cb\u5316 Aerich \u914d\u7f6e</li> <li>\u51c6\u5907\u6570\u636e\u5e93\u8fc1\u79fb\u73af\u5883</li> </ul> <p>\u4f7f\u7528\u573a\u666f\uff1a</p> <ul> <li>\u9879\u76ee\u9996\u6b21\u8bbe\u7f6e</li> <li>\u91cd\u7f6e\u8fc1\u79fb\u7cfb\u7edf\uff08\u914d\u5408 <code>dev_clean</code>\uff09</li> </ul>"},{"location":"cli/db/#faster-db-migrate","title":"faster db migrate","text":"<p>\u751f\u6210\u6570\u636e\u5e93\u8fc1\u79fb\u6587\u4ef6\u3002</p> <p>\u8bed\u6cd5\uff1a</p> <pre><code># \u81ea\u52a8\u751f\u6210\nfaster db migrate\n\n# \u6307\u5b9a\u540d\u79f0\nfaster db migrate --name=\"add_user_table\"\n\n# \u751f\u6210\u7a7a\u8fc1\u79fb\nfaster db migrate --empty\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e\uff1a</p> <ul> <li><code>--name</code>: \u8fc1\u79fb\u6587\u4ef6\u540d\u79f0\uff08\u53ef\u9009\uff09</li> <li><code>--empty</code>: \u751f\u6210\u7a7a\u8fc1\u79fb\u6587\u4ef6</li> </ul> <p>\u66f4\u591a\u8be6\u7ec6\u5185\u5bb9...</p>"},{"location":"cli/server/","title":"Server \u547d\u4ee4\u53c2\u8003","text":"<p><code>faster server</code> \u547d\u4ee4\u7ec4\u7528\u4e8e\u7ba1\u7406\u5f00\u53d1\u670d\u52a1\u5668\u3002</p>"},{"location":"cli/server/#faster-server-start","title":"faster server start","text":"<p>\u542f\u52a8\u5f00\u53d1\u670d\u52a1\u5668\u3002</p> <p>\u8bed\u6cd5\uff1a</p> <pre><code>faster server start\n</code></pre> <p>\u914d\u7f6e\u53c2\u6570\uff08\u901a\u8fc7 <code>.env</code> \u8bbe\u7f6e\uff09\uff1a</p> <pre><code>HOST=0.0.0.0      # \u76d1\u542c\u5730\u5740\nPORT=8000         # \u76d1\u542c\u7aef\u53e3\nDEBUG=True        # \u8c03\u8bd5\u6a21\u5f0f\nRELOAD=True       # \u70ed\u91cd\u8f7d\n</code></pre> <p>\u542f\u52a8\u68c0\u6d4b\u903b\u8f91\uff1a</p> <ol> <li>\u68c0\u67e5\u9879\u76ee\u6839\u76ee\u5f55\u662f\u5426\u5b58\u5728 <code>main.py</code></li> <li>\u5982\u679c\u5b58\u5728\uff0c\u4f18\u5148\u4f7f\u7528\u7528\u6237\u81ea\u5b9a\u4e49\u914d\u7f6e</li> <li>\u5426\u5219\u4f7f\u7528\u6846\u67b6\u5185\u7f6e\u914d\u7f6e</li> </ol> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>INFO:     Uvicorn running on http://0.0.0.0:8000\nINFO:     Started reloader process [12345]\nINFO:     Application startup complete.\n</code></pre> <p>\u4f7f\u7528\u573a\u666f\uff1a</p> <ul> <li>\u672c\u5730\u5f00\u53d1</li> <li>\u8c03\u8bd5 API</li> <li>\u67e5\u770b Swagger \u6587\u6863</li> </ul> <p>\u66f4\u591a\u8be6\u7ec6\u5185\u5bb9...</p>"},{"location":"contributing/code-style/","title":"\u4ee3\u7801\u89c4\u8303","text":"<p>\u672c\u9875\u9762\u4ecb\u7ecd Faster APP \u7684\u4ee3\u7801\u89c4\u8303\u3002</p>"},{"location":"contributing/code-style/#_2","title":"\u4ee3\u7801\u98ce\u683c","text":"<p>\u4f7f\u7528 Ruff \u8fdb\u884c\u4ee3\u7801\u68c0\u67e5\u548c\u683c\u5f0f\u5316\uff1a</p> <pre><code># \u68c0\u67e5\u4ee3\u7801\nruff check .\n\n# \u81ea\u52a8\u4fee\u590d\nruff check --fix .\n\n# \u683c\u5f0f\u5316\u4ee3\u7801\nruff format .\n</code></pre>"},{"location":"contributing/code-style/#_3","title":"\u547d\u540d\u89c4\u8303","text":"<ul> <li>\u6a21\u5757\u540d\uff1a\u5c0f\u5199\uff0c\u4f7f\u7528\u4e0b\u5212\u7ebf\uff08<code>user_profile.py</code>\uff09</li> <li>\u7c7b\u540d\uff1a\u5e15\u65af\u5361\u547d\u540d\uff08<code>UserProfile</code>\uff09</li> <li>\u51fd\u6570\u540d\uff1a\u5c0f\u5199\uff0c\u4f7f\u7528\u4e0b\u5212\u7ebf\uff08<code>get_user_profile</code>\uff09</li> <li>\u5e38\u91cf\uff1a\u5927\u5199\uff0c\u4f7f\u7528\u4e0b\u5212\u7ebf\uff08<code>MAX_UPLOAD_SIZE</code>\uff09</li> </ul>"},{"location":"contributing/code-style/#_4","title":"\u6ce8\u91ca\u89c4\u8303","text":"<p>\u4f7f\u7528 Google \u98ce\u683c\u7684 docstring\uff1a</p> <pre><code>def get_user(user_id: str) -&gt; User:\n    \"\"\"\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u3002\n\n    Args:\n        user_id: \u7528\u6237 ID\n\n    Returns:\n        User: \u7528\u6237\u5bf9\u8c61\n\n    Raises:\n        HTTPException: \u7528\u6237\u4e0d\u5b58\u5728\u65f6\u629b\u51fa\n    \"\"\"\n    pass\n</code></pre> <p>\u66f4\u591a\u8be6\u7ec6\u5185\u5bb9...</p>"},{"location":"contributing/development/","title":"\u5f00\u53d1\u73af\u5883","text":"<p>\u672c\u9875\u9762\u4ecb\u7ecd\u5982\u4f55\u8bbe\u7f6e Faster APP \u7684\u5f00\u53d1\u73af\u5883\u3002</p>"},{"location":"contributing/development/#_2","title":"\u514b\u9686\u4ed3\u5e93","text":"<pre><code>git clone https://github.com/mautops/faster-app.git\ncd faster-app\n</code></pre>"},{"location":"contributing/development/#_3","title":"\u5b89\u88c5\u4f9d\u8d56","text":"<pre><code># \u4f7f\u7528 uv\nuv sync\n\n# \u5b89\u88c5\u5f00\u53d1\u4f9d\u8d56\nuv sync --dev\n</code></pre>"},{"location":"contributing/development/#_4","title":"\u8fd0\u884c\u6d4b\u8bd5","text":"<pre><code># \u8fd0\u884c\u6240\u6709\u6d4b\u8bd5\npytest\n\n# \u8fd0\u884c\u7279\u5b9a\u6d4b\u8bd5\npytest tests/test_models.py\n\n# \u67e5\u770b\u8986\u76d6\u7387\npytest --cov=faster_app\n</code></pre> <p>\u66f4\u591a\u8be6\u7ec6\u5185\u5bb9...</p>"},{"location":"contributing/how-to-contribute/","title":"\u5982\u4f55\u8d21\u732e","text":"<p>\u611f\u8c22\u4f60\u8003\u8651\u4e3a Faster APP \u505a\u51fa\u8d21\u732e\uff01</p>"},{"location":"contributing/how-to-contribute/#_2","title":"\u8d21\u732e\u65b9\u5f0f","text":""},{"location":"contributing/how-to-contribute/#bug","title":"\u62a5\u544a Bug","text":"<p>\u5728 GitHub Issues \u63d0\u4ea4 Bug \u62a5\u544a\u3002</p> <p>\u8bf7\u5305\u542b\uff1a</p> <ul> <li>\u64cd\u4f5c\u7cfb\u7edf\u548c Python \u7248\u672c</li> <li>Faster APP \u7248\u672c</li> <li>\u91cd\u73b0\u6b65\u9aa4</li> <li>\u671f\u671b\u884c\u4e3a\u548c\u5b9e\u9645\u884c\u4e3a</li> <li>\u9519\u8bef\u65e5\u5fd7</li> </ul>"},{"location":"contributing/how-to-contribute/#pull-request","title":"\u63d0\u4ea4 Pull Request","text":"<ol> <li>Fork \u672c\u4ed3\u5e93</li> <li>\u521b\u5efa\u7279\u6027\u5206\u652f\uff1a<code>git checkout -b feature/amazing-feature</code></li> <li>\u63d0\u4ea4\u66f4\u6539\uff1a<code>git commit -m 'Add amazing feature'</code></li> <li>\u63a8\u9001\u5206\u652f\uff1a<code>git push origin feature/amazing-feature</code></li> <li>\u63d0\u4ea4 Pull Request</li> </ol>"},{"location":"contributing/how-to-contribute/#_3","title":"\u4ee3\u7801\u5ba1\u67e5","text":"<p>\u6240\u6709\u63d0\u4ea4\u90fd\u9700\u8981\u7ecf\u8fc7\u4ee3\u7801\u5ba1\u67e5\u624d\u80fd\u5408\u5e76\u3002</p> <p>\u66f4\u591a\u8be6\u7ec6\u5185\u5bb9...</p>"},{"location":"features/auto-discovery/","title":"\u81ea\u52a8\u53d1\u73b0\u673a\u5236","text":"<p>Faster APP \u7684\u6838\u5fc3\u7279\u6027\u4e4b\u4e00\u662f**\u81ea\u52a8\u53d1\u73b0\u673a\u5236**\uff0c\u5b83\u80fd\u591f\u81ea\u52a8\u626b\u63cf\u5e76\u6ce8\u518c\u9879\u76ee\u4e2d\u7684\u5404\u79cd\u7ec4\u4ef6\uff0c\u5b9e\u73b0\u771f\u6b63\u7684\"\u7ea6\u5b9a\u4f18\u4e8e\u914d\u7f6e\"\u3002</p>"},{"location":"features/auto-discovery/#_2","title":"\ud83c\udfaf \u8bbe\u8ba1\u7406\u5ff5","text":"<p>\u6838\u5fc3\u601d\u60f3</p> <p>\u5f00\u53d1\u8005\u53ea\u9700\u8981\u6309\u7167\u7ea6\u5b9a\u7f16\u5199\u4ee3\u7801\uff0c\u6846\u67b6\u4f1a\u81ea\u52a8\u5b8c\u6210\u7ec4\u4ef6\u7684\u53d1\u73b0\u548c\u6ce8\u518c\uff0c\u65e0\u9700\u624b\u52a8\u914d\u7f6e\u3002</p> <p>\u8fd9\u6d88\u9664\u4e86\u4f20\u7edf FastAPI \u9879\u76ee\u4e2d\u5927\u91cf\u7684\u6837\u677f\u4ee3\u7801\uff0c\u8ba9\u4f60\u4e13\u6ce8\u4e8e\u4e1a\u52a1\u903b\u8f91\u3002</p>"},{"location":"features/auto-discovery/#_3","title":"\ud83d\udd0d \u652f\u6301\u7684\u7ec4\u4ef6\u7c7b\u578b","text":"<p>Faster APP \u652f\u6301\u4ee5\u4e0b\u7ec4\u4ef6\u7684\u81ea\u52a8\u53d1\u73b0\uff1a</p> \u7ec4\u4ef6\u7c7b\u578b \u626b\u63cf\u8def\u5f84 \u8bc6\u522b\u6761\u4ef6 \u6ce8\u518c\u76ee\u6807 \u8def\u7531 <code>apps/*/*.py</code> <code>APIRouter</code> \u5b9e\u4f8b FastAPI \u5e94\u7528 \u6a21\u578b <code>apps/*/models.py</code> <code>tortoise.Model</code> \u5b50\u7c7b Tortoise ORM \u547d\u4ee4 <code>apps/*/*.py</code> <code>BaseCommand</code> \u5b50\u7c7b Fire CLI \u4e2d\u95f4\u4ef6 <code>middleware/*.py</code> <code>BaseMiddleware</code> \u5b50\u7c7b FastAPI \u5e94\u7528 \u914d\u7f6e <code>config/*.py</code> <code>BaseSettings</code> \u5b50\u7c7b \u5168\u5c40\u914d\u7f6e"},{"location":"features/auto-discovery/#_4","title":"\ud83d\udee3\ufe0f \u8def\u7531\u81ea\u52a8\u53d1\u73b0","text":""},{"location":"features/auto-discovery/#_5","title":"\u5de5\u4f5c\u539f\u7406","text":"<ol> <li>\u626b\u63cf\u9636\u6bb5\uff1a\u9012\u5f52\u626b\u63cf <code>apps/</code> \u76ee\u5f55\u4e0b\u7684\u6240\u6709 Python \u6587\u4ef6</li> <li>\u8bc6\u522b\u9636\u6bb5\uff1a\u67e5\u627e <code>fastapi.APIRouter</code> \u7c7b\u578b\u7684\u5b9e\u4f8b\u53d8\u91cf</li> <li>\u6ce8\u518c\u9636\u6bb5\uff1a\u5c06\u627e\u5230\u7684\u8def\u7531\u5668\u6ce8\u518c\u5230 FastAPI \u5e94\u7528</li> </ol>"},{"location":"features/auto-discovery/#_6","title":"\u793a\u4f8b\u4ee3\u7801","text":"<pre><code># apps/users/routes.py\nfrom fastapi import APIRouter\n\n# \u521b\u5efa\u8def\u7531\u5668 - \u4f1a\u88ab\u81ea\u52a8\u53d1\u73b0\nrouter = APIRouter(prefix=\"/users\", tags=[\"\u7528\u6237\"])\n\n@router.get(\"\")\nasync def list_users():\n    \"\"\"\u83b7\u53d6\u7528\u6237\u5217\u8868\"\"\"\n    return {\"users\": []}\n\n@router.post(\"\")\nasync def create_user(name: str):\n    \"\"\"\u521b\u5efa\u7528\u6237\"\"\"\n    return {\"user\": {\"name\": name}}\n</code></pre>"},{"location":"features/auto-discovery/#_7","title":"\u547d\u540d\u7ea6\u5b9a","text":"<p>!!! tip \"\u8def\u7531\u5668\u53d8\u91cf\u540d\" - \u63a8\u8350\uff1a\u4f7f\u7528 <code>router</code> \u4f5c\u4e3a\u53d8\u91cf\u540d - \u652f\u6301\uff1a\u4efb\u4f55\u53d8\u91cf\u540d\u90fd\u53ef\u4ee5\uff0c\u53ea\u8981\u7c7b\u578b\u662f <code>APIRouter</code> - \u591a\u4e2a\u8def\u7531\u5668\uff1a\u540c\u4e00\u6587\u4ef6\u4e2d\u53ef\u4ee5\u5b9a\u4e49\u591a\u4e2a\u8def\u7531\u5668</p>"},{"location":"features/auto-discovery/#_8","title":"\u8def\u7531\u524d\u7f00\u6700\u4f73\u5b9e\u8df5","text":"<pre><code># \u2705 \u63a8\u8350\uff1a\u4f7f\u7528\u8def\u7531\u524d\u7f00\nrouter = APIRouter(prefix=\"/users\", tags=[\"\u7528\u6237\"])\n\n@router.get(\"\")  # \u5bf9\u5e94 /users\n@router.get(\"/{id}\")  # \u5bf9\u5e94 /users/{id}\n</code></pre> <pre><code># \u274c \u4e0d\u63a8\u8350\uff1a\u5b8c\u6574\u8def\u5f84\nrouter = APIRouter(tags=[\"\u7528\u6237\"])\n\n@router.get(\"/users\")\n@router.get(\"/users/{id}\")\n</code></pre>"},{"location":"features/auto-discovery/#_9","title":"\ud83d\udcca \u6a21\u578b\u81ea\u52a8\u53d1\u73b0","text":""},{"location":"features/auto-discovery/#_10","title":"\u5de5\u4f5c\u539f\u7406","text":"<ol> <li>\u626b\u63cf\u9636\u6bb5\uff1a\u626b\u63cf <code>apps/*/models.py</code> \u6587\u4ef6</li> <li>\u8bc6\u522b\u9636\u6bb5\uff1a\u67e5\u627e <code>tortoise.models.Model</code> \u7684\u5b50\u7c7b</li> <li>\u6ce8\u518c\u9636\u6bb5\uff1a\u5c06\u6a21\u578b\u6ce8\u518c\u5230 Tortoise ORM \u914d\u7f6e</li> </ol>"},{"location":"features/auto-discovery/#_11","title":"\u793a\u4f8b\u4ee3\u7801","text":"<pre><code># apps/users/models.py\nfrom faster_app.models.base import UUIDModel, DateTimeModel\nfrom tortoise import fields\n\n# \u4f1a\u88ab\u81ea\u52a8\u53d1\u73b0\u5e76\u6ce8\u518c\nclass User(UUIDModel, DateTimeModel):\n    \"\"\"\u7528\u6237\u6a21\u578b\"\"\"\n\n    username = fields.CharField(max_length=50, unique=True)\n    email = fields.CharField(max_length=100, unique=True)\n    is_active = fields.BooleanField(default=True)\n\n    class Meta:\n        table = \"users\"\n        indexes = [(\"username\",), (\"email\",)]\n\nclass UserProfile(UUIDModel, DateTimeModel):\n    \"\"\"\u7528\u6237\u8d44\u6599\"\"\"\n\n    user = fields.OneToOneField(\"models.User\", related_name=\"profile\")\n    nickname = fields.CharField(max_length=50, null=True)\n    avatar = fields.CharField(max_length=255, null=True)\n\n    class Meta:\n        table = \"user_profiles\"\n</code></pre>"},{"location":"features/auto-discovery/#_12","title":"\u6ce8\u610f\u4e8b\u9879","text":"<p>!!! warning \"\u6587\u4ef6\u547d\u540d\u8981\u6c42\" - \u6a21\u578b\u5fc5\u987b\u5b9a\u4e49\u5728 <code>models.py</code> \u6587\u4ef6\u4e2d - \u6587\u4ef6\u5fc5\u987b\u4f4d\u4e8e <code>apps/</code> \u76ee\u5f55\u7684\u5b50\u76ee\u5f55\u4e0b - \u4e0d\u652f\u6301\u5176\u4ed6\u6587\u4ef6\u540d\uff08\u5982 <code>model.py</code>\uff09</p> <p>\u62bd\u8c61\u6a21\u578b</p> <p><code>python     class BaseModel(Model):         class Meta:             abstract = True  # \u4e0d\u4f1a\u88ab\u6ce8\u518c</code></p>"},{"location":"features/auto-discovery/#_13","title":"\u26a1 \u547d\u4ee4\u81ea\u52a8\u53d1\u73b0","text":""},{"location":"features/auto-discovery/#_14","title":"\u5de5\u4f5c\u539f\u7406","text":"<ol> <li>\u626b\u63cf\u9636\u6bb5\uff1a\u9012\u5f52\u626b\u63cf <code>apps/</code> \u76ee\u5f55\u4e0b\u7684\u6240\u6709 Python \u6587\u4ef6</li> <li>\u8bc6\u522b\u9636\u6bb5\uff1a\u67e5\u627e <code>BaseCommand</code> \u7684\u5b50\u7c7b</li> <li>\u6ce8\u518c\u9636\u6bb5\uff1a\u5c06\u547d\u4ee4\u7c7b\u6ce8\u518c\u5230 Fire CLI</li> </ol>"},{"location":"features/auto-discovery/#_15","title":"\u793a\u4f8b\u4ee3\u7801","text":"<pre><code># apps/users/commands.py\nfrom faster_app.commands.base import BaseCommand\nfrom .models import User\n\n# \u4f1a\u88ab\u81ea\u52a8\u53d1\u73b0\uff0c\u6ce8\u518c\u4e3a \"user\" \u547d\u4ee4\u7ec4\nclass UserCommand(BaseCommand):\n    \"\"\"\u7528\u6237\u7ba1\u7406\u547d\u4ee4\"\"\"\n\n    async def create_admin(self, username: str, email: str):\n        \"\"\"\u521b\u5efa\u7ba1\u7406\u5458\u8d26\u53f7\"\"\"\n        user = await User.create(\n            username=username,\n            email=email,\n            is_staff=True\n        )\n        print(f\"\u2705 \u7ba1\u7406\u5458 {username} \u521b\u5efa\u6210\u529f\")\n\n    async def count(self):\n        \"\"\"\u7edf\u8ba1\u7528\u6237\u6570\u91cf\"\"\"\n        total = await User.all().count()\n        active = await User.filter(is_active=True).count()\n        print(f\"\u603b\u7528\u6237\u6570: {total}, \u6d3b\u8dc3\u7528\u6237: {active}\")\n</code></pre>"},{"location":"features/auto-discovery/#_16","title":"\u4f7f\u7528\u547d\u4ee4","text":"<pre><code># \u547d\u4ee4\u683c\u5f0f: faster &lt;\u547d\u4ee4\u7ec4&gt; &lt;\u65b9\u6cd5&gt; [\u53c2\u6570]\nfaster user create_admin --username=admin --email=admin@example.com\nfaster user count\n</code></pre>"},{"location":"features/auto-discovery/#_17","title":"\u547d\u540d\u89c4\u5219","text":"<p>\u547d\u4ee4\u7ec4\u540d\u79f0\u81ea\u52a8\u4ece\u7c7b\u540d\u63a8\u5bfc\uff1a</p> <ul> <li><code>UserCommand</code> \u2192 <code>user</code></li> <li><code>ArticleCommand</code> \u2192 <code>article</code></li> <li><code>UserProfileCommand</code> \u2192 <code>user_profile</code></li> </ul> <p>\u89c4\u5219\uff1a\u79fb\u9664 <code>Command</code> \u540e\u7f00\uff0c\u8f6c\u4e3a\u5c0f\u5199\u86c7\u5f62\u547d\u540d\u3002</p>"},{"location":"features/auto-discovery/#_18","title":"\ud83d\udd27 \u4e2d\u95f4\u4ef6\u81ea\u52a8\u53d1\u73b0","text":""},{"location":"features/auto-discovery/#_19","title":"\u5de5\u4f5c\u539f\u7406","text":"<ol> <li>\u626b\u63cf\u9636\u6bb5\uff1a\u626b\u63cf <code>middleware/</code> \u76ee\u5f55\u4e0b\u7684\u6240\u6709 Python \u6587\u4ef6</li> <li>\u8bc6\u522b\u9636\u6bb5\uff1a\u67e5\u627e <code>BaseMiddleware</code> \u7684\u5b50\u7c7b</li> <li>\u6ce8\u518c\u9636\u6bb5\uff1a\u6309\u4f18\u5148\u7ea7\u5c06\u4e2d\u95f4\u4ef6\u6ce8\u518c\u5230 FastAPI \u5e94\u7528</li> </ol>"},{"location":"features/auto-discovery/#_20","title":"\u793a\u4f8b\u4ee3\u7801","text":"<pre><code># middleware/auth.py\nfrom faster_app.middleware.base import BaseMiddleware\nfrom fastapi import Request\n\nclass AuthMiddleware(BaseMiddleware):\n    \"\"\"\u8ba4\u8bc1\u4e2d\u95f4\u4ef6\"\"\"\n\n    # \u4f18\u5148\u7ea7\uff1a\u6570\u5b57\u8d8a\u5c0f\u8d8a\u5148\u6267\u884c\n    priority = 100\n\n    async def __call__(self, request: Request, call_next):\n        # \u524d\u7f6e\u5904\u7406\n        token = request.headers.get(\"Authorization\")\n        if token:\n            request.state.user = await self.get_user(token)\n\n        # \u8c03\u7528\u4e0b\u4e00\u4e2a\u4e2d\u95f4\u4ef6/\u8def\u7531\n        response = await call_next(request)\n\n        # \u540e\u7f6e\u5904\u7406\n        response.headers[\"X-Custom-Header\"] = \"value\"\n\n        return response\n</code></pre>"},{"location":"features/auto-discovery/#_21","title":"\u4f18\u5148\u7ea7\u63a7\u5236","text":"<pre><code>class CorsMiddleware(BaseMiddleware):\n    priority = 1  # \u6700\u5148\u6267\u884c\n\nclass AuthMiddleware(BaseMiddleware):\n    priority = 100  # \u4e4b\u540e\u6267\u884c\n\nclass LoggingMiddleware(BaseMiddleware):\n    priority = 999  # \u6700\u540e\u6267\u884c\n</code></pre> <p>\u6267\u884c\u987a\u5e8f\uff1aCORS \u2192 Auth \u2192 Logging \u2192 \u8def\u7531 \u2192 Logging \u2192 Auth \u2192 CORS</p>"},{"location":"features/auto-discovery/#_22","title":"\u2699\ufe0f \u914d\u7f6e\u81ea\u52a8\u53d1\u73b0","text":""},{"location":"features/auto-discovery/#_23","title":"\u5de5\u4f5c\u539f\u7406","text":"<ol> <li>\u626b\u63cf\u9636\u6bb5\uff1a\u626b\u63cf <code>config/</code> \u76ee\u5f55\u4e0b\u7684\u6240\u6709 Python \u6587\u4ef6</li> <li>\u8bc6\u522b\u9636\u6bb5\uff1a\u67e5\u627e <code>BaseSettings</code> \u7684\u5b50\u7c7b</li> <li>\u5408\u5e76\u9636\u6bb5\uff1a\u81ea\u52a8\u5408\u5e76\u6240\u6709\u914d\u7f6e\u7c7b</li> </ol>"},{"location":"features/auto-discovery/#_24","title":"\u793a\u4f8b\u4ee3\u7801","text":"<pre><code># config/settings.py\nfrom faster_app.settings.config import BaseSettings\n\nclass CustomSettings(BaseSettings):\n    \"\"\"\u81ea\u5b9a\u4e49\u914d\u7f6e\"\"\"\n\n    # \u5e94\u7528\u914d\u7f6e\n    APP_NAME: str = \"My App\"\n    APP_VERSION: str = \"1.0.0\"\n\n    # \u4e1a\u52a1\u914d\u7f6e\n    MAX_UPLOAD_SIZE: int = 10 * 1024 * 1024  # 10MB\n    ALLOWED_FILE_TYPES: list[str] = [\".jpg\", \".png\", \".pdf\"]\n\n    # \u7b2c\u4e09\u65b9\u670d\u52a1\n    REDIS_URL: str = \"redis://localhost:6379/0\"\n    CELERY_BROKER: str = \"redis://localhost:6379/1\"\n</code></pre>"},{"location":"features/auto-discovery/#_25","title":"\u4f7f\u7528\u914d\u7f6e","text":"<pre><code>from faster_app.settings.config import get_settings\n\nsettings = get_settings()\n\nprint(settings.APP_NAME)  # \"My App\"\nprint(settings.DEBUG)     # \u7ee7\u627f\u81ea\u5185\u7f6e\u914d\u7f6e\n</code></pre>"},{"location":"features/auto-discovery/#_26","title":"\u914d\u7f6e\u4f18\u5148\u7ea7","text":"<ol> <li>\u73af\u5883\u53d8\u91cf (\u6700\u9ad8\u4f18\u5148\u7ea7)</li> <li>.env \u6587\u4ef6</li> <li>\u81ea\u5b9a\u4e49\u914d\u7f6e\u7c7b</li> <li>\u5185\u7f6e\u9ed8\u8ba4\u914d\u7f6e (\u6700\u4f4e\u4f18\u5148\u7ea7)</li> </ol>"},{"location":"features/auto-discovery/#_27","title":"\ud83d\ude80 \u6269\u5c55\u70b9","text":""},{"location":"features/auto-discovery/#_28","title":"\u81ea\u5b9a\u4e49\u53d1\u73b0\u5668","text":"<p>\u5982\u679c\u4f60\u9700\u8981\u81ea\u5b9a\u4e49\u53d1\u73b0\u903b\u8f91\uff0c\u53ef\u4ee5\u6269\u5c55\u53d1\u73b0\u5668\uff1a</p> <pre><code># faster_app/utils/discover.py\nfrom typing import Any\nimport importlib\nimport pkgutil\n\ndef discover_components(\n    base_path: str,\n    base_class: type,\n    recursive: bool = True\n) -&gt; list[Any]:\n    \"\"\"\u901a\u7528\u7ec4\u4ef6\u53d1\u73b0\u5668\"\"\"\n    components = []\n\n    # \u81ea\u5b9a\u4e49\u626b\u63cf\u903b\u8f91\n    # ...\n\n    return components\n</code></pre>"},{"location":"features/auto-discovery/#_29","title":"\ud83d\udcdd \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"features/auto-discovery/#1","title":"1. \u9075\u5faa\u547d\u540d\u7ea6\u5b9a","text":"<pre><code># \u2705 \u63a8\u8350\napps/users/models.py      # \u6a21\u578b\u6587\u4ef6\napps/users/routes.py      # \u8def\u7531\u6587\u4ef6\napps/users/commands.py    # \u547d\u4ee4\u6587\u4ef6\n\n# \u274c \u4e0d\u63a8\u8350\napps/users/user_models.py\napps/users/api.py\napps/users/cmd.py\n</code></pre>"},{"location":"features/auto-discovery/#2","title":"2. \u4fdd\u6301\u6587\u4ef6\u804c\u8d23\u5355\u4e00","text":"<pre><code># \u2705 \u63a8\u8350\uff1a\u4e00\u4e2a\u6587\u4ef6\u4e00\u4e2a\u8def\u7531\u5668\n# apps/users/routes.py\nrouter = APIRouter(prefix=\"/users\", tags=[\"\u7528\u6237\"])\n\n# \u274c \u4e0d\u63a8\u8350\uff1a\u4e00\u4e2a\u6587\u4ef6\u591a\u4e2a\u4e0d\u76f8\u5173\u7684\u8def\u7531\u5668\nrouter1 = APIRouter(prefix=\"/users\")\nrouter2 = APIRouter(prefix=\"/posts\")  # \u5e94\u8be5\u5728\u72ec\u7acb\u6587\u4ef6\n</code></pre>"},{"location":"features/auto-discovery/#3","title":"3. \u4f7f\u7528\u663e\u5f0f\u914d\u7f6e","text":"<p>\u5bf9\u4e8e\u590d\u6742\u7684\u573a\u666f\uff0c\u53ef\u4ee5\u8986\u76d6\u81ea\u52a8\u53d1\u73b0\uff1a</p> <pre><code># main.py\nfrom faster_app.app import create_app\n\napp = create_app()\n\n# \u624b\u52a8\u6ce8\u518c\u989d\u5916\u8def\u7531\nfrom my_custom_package import custom_router\napp.include_router(custom_router)\n</code></pre>"},{"location":"features/auto-discovery/#_30","title":"\ud83d\udc1b \u8c03\u8bd5\u81ea\u52a8\u53d1\u73b0","text":""},{"location":"features/auto-discovery/#_31","title":"\u67e5\u770b\u5df2\u6ce8\u518c\u7ec4\u4ef6","text":"<pre><code>from faster_app.utils.discover import (\n    discover_routes,\n    discover_models,\n    discover_commands\n)\n\n# \u67e5\u770b\u53d1\u73b0\u7684\u8def\u7531\nroutes = discover_routes(\"apps\")\nprint(f\"\u53d1\u73b0 {len(routes)} \u4e2a\u8def\u7531\u5668\")\n\n# \u67e5\u770b\u53d1\u73b0\u7684\u6a21\u578b\nmodels = discover_models(\"apps\")\nprint(f\"\u53d1\u73b0 {len(models)} \u4e2a\u6a21\u578b\")\n</code></pre>"},{"location":"features/auto-discovery/#_32","title":"\u542f\u7528\u8c03\u8bd5\u65e5\u5fd7","text":"<pre><code># .env\nLOG_LEVEL=DEBUG\n</code></pre> <p>\u67e5\u770b\u542f\u52a8\u65e5\u5fd7\uff1a</p> <pre><code>DEBUG: Discovered router: apps.users.routes.router\nDEBUG: Discovered model: apps.users.models.User\nDEBUG: Discovered command: apps.users.commands.UserCommand\n</code></pre>"},{"location":"features/auto-discovery/#_33","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u4e86\u89e3 \u6a21\u578b\u57fa\u7c7b</li> <li>\u5b66\u4e60 \u8def\u7531\u7ba1\u7406</li> <li>\u638c\u63e1 \u547d\u4ee4\u884c\u5de5\u5177</li> </ul>"},{"location":"features/cli/","title":"\u547d\u4ee4\u884c\u5de5\u5177","text":"<p>Faster APP \u63d0\u4f9b\u4e86\u5b8c\u6574\u7684 Django \u98ce\u683c\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u57fa\u4e8e Fire \u5e93\u5b9e\u73b0\u3002</p>"},{"location":"features/cli/#_2","title":"\ud83c\udfaf \u547d\u4ee4\u6982\u89c8","text":"\u547d\u4ee4\u7ec4 \u8bf4\u660e \u4e3b\u8981\u529f\u80fd <code>faster app</code> \u5e94\u7528\u7ba1\u7406 \u521b\u5efa\u9879\u76ee\u7ed3\u6784\u3001\u914d\u7f6e\u6587\u4ef6 <code>faster db</code> \u6570\u636e\u5e93\u7ba1\u7406 \u8fc1\u79fb\u3001\u521d\u59cb\u5316\u3001\u56de\u6eda <code>faster server</code> \u670d\u52a1\u5668\u7ba1\u7406 \u542f\u52a8\u5f00\u53d1\u670d\u52a1\u5668"},{"location":"features/cli/#app","title":"\ud83c\udfd7\ufe0f App \u547d\u4ee4","text":""},{"location":"features/cli/#faster-app-demo","title":"<code>faster app demo</code>","text":"<p>\u521b\u5efa\u793a\u4f8b\u5e94\u7528\u6a21\u5757</p> <pre><code>faster app demo\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\uff1a</p> <pre><code>\u2705 apps/demo created successfully\n</code></pre> <p>\u751f\u6210\u6587\u4ef6\uff1a</p> <pre><code>apps/demo/\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 models.py      # \u793a\u4f8b\u6570\u636e\u6a21\u578b\n\u251c\u2500\u2500 routes.py      # \u793a\u4f8b API \u8def\u7531\n\u251c\u2500\u2500 schemas.py     # \u793a\u4f8b Pydantic \u6a21\u578b\n\u251c\u2500\u2500 commands.py    # \u793a\u4f8b\u547d\u4ee4\n\u2514\u2500\u2500 tasks.py       # \u793a\u4f8b\u5f02\u6b65\u4efb\u52a1\n</code></pre>"},{"location":"features/cli/#faster-app-config","title":"<code>faster app config</code>","text":"<p>\u521b\u5efa\u81ea\u5b9a\u4e49\u914d\u7f6e\u76ee\u5f55</p> <pre><code>faster app config\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\uff1a</p> <pre><code>\u2705 config/ created successfully\n</code></pre> <p>\u751f\u6210\u6587\u4ef6\uff1a</p> <pre><code>config/\n\u251c\u2500\u2500 __init__.py\n\u2514\u2500\u2500 settings.py    # \u914d\u7f6e\u6a21\u677f\n</code></pre>"},{"location":"features/cli/#faster-app-env","title":"<code>faster app env</code>","text":"<p>\u521b\u5efa\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u6587\u4ef6</p> <pre><code>faster app env\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\uff1a</p> <pre><code>\u2705 .env created successfully\n</code></pre> <p>\u6587\u4ef6\u5185\u5bb9\uff1a</p> <pre><code># \u5e94\u7528\u914d\u7f6e\nDEBUG=True\nHOST=0.0.0.0\nPORT=8000\n\n# \u6570\u636e\u5e93\u914d\u7f6e\nDATABASE_URL=sqlite://./faster_app.db\n\n# \u65e5\u5fd7\u914d\u7f6e\nLOG_LEVEL=INFO\n</code></pre>"},{"location":"features/cli/#faster-app-main","title":"<code>faster app main</code>","text":"<p>\u590d\u5236\u6846\u67b6\u5185\u7f6e\u7684\u4e3b\u5165\u53e3\u6587\u4ef6\u6a21\u677f</p> <pre><code>faster app main\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\uff1a</p> <pre><code>\u2705 main.py created successfully\n</code></pre> <p>\u4f7f\u7528\u573a\u666f\uff1a</p> <ul> <li>\u9700\u8981\u81ea\u5b9a\u4e49 FastAPI \u5e94\u7528\u914d\u7f6e</li> <li>\u6dfb\u52a0\u81ea\u5b9a\u4e49\u4e2d\u95f4\u4ef6\u6216\u8def\u7531</li> <li>\u7279\u6b8a\u7684\u542f\u52a8\u903b\u8f91\u6216\u521d\u59cb\u5316\u4ee3\u7801</li> </ul>"},{"location":"features/cli/#faster-app-middleware","title":"<code>faster app middleware</code>","text":"<p>\u521b\u5efa\u4e2d\u95f4\u4ef6\u76ee\u5f55</p> <pre><code>faster app middleware\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\uff1a</p> <pre><code>\u2705 middleware/ created successfully\n</code></pre>"},{"location":"features/cli/#faster-app-docker","title":"<code>faster app docker</code>","text":"<p>\u521b\u5efa Docker \u914d\u7f6e\u6587\u4ef6</p> <pre><code>faster app docker\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\uff1a</p> <pre><code>\u2705 Dockerfile created successfully\n</code></pre> <p>\u751f\u6210\u7684 Dockerfile\uff1a</p> <ul> <li>\u57fa\u4e8e\u591a\u9636\u6bb5\u6784\u5efa</li> <li>\u4f18\u5316\u7684\u955c\u50cf\u5927\u5c0f</li> <li>\u5305\u542b uv \u5305\u7ba1\u7406\u5668</li> <li>\u9002\u5408\u751f\u4ea7\u73af\u5883\u90e8\u7f72</li> </ul>"},{"location":"features/cli/#db","title":"\ud83d\uddc4\ufe0f DB \u547d\u4ee4","text":""},{"location":"features/cli/#faster-db-init","title":"<code>faster db init</code>","text":"<p>\u521d\u59cb\u5316\u6570\u636e\u5e93\u8fc1\u79fb\u914d\u7f6e</p> <pre><code>faster db init\n</code></pre> <p>\u529f\u80fd\u8bf4\u660e\uff1a</p> <ul> <li>\u521b\u5efa <code>migrations/</code> \u76ee\u5f55</li> <li>\u521d\u59cb\u5316 Aerich \u914d\u7f6e</li> <li>\u51c6\u5907\u6570\u636e\u5e93\u8fc1\u79fb\u73af\u5883</li> </ul> <p>\u8f93\u51fa\u7ed3\u679c\uff1a</p> <pre><code>\u2705 Successfully created migrations folder\n</code></pre>"},{"location":"features/cli/#faster-db-init_db","title":"<code>faster db init_db</code>","text":"<p>\u521d\u59cb\u5316\u6570\u636e\u5e93\u8868\u7ed3\u6784</p> <pre><code>faster db init_db\n</code></pre> <p>\u529f\u80fd\u8bf4\u660e\uff1a</p> <ul> <li>\u6839\u636e\u6a21\u578b\u5b9a\u4e49\u751f\u6210\u6570\u636e\u5e93\u8868</li> <li>\u521b\u5efa\u521d\u59cb\u8fc1\u79fb\u6587\u4ef6</li> <li>\u9002\u7528\u4e8e\u9879\u76ee\u9996\u6b21\u90e8\u7f72</li> </ul> <p>\u8f93\u51fa\u7ed3\u679c\uff1a</p> <pre><code>\u2705 Database initialization successful\n</code></pre>"},{"location":"features/cli/#faster-db-migrate","title":"<code>faster db migrate</code>","text":"<p>\u751f\u6210\u6570\u636e\u5e93\u8fc1\u79fb\u6587\u4ef6</p> <pre><code># \u81ea\u52a8\u751f\u6210\u8fc1\u79fb\u6587\u4ef6\nfaster db migrate\n\n# \u6307\u5b9a\u8fc1\u79fb\u540d\u79f0\nfaster db migrate --name=\"add_user_table\"\n\n# \u751f\u6210\u7a7a\u8fc1\u79fb\u6587\u4ef6\nfaster db migrate --empty\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e\uff1a</p> <ul> <li><code>--name</code>: \u8fc1\u79fb\u6587\u4ef6\u540d\u79f0\uff08\u53ef\u9009\uff09</li> <li><code>--empty</code>: \u751f\u6210\u7a7a\u8fc1\u79fb\u6587\u4ef6\uff0c\u7528\u4e8e\u624b\u52a8\u7f16\u5199 SQL</li> </ul> <p>\u8f93\u51fa\u7ed3\u679c\uff1a</p> <pre><code>\u2705 Migration file generated successfully\nmigrations/models/1_20240101120000_add_user_table.py\n</code></pre>"},{"location":"features/cli/#faster-db-upgrade","title":"<code>faster db upgrade</code>","text":"<p>\u6267\u884c\u6570\u636e\u5e93\u8fc1\u79fb</p> <pre><code>faster db upgrade\n</code></pre> <p>\u529f\u80fd\u8bf4\u660e\uff1a</p> <ul> <li>\u6267\u884c\u6240\u6709\u672a\u5e94\u7528\u7684\u8fc1\u79fb\u6587\u4ef6</li> <li>\u652f\u6301\u4e8b\u52a1\u56de\u6eda</li> <li>\u66f4\u65b0\u6570\u636e\u5e93\u5230\u6700\u65b0\u72b6\u6001</li> </ul> <p>\u8f93\u51fa\u7ed3\u679c\uff1a</p> <pre><code>\u2705 Database migration execution successful\nApplied migrations:\n  - 1_20240101120000_add_user_table.py\n</code></pre>"},{"location":"features/cli/#faster-db-downgrade","title":"<code>faster db downgrade</code>","text":"<p>\u56de\u6eda\u6570\u636e\u5e93\u8fc1\u79fb</p> <pre><code># \u56de\u6eda\u5230\u4e0a\u4e00\u4e2a\u7248\u672c\nfaster db downgrade\n\n# \u56de\u6eda\u5230\u6307\u5b9a\u7248\u672c\nfaster db downgrade --version=2\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e\uff1a</p> <ul> <li><code>--version</code>: \u76ee\u6807\u7248\u672c\u53f7\uff08\u9ed8\u8ba4 -1\uff0c\u5373\u4e0a\u4e00\u7248\u672c\uff09</li> </ul> <p>\u8f93\u51fa\u7ed3\u679c\uff1a</p> <pre><code>\u2705 Database downgrade successful\nReverted: 1_20240101120000_add_user_table.py\n</code></pre>"},{"location":"features/cli/#faster-db-history","title":"<code>faster db history</code>","text":"<p>\u67e5\u770b\u8fc1\u79fb\u5386\u53f2</p> <pre><code>faster db history\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>Migration History:\n  \u2713 0_20231225100000_init.py (2023-12-25 10:00:00)\n  \u2713 1_20240101120000_add_user_table.py (2024-01-01 12:00:00)\n  \u2713 2_20240102080000_add_article_table.py (2024-01-02 08:00:00)\n</code></pre>"},{"location":"features/cli/#faster-db-heads","title":"<code>faster db heads</code>","text":"<p>\u67e5\u770b\u5f85\u5e94\u7528\u7684\u8fc1\u79fb</p> <pre><code>faster db heads\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>Pending Migrations:\n  - 3_20240103090000_add_comment_table.py\n  - 4_20240104100000_add_indexes.py\n</code></pre>"},{"location":"features/cli/#faster-db-dev_clean","title":"<code>faster db dev_clean</code>","text":"<p>\u6e05\u7406\u5f00\u53d1\u73af\u5883\u6570\u636e \u26a0\ufe0f</p> <pre><code># \u4ea4\u4e92\u5f0f\u786e\u8ba4\nfaster db dev_clean\n\n# \u5f3a\u5236\u6e05\u7406\nfaster db dev_clean --force\n</code></pre> <p>\u529f\u80fd\u8bf4\u660e\uff1a</p> <ul> <li>\u4ec5\u5728\u5f00\u53d1\u73af\u5883\u53ef\u7528\uff08<code>DEBUG=True</code>\uff09</li> <li>\u5220\u9664\u6570\u636e\u5e93\u6587\u4ef6</li> <li>\u5220\u9664\u8fc1\u79fb\u76ee\u5f55</li> <li>\u7528\u4e8e\u91cd\u7f6e\u5f00\u53d1\u73af\u5883</li> </ul> <p>\u53c2\u6570\u8bf4\u660e\uff1a</p> <ul> <li><code>--force</code>: \u8df3\u8fc7\u786e\u8ba4\u63d0\u793a</li> </ul> <p>\u8b66\u544a</p> <p>\u6b64\u64cd\u4f5c\u4f1a\u5220\u9664\u6240\u6709\u6570\u636e\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\uff01\u751f\u4ea7\u73af\u5883\u4f1a\u81ea\u52a8\u7981\u7528\u6b64\u547d\u4ee4\u3002</p>"},{"location":"features/cli/#server","title":"\ud83d\ude80 Server \u547d\u4ee4","text":""},{"location":"features/cli/#faster-server-start","title":"<code>faster server start</code>","text":"<p>\u542f\u52a8\u5f00\u53d1\u670d\u52a1\u5668</p> <pre><code>faster server start\n</code></pre> <p>\u529f\u80fd\u8bf4\u660e\uff1a</p> <ul> <li>\u81ea\u52a8\u68c0\u6d4b\u9879\u76ee\u6839\u76ee\u5f55\u7684 <code>main.py</code></li> <li>\u4f18\u5148\u4f7f\u7528\u7528\u6237\u81ea\u5b9a\u4e49\u914d\u7f6e</li> <li>\u652f\u6301\u70ed\u91cd\u8f7d</li> <li>\u81ea\u52a8\u5e94\u7528\u65e5\u5fd7\u3001\u4e2d\u95f4\u4ef6\u3001\u8def\u7531\u914d\u7f6e</li> </ul> <p>\u542f\u52a8\u68c0\u6d4b\u903b\u8f91\uff1a</p> <ol> <li>\u7b2c\u4e00\u4f18\u5148\u7ea7\uff1a\u68c0\u67e5 <code>main.py</code></li> <li>\u5b58\u5728 <code>app</code> \u5b9e\u4f8b \u2192 \u4f7f\u7528\u81ea\u5b9a\u4e49\u5e94\u7528</li> <li>\u5b58\u5728 <code>main()</code> \u51fd\u6570 \u2192 \u6267\u884c\u81ea\u5b9a\u4e49\u542f\u52a8</li> <li>\u7b2c\u4e8c\u4f18\u5148\u7ea7\uff1a\u4f7f\u7528\u6846\u67b6\u5185\u7f6e\u914d\u7f6e</li> </ol> <p>\u914d\u7f6e\u53c2\u6570\uff08\u901a\u8fc7 <code>.env</code>\uff09\uff1a</p> <pre><code>HOST=0.0.0.0      # \u76d1\u542c\u5730\u5740\nPORT=8000         # \u76d1\u542c\u7aef\u53e3\nDEBUG=True        # \u8c03\u8bd5\u6a21\u5f0f\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)\nINFO:     Started reloader process [12345] using WatchFiles\nINFO:     Started server process [12346]\nINFO:     Application startup complete.\n</code></pre>"},{"location":"features/cli/#_3","title":"\ud83d\udd27 \u81ea\u5b9a\u4e49\u547d\u4ee4","text":"<p>Faster APP \u652f\u6301\u81ea\u52a8\u53d1\u73b0\u548c\u6ce8\u518c\u81ea\u5b9a\u4e49\u547d\u4ee4\u3002</p>"},{"location":"features/cli/#_4","title":"\u521b\u5efa\u81ea\u5b9a\u4e49\u547d\u4ee4","text":"<pre><code># apps/users/commands.py\nfrom faster_app.commands.base import BaseCommand\nfrom .models import User\n\nclass UserCommand(BaseCommand):\n    \"\"\"\u7528\u6237\u7ba1\u7406\u547d\u4ee4\"\"\"\n\n    async def create_admin(self, username: str, email: str):\n        \"\"\"\u521b\u5efa\u7ba1\u7406\u5458\u8d26\u53f7\"\"\"\n        user = await User.create(\n            username=username,\n            email=email,\n            is_staff=True\n        )\n        print(f\"\u2705 \u7ba1\u7406\u5458 {username} \u521b\u5efa\u6210\u529f\")\n\n    async def count(self):\n        \"\"\"\u7edf\u8ba1\u7528\u6237\u6570\u91cf\"\"\"\n        total = await User.all().count()\n        active = await User.filter(is_active=True).count()\n        print(f\"\u603b\u7528\u6237\u6570: {total}, \u6d3b\u8dc3\u7528\u6237: {active}\")\n\n    async def export(self, format: str = \"json\"):\n        \"\"\"\u5bfc\u51fa\u7528\u6237\u6570\u636e\"\"\"\n        users = await User.all()\n        if format == \"json\":\n            # \u5bfc\u51fa\u4e3a JSON\n            pass\n        elif format == \"csv\":\n            # \u5bfc\u51fa\u4e3a CSV\n            pass\n</code></pre>"},{"location":"features/cli/#_5","title":"\u4f7f\u7528\u81ea\u5b9a\u4e49\u547d\u4ee4","text":"<pre><code># \u547d\u4ee4\u683c\u5f0f: faster &lt;\u547d\u4ee4\u7ec4&gt; &lt;\u65b9\u6cd5&gt; [\u53c2\u6570]\nfaster user create_admin --username=admin --email=admin@example.com\nfaster user count\nfaster user export --format=csv\n</code></pre>"},{"location":"features/cli/#_6","title":"\u547d\u540d\u89c4\u5219","text":"<p>\u547d\u4ee4\u7ec4\u540d\u79f0\u81ea\u52a8\u4ece\u7c7b\u540d\u63a8\u5bfc\uff1a</p> \u7c7b\u540d \u547d\u4ee4\u7ec4 <code>UserCommand</code> <code>user</code> <code>ArticleCommand</code> <code>article</code> <code>UserProfileCommand</code> <code>user_profile</code> <p>\u89c4\u5219\uff1a\u79fb\u9664 <code>Command</code> \u540e\u7f00\uff0c\u8f6c\u4e3a\u5c0f\u5199\u86c7\u5f62\u547d\u540d\u3002</p>"},{"location":"features/cli/#_7","title":"\ud83d\udca1 \u4f7f\u7528\u6280\u5de7","text":""},{"location":"features/cli/#_8","title":"\u67e5\u770b\u547d\u4ee4\u5e2e\u52a9","text":"<pre><code># \u67e5\u770b\u6240\u6709\u547d\u4ee4\nfaster --help\n\n# \u67e5\u770b\u547d\u4ee4\u7ec4\u5e2e\u52a9\nfaster db --help\n\n# \u67e5\u770b\u5177\u4f53\u547d\u4ee4\u5e2e\u52a9\nfaster db migrate --help\n</code></pre>"},{"location":"features/cli/#_9","title":"\u5f00\u53d1\u5de5\u4f5c\u6d41","text":"<p>\u63a8\u8350\u7684\u9879\u76ee\u521d\u59cb\u5316\u6d41\u7a0b\uff1a</p> <pre><code># 1. \u521b\u5efa\u57fa\u7840\u7ed3\u6784\nfaster app demo          # \u521b\u5efa\u793a\u4f8b\u5e94\u7528\nfaster app config        # \u521b\u5efa\u914d\u7f6e\u76ee\u5f55\nfaster app env           # \u521b\u5efa\u73af\u5883\u53d8\u91cf\n\n# 2. \u521d\u59cb\u5316\u6570\u636e\u5e93\nfaster db init           # \u521d\u59cb\u5316\u8fc1\u79fb\u914d\u7f6e\nfaster db init_db        # \u521b\u5efa\u6570\u636e\u5e93\u8868\n\n# 3. \u542f\u52a8\u5f00\u53d1\nfaster server start      # \u542f\u52a8\u670d\u52a1\u5668\n</code></pre>"},{"location":"features/cli/#_10","title":"\u4f7f\u7528\u73af\u5883\u53d8\u91cf","text":"<p>\u901a\u8fc7 <code>.env</code> \u6587\u4ef6\u914d\u7f6e\uff1a</p> <pre><code># \u5148\u521b\u5efa\u914d\u7f6e\u6587\u4ef6\nfaster app env\n\n# \u7f16\u8f91 .env \u6587\u4ef6\nvim .env\n\n# \u518d\u6267\u884c\u6570\u636e\u5e93\u64cd\u4f5c\nfaster db init\n</code></pre>"},{"location":"features/cli/#_11","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u67e5\u770b CLI \u5b8c\u6574\u53c2\u8003</li> <li>\u4e86\u89e3 \u81ea\u5b9a\u4e49\u547d\u4ee4</li> <li>\u5b66\u4e60 \u6570\u636e\u5e93\u6700\u4f73\u5b9e\u8df5</li> </ul>"},{"location":"features/config-grouping/","title":"\u914d\u7f6e\u5206\u7ec4\u4e0e\u5d4c\u5957","text":""},{"location":"features/config-grouping/#_2","title":"\u6982\u8ff0","text":"<p>\u914d\u7f6e\u5206\u7ec4\u4e0e\u5d4c\u5957\u662f\u4e00\u79cd\u6700\u4f73\u5b9e\u8df5\uff0c\u901a\u8fc7\u5c06\u76f8\u5173\u914d\u7f6e\u7ec4\u7ec7\u6210\u72ec\u7acb\u7684\u914d\u7f6e\u7c7b\uff0c\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u3001\u53ef\u7ef4\u62a4\u6027\u548c\u7c7b\u578b\u5b89\u5168\u6027\u3002</p>"},{"location":"features/config-grouping/#_3","title":"\u4e3a\u4ec0\u4e48\u9700\u8981\u914d\u7f6e\u5206\u7ec4\uff1f","text":""},{"location":"features/config-grouping/#_4","title":"\u274c \u6241\u5e73\u5316\u914d\u7f6e\u7684\u95ee\u9898","text":"<pre><code># \u6240\u6709\u914d\u7f6e\u6df7\u5728\u4e00\u8d77\uff0c\u96be\u4ee5\u7ef4\u62a4\nclass Settings(BaseSettings):\n    # \u57fa\u7840\u914d\u7f6e\n    PROJECT_NAME: str = \"App\"\n    DEBUG: bool = True\n\n    # \u670d\u52a1\u5668\u914d\u7f6e\n    HOST: str = \"0.0.0.0\"\n    PORT: int = 8000\n\n    # JWT \u914d\u7f6e\n    SECRET_KEY: str = \"secret\"\n    ALGORITHM: str = \"HS256\"\n    ACCESS_TOKEN_EXPIRE_MINUTES: int = 30\n\n    # \u6570\u636e\u5e93\u914d\u7f6e\n    DB_TYPE: str = \"sqlite\"\n    DB_HOST: str = \"localhost\"\n    DB_PORT: int = 5432\n    DB_USER: str = \"user\"\n    DB_PASSWORD: str = \"password\"\n    DB_DATABASE: str = \"db\"\n\n    # \u65e5\u5fd7\u914d\u7f6e\n    LOG_LEVEL: str = \"INFO\"\n    LOG_FORMAT: str = \"STRING\"\n    # ... \u8fd8\u6709\u66f4\u591a\u914d\u7f6e\n</code></pre> <p>\u95ee\u9898\uff1a - \u914d\u7f6e\u9879\u592a\u591a\uff0c\u96be\u4ee5\u627e\u5230\u76f8\u5173\u914d\u7f6e - \u547d\u540d\u5bb9\u6613\u51b2\u7a81\uff08\u591a\u4e2a\u6a21\u5757\u53ef\u80fd\u90fd\u6709 <code>host</code>, <code>port</code>\uff09 - \u65e0\u6cd5\u72ec\u7acb\u9a8c\u8bc1\u67d0\u4e2a\u6a21\u5757\u7684\u914d\u7f6e - IDE \u81ea\u52a8\u8865\u5168\u4f53\u9a8c\u5dee - \u96be\u4ee5\u91cd\u7528\u914d\u7f6e</p>"},{"location":"features/config-grouping/#_5","title":"\u2705 \u5206\u7ec4\u914d\u7f6e\u7684\u4f18\u52bf","text":"<pre><code># \u914d\u7f6e\u6309\u529f\u80fd\u5206\u7ec4\uff0c\u6e05\u6670\u660e\u4e86\nclass Settings(BaseSettings):\n    # \u57fa\u7840\u914d\u7f6e\uff08\u4fdd\u6301\u6241\u5e73\uff09\n    project_name: str = \"App\"\n    debug: bool = True\n\n    # \u914d\u7f6e\u7ec4\uff08\u5d4c\u5957\uff09\n    server: ServerSettings = ServerSettings()\n    jwt: JWTSettings = JWTSettings()\n    database: DatabaseSettings = DatabaseSettings()\n    log: LogSettings = LogSettings()\n</code></pre> <p>\u8bbf\u95ee\u65b9\u5f0f\u5bf9\u6bd4\uff1a</p> <pre><code># \u6241\u5e73\u5316\uff08\u96be\u8bfb\uff09\nsettings.DB_HOST\nsettings.DB_PORT\nsettings.DB_USER\nsettings.SECRET_KEY\nsettings.ALGORITHM\n\n# \u5206\u7ec4\uff08\u6e05\u6670\uff09\nsettings.database.host\nsettings.database.port\nsettings.database.user\nsettings.jwt.secret_key\nsettings.jwt.algorithm\n</code></pre>"},{"location":"features/config-grouping/#8","title":"\u914d\u7f6e\u5206\u7ec4\u76848\u5927\u4f18\u52bf","text":""},{"location":"features/config-grouping/#1","title":"1. \u903b\u8f91\u6e05\u6670 \ud83d\udccb","text":"<p>\u76f8\u5173\u914d\u7f6e\u5f52\u7c7b\u5728\u4e00\u8d77\uff0c\u4e00\u773c\u5c31\u80fd\u770b\u51fa\u67d0\u4e2a\u914d\u7f6e\u5c5e\u4e8e\u54ea\u4e2a\u6a21\u5757\u3002</p> <pre><code># \u2705 \u6e05\u6670\uff1a\u6570\u636e\u5e93\u76f8\u5173\u914d\u7f6e\u90fd\u5728 database \u4e0b\nsettings.database.host\nsettings.database.port\nsettings.database.user\nsettings.database.password\n</code></pre>"},{"location":"features/config-grouping/#2","title":"2. \u6613\u4e8e\u7ef4\u62a4 \ud83d\udd27","text":"<p>\u4fee\u6539\u67d0\u4e2a\u6a21\u5757\u7684\u914d\u7f6e\u4e0d\u5f71\u54cd\u5176\u4ed6\u6a21\u5757\u3002</p> <pre><code># \u53ea\u4fee\u6539\u6570\u636e\u5e93\u914d\u7f6e\nclass DatabaseSettings(BaseModel):\n    host: str = \"localhost\"\n    port: int = 5432\n    # \u6dfb\u52a0\u65b0\u5b57\u6bb5\u4e0d\u5f71\u54cd\u5176\u4ed6\u914d\u7f6e\u7ec4\n    connection_pool_size: int = 10\n</code></pre>"},{"location":"features/config-grouping/#3","title":"3. \u7c7b\u578b\u5b89\u5168 \ud83d\udee1\ufe0f","text":"<p>\u6bcf\u4e2a\u914d\u7f6e\u7ec4\u90fd\u6709\u72ec\u7acb\u7684\u7c7b\u578b\u5b9a\u4e49\uff0c\u7f16\u8bd1\u671f\u5c31\u80fd\u53d1\u73b0\u9519\u8bef\u3002</p> <pre><code># IDE \u4f1a\u7acb\u5373\u63d0\u793a\u7c7b\u578b\u9519\u8bef\nsettings.server.port = \"invalid\"  # \u274c \u7c7b\u578b\u9519\u8bef: int \u2260 str\n</code></pre>"},{"location":"features/config-grouping/#4-ide","title":"4. IDE \u667a\u80fd\u63d0\u793a \ud83d\udca1","text":"<p>\u5206\u7ec4\u914d\u7f6e\u5927\u5927\u6539\u5584\u4e86 IDE \u7684\u81ea\u52a8\u8865\u5168\u4f53\u9a8c\u3002</p> <pre><code>settings.server.  # IDE \u63d0\u793a: host, port\nsettings.jwt.     # IDE \u63d0\u793a: secret_key, algorithm, access_token_expire_minutes\nsettings.database.  # IDE \u63d0\u793a: type, host, port, user, password, database\nsettings.log.     # IDE \u63d0\u793a: level, format\n</code></pre>"},{"location":"features/config-grouping/#5","title":"5. \u53ef\u91cd\u7528\u6027 \u267b\ufe0f","text":"<p>\u914d\u7f6e\u7ec4\u53ef\u4ee5\u72ec\u7acb\u4f7f\u7528\u548c\u91cd\u7528\u3002</p> <pre><code># \u521b\u5efa\u72ec\u7acb\u7684\u914d\u7f6e\u7ec4\ndev_db = DatabaseSettings(type=\"sqlite\", database=\"dev.db\")\nprod_db = DatabaseSettings(type=\"postgres\", host=\"prod.db.com\")\n\n# \u5728\u4e0d\u540c\u73af\u5883\u4e2d\u91cd\u7528\ndev_settings = Settings(database=dev_db)\nprod_settings = Settings(database=prod_db)\n</code></pre>"},{"location":"features/config-grouping/#6","title":"6. \u9a8c\u8bc1\u7cbe\u7ec6 \u2713","text":"<p>\u6bcf\u4e2a\u914d\u7f6e\u7ec4\u53ef\u4ee5\u6709\u81ea\u5df1\u7684\u9a8c\u8bc1\u903b\u8f91\u3002</p> <pre><code>class DatabaseSettings(BaseModel):\n    port: int\n\n    @field_validator(\"port\")\n    def validate_port(cls, v):\n        # \u53ea\u9a8c\u8bc1\u6570\u636e\u5e93\u7aef\u53e3\uff0c\u4e0d\u5f71\u54cd\u5176\u4ed6\u914d\u7f6e\n        if not 1 &lt;= v &lt;= 65535:\n            raise ValueError(\"database.port \u65e0\u6548\")\n        return v\n</code></pre>"},{"location":"features/config-grouping/#7","title":"7. \u547d\u540d\u7a7a\u95f4\u9694\u79bb \ud83d\udd12","text":"<p>\u907f\u514d\u5b57\u6bb5\u540d\u51b2\u7a81\u3002</p> <pre><code># \u591a\u4e2a\u6a21\u5757\u53ef\u4ee5\u6709\u76f8\u540c\u7684\u5b57\u6bb5\u540d\uff0c\u4e0d\u4f1a\u51b2\u7a81\nsettings.server.host      # \u670d\u52a1\u5668\u4e3b\u673a\nsettings.database.host    # \u6570\u636e\u5e93\u4e3b\u673a\nsettings.cache.host       # \u7f13\u5b58\u4e3b\u673a\n</code></pre>"},{"location":"features/config-grouping/#8_1","title":"8. \u5411\u540e\u517c\u5bb9 \ud83d\udd04","text":"<p>\u53ef\u4ee5\u4fdd\u7559\u65e7\u7684\u8bbf\u95ee\u65b9\u5f0f\uff0c\u540c\u65f6\u63d0\u4f9b\u65b0\u7684\u5206\u7ec4\u65b9\u5f0f\u3002</p> <pre><code># \u65b0\u65b9\u5f0f\uff08\u63a8\u8350\uff09\nsettings.database.host\n\n# \u65e7\u65b9\u5f0f\uff08\u901a\u8fc7\u5c5e\u6027\u6620\u5c04\uff09\n@property\ndef DB_HOST(self):\n    return self.database.host\n</code></pre>"},{"location":"features/config-grouping/#_6","title":"\u5b9e\u73b0\u65b9\u5f0f","text":""},{"location":"features/config-grouping/#1-basemodel","title":"\u65b9\u5f0f 1: \u4f7f\u7528 BaseModel\uff08\u63a8\u8350\uff09","text":"<pre><code>from pydantic import BaseModel\nfrom pydantic_settings import BaseSettings\n\n# \u5b9a\u4e49\u914d\u7f6e\u7ec4\nclass ServerSettings(BaseModel):\n    \"\"\"\u670d\u52a1\u5668\u914d\u7f6e\u7ec4\"\"\"\n    host: str = \"0.0.0.0\"\n    port: int = 8000\n\nclass DatabaseSettings(BaseModel):\n    \"\"\"\u6570\u636e\u5e93\u914d\u7f6e\u7ec4\"\"\"\n    type: str = \"sqlite\"\n    host: str = \"localhost\"\n    port: int = 5432\n    user: str = \"postgres\"\n    password: str = \"postgres\"\n    database: str = \"app_db\"\n\n# \u4e3b\u914d\u7f6e\u7c7b\nclass Settings(BaseSettings):\n    \"\"\"\u5e94\u7528\u914d\u7f6e\"\"\"\n    project_name: str = \"My App\"\n    debug: bool = True\n\n    # \u5d4c\u5957\u914d\u7f6e\u7ec4\n    server: ServerSettings = ServerSettings()\n    database: DatabaseSettings = DatabaseSettings()\n\n    class Config:\n        env_file = \".env\"\n        env_prefix = \"APP_\"\n        env_nested_delimiter = \"__\"  # \u652f\u6301 APP_DATABASE__HOST\n</code></pre>"},{"location":"features/config-grouping/#2-field","title":"\u65b9\u5f0f 2: \u4f7f\u7528 Field \u8bbe\u7f6e\u9ed8\u8ba4\u503c","text":"<pre><code>from pydantic import BaseModel, Field\n\nclass ServerSettings(BaseModel):\n    host: str = Field(default=\"0.0.0.0\", description=\"\u670d\u52a1\u5668\u76d1\u542c\u5730\u5740\")\n    port: int = Field(default=8000, ge=1, le=65535, description=\"\u670d\u52a1\u5668\u7aef\u53e3\")\n</code></pre>"},{"location":"features/config-grouping/#3_1","title":"\u65b9\u5f0f 3: \u4f7f\u7528\u5de5\u5382\u51fd\u6570","text":"<pre><code>def create_database_settings(env: str = \"dev\") -&gt; DatabaseSettings:\n    \"\"\"\u6839\u636e\u73af\u5883\u521b\u5efa\u6570\u636e\u5e93\u914d\u7f6e\"\"\"\n    if env == \"prod\":\n        return DatabaseSettings(\n            type=\"postgres\",\n            host=\"prod.db.com\",\n            port=5432\n        )\n    return DatabaseSettings(type=\"sqlite\", database=\"dev.db\")\n\nsettings = Settings(database=create_database_settings(\"prod\"))\n</code></pre>"},{"location":"features/config-grouping/#_7","title":"\u73af\u5883\u53d8\u91cf\u6620\u5c04","text":""},{"location":"features/config-grouping/#_8","title":"\u5d4c\u5957\u5206\u9694\u7b26","text":"<p>\u4f7f\u7528\u53cc\u4e0b\u5212\u7ebf <code>__</code> \u6765\u8868\u793a\u5d4c\u5957\u5173\u7cfb\uff1a</p> <pre><code># \u6241\u5e73\u5316\u914d\u7f6e\nexport FASTER_DB_HOST=localhost\nexport FASTER_DB_PORT=5432\n\n# \u5206\u7ec4\u914d\u7f6e\uff08\u4f7f\u7528\u53cc\u4e0b\u5212\u7ebf\uff09\nexport FASTER_DATABASE__HOST=localhost\nexport FASTER_DATABASE__PORT=5432\nexport FASTER_SERVER__HOST=0.0.0.0\nexport FASTER_SERVER__PORT=8000\nexport FASTER_JWT__SECRET_KEY=your-secret-key\n</code></pre>"},{"location":"features/config-grouping/#env","title":".env \u6587\u4ef6\u793a\u4f8b","text":"<pre><code># .env\n\n# \u57fa\u7840\u914d\u7f6e\nFASTER_PROJECT_NAME=My Production App\nFASTER_DEBUG=false\n\n# \u670d\u52a1\u5668\u914d\u7f6e\uff08\u4f7f\u7528\u53cc\u4e0b\u5212\u7ebf\uff09\nFASTER_SERVER__HOST=10.0.0.1\nFASTER_SERVER__PORT=8000\n\n# JWT \u914d\u7f6e\nFASTER_JWT__SECRET_KEY=production-secret-key-with-at-least-32-chars\nFASTER_JWT__ALGORITHM=HS256\nFASTER_JWT__ACCESS_TOKEN_EXPIRE_MINUTES=60\n\n# \u6570\u636e\u5e93\u914d\u7f6e\nFASTER_DATABASE__TYPE=postgres\nFASTER_DATABASE__HOST=db.production.com\nFASTER_DATABASE__PORT=5432\nFASTER_DATABASE__USER=prod_user\nFASTER_DATABASE__PASSWORD=Str0ng!P@ssw0rd\nFASTER_DATABASE__DATABASE=production_db\n\n# \u65e5\u5fd7\u914d\u7f6e\nFASTER_LOG__LEVEL=INFO\nFASTER_LOG__FORMAT=STRING\n</code></pre>"},{"location":"features/config-grouping/#_9","title":"\u4f7f\u7528\u793a\u4f8b","text":""},{"location":"features/config-grouping/#_10","title":"\u57fa\u672c\u4f7f\u7528","text":"<pre><code>from faster_app.settings.builtins.settings_grouped import GroupedSettings\n\n# \u52a0\u8f7d\u914d\u7f6e\nsettings = GroupedSettings()\n\n# \u8bbf\u95ee\u914d\u7f6e\nprint(settings.project_name)\nprint(settings.server.host)\nprint(settings.server.port)\nprint(settings.database.host)\nprint(settings.jwt.algorithm)\nprint(settings.log.level)\n</code></pre>"},{"location":"features/config-grouping/#_11","title":"\u8986\u76d6\u914d\u7f6e","text":"<pre><code>from faster_app.settings.builtins.settings_grouped import (\n    GroupedSettings,\n    ServerSettings,\n    DatabaseSettings\n)\n\n# \u65b9\u5f0f 1: \u901a\u8fc7\u6784\u9020\u51fd\u6570\nsettings = GroupedSettings(\n    debug=False,\n    server=ServerSettings(host=\"10.0.0.1\", port=9000),\n    database=DatabaseSettings(\n        type=\"postgres\",\n        host=\"db.example.com\",\n        port=5432\n    )\n)\n\n# \u65b9\u5f0f 2: \u901a\u8fc7\u73af\u5883\u53d8\u91cf\n# export FASTER_SERVER__HOST=10.0.0.1\n# export FASTER_DATABASE__HOST=db.example.com\nsettings = GroupedSettings()\n</code></pre>"},{"location":"features/config-grouping/#_12","title":"\u6761\u4ef6\u914d\u7f6e","text":"<pre><code>def get_settings(env: str = \"dev\") -&gt; GroupedSettings:\n    \"\"\"\u6839\u636e\u73af\u5883\u8fd4\u56de\u914d\u7f6e\"\"\"\n    if env == \"prod\":\n        return GroupedSettings(\n            debug=False,\n            server=ServerSettings(host=\"10.0.0.1\"),\n            database=DatabaseSettings(\n                type=\"postgres\",\n                host=\"prod.db.com\"\n            )\n        )\n    elif env == \"test\":\n        return GroupedSettings(\n            debug=True,\n            database=DatabaseSettings(type=\"sqlite\", database=\":memory:\")\n        )\n    else:  # dev\n        return GroupedSettings(debug=True)\n\n# \u4f7f\u7528\nsettings = get_settings(\"prod\")\n</code></pre>"},{"location":"features/config-grouping/#_13","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"features/config-grouping/#_14","title":"\u2705 \u63a8\u8350\u505a\u6cd5","text":"<ol> <li> <p>\u6309\u529f\u80fd\u5206\u7ec4 <pre><code># \u5c06\u76f8\u5173\u914d\u7f6e\u5f52\u7c7b\nserver: ServerSettings\ndatabase: DatabaseSettings\njwt: JWTSettings\nlog: LogSettings\n</code></pre></p> </li> <li> <p>\u4f7f\u7528\u5c0f\u5199\u5b57\u6bb5\u540d <pre><code># \u2705 \u63a8\u8350\uff1a\u5c0f\u5199 + \u4e0b\u5212\u7ebf\nproject_name: str\nsecret_key: str\n\n# \u274c \u4e0d\u63a8\u8350\uff1a\u5927\u5199\nPROJECT_NAME: str\nSECRET_KEY: str\n</code></pre></p> </li> <li> <p>\u63d0\u4f9b\u63cf\u8ff0\u6027\u7684 docstring <pre><code>class ServerSettings(BaseModel):\n    \"\"\"\n    \u670d\u52a1\u5668\u914d\u7f6e\u7ec4\n\n    \u5305\u542b\u670d\u52a1\u5668\u76d1\u542c\u5730\u5740\u3001\u7aef\u53e3\u7b49\u914d\u7f6e\n    \"\"\"\n    host: str = Field(description=\"\u670d\u52a1\u5668\u76d1\u542c\u5730\u5740\")\n    port: int = Field(description=\"\u670d\u52a1\u5668\u7aef\u53e3\")\n</code></pre></p> </li> <li> <p>\u6bcf\u4e2a\u914d\u7f6e\u7ec4\u72ec\u7acb\u9a8c\u8bc1 <pre><code>class DatabaseSettings(BaseModel):\n    port: int\n\n    @field_validator(\"port\")\n    def validate_port(cls, v):\n        # \u9a8c\u8bc1\u903b\u8f91\u53ea\u9488\u5bf9\u5f53\u524d\u914d\u7f6e\u7ec4\n        ...\n</code></pre></p> </li> <li> <p>\u4fdd\u6301\u5411\u540e\u517c\u5bb9 <pre><code>class Settings(BaseSettings):\n    database: DatabaseSettings\n\n    # \u63d0\u4f9b\u65e7\u7684\u8bbf\u95ee\u65b9\u5f0f\n    @property\n    def DB_HOST(self) -&gt; str:\n        return self.database.host\n</code></pre></p> </li> </ol>"},{"location":"features/config-grouping/#_15","title":"\u274c \u907f\u514d\u7684\u505a\u6cd5","text":"<ol> <li>\u274c \u8fc7\u5ea6\u5d4c\u5957\uff08\u4e0d\u8981\u8d85\u8fc7 3 \u5c42\uff09</li> <li>\u274c \u5728\u914d\u7f6e\u7ec4\u4e4b\u95f4\u521b\u5efa\u4f9d\u8d56\u5173\u7cfb</li> <li>\u274c \u6df7\u7528\u6241\u5e73\u548c\u5206\u7ec4\u914d\u7f6e</li> <li>\u274c \u914d\u7f6e\u7ec4\u8fc7\u4e8e\u7ec6\u788e</li> </ol>"},{"location":"features/config-grouping/#_16","title":"\u8fc1\u79fb\u6307\u5357","text":""},{"location":"features/config-grouping/#_17","title":"\u4ece\u6241\u5e73\u914d\u7f6e\u8fc1\u79fb\u5230\u5206\u7ec4\u914d\u7f6e","text":""},{"location":"features/config-grouping/#1_1","title":"\u6b65\u9aa4 1: \u521b\u5efa\u914d\u7f6e\u7ec4\u7c7b","text":"<pre><code># \u65e7\u7684\u6241\u5e73\u914d\u7f6e\nclass OldSettings(BaseSettings):\n    DB_HOST: str = \"localhost\"\n    DB_PORT: int = 5432\n    DB_USER: str = \"user\"\n\n# \u65b0\u7684\u5206\u7ec4\u914d\u7f6e\nclass DatabaseSettings(BaseModel):\n    host: str = \"localhost\"\n    port: int = 5432\n    user: str = \"user\"\n\nclass NewSettings(BaseSettings):\n    database: DatabaseSettings = DatabaseSettings()\n</code></pre>"},{"location":"features/config-grouping/#2_1","title":"\u6b65\u9aa4 2: \u66f4\u65b0\u73af\u5883\u53d8\u91cf","text":"<pre><code># \u65e7\u7684\u73af\u5883\u53d8\u91cf\nFASTER_DB_HOST=localhost\nFASTER_DB_PORT=5432\n\n# \u65b0\u7684\u73af\u5883\u53d8\u91cf\uff08\u4f7f\u7528\u53cc\u4e0b\u5212\u7ebf\uff09\nFASTER_DATABASE__HOST=localhost\nFASTER_DATABASE__PORT=5432\n</code></pre>"},{"location":"features/config-grouping/#3_2","title":"\u6b65\u9aa4 3: \u66f4\u65b0\u4ee3\u7801\u4e2d\u7684\u8bbf\u95ee\u65b9\u5f0f","text":"<pre><code># \u65e7\u4ee3\u7801\nhost = settings.DB_HOST\nport = settings.DB_PORT\n\n# \u65b0\u4ee3\u7801\nhost = settings.database.host\nport = settings.database.port\n</code></pre>"},{"location":"features/config-grouping/#4","title":"\u6b65\u9aa4 4: \u63d0\u4f9b\u517c\u5bb9\u5c42\uff08\u53ef\u9009\uff09","text":"<pre><code>class NewSettings(BaseSettings):\n    database: DatabaseSettings\n\n    # \u517c\u5bb9\u65e7\u7684\u8bbf\u95ee\u65b9\u5f0f\n    @property\n    def DB_HOST(self) -&gt; str:\n        return self.database.host\n\n    @property\n    def DB_PORT(self) -&gt; int:\n        return self.database.port\n</code></pre>"},{"location":"features/config-grouping/#_18","title":"\u5b9e\u9645\u6848\u4f8b","text":""},{"location":"features/config-grouping/#1_2","title":"\u6848\u4f8b 1: \u5fae\u670d\u52a1\u914d\u7f6e","text":"<pre><code>class ServiceDiscoverySettings(BaseModel):\n    \"\"\"\u670d\u52a1\u53d1\u73b0\u914d\u7f6e\"\"\"\n    enabled: bool = True\n    consul_host: str = \"localhost\"\n    consul_port: int = 8500\n\nclass TracingSettings(BaseModel):\n    \"\"\"\u94fe\u8def\u8ffd\u8e2a\u914d\u7f6e\"\"\"\n    enabled: bool = False\n    jaeger_host: str = \"localhost\"\n    jaeger_port: int = 6831\n\nclass MicroserviceSettings(BaseSettings):\n    \"\"\"\u5fae\u670d\u52a1\u914d\u7f6e\"\"\"\n    service_name: str = \"my-service\"\n    service_discovery: ServiceDiscoverySettings = ServiceDiscoverySettings()\n    tracing: TracingSettings = TracingSettings()\n</code></pre>"},{"location":"features/config-grouping/#2_2","title":"\u6848\u4f8b 2: \u591a\u6570\u636e\u5e93\u914d\u7f6e","text":"<pre><code>class PrimaryDatabaseSettings(BaseModel):\n    \"\"\"\u4e3b\u6570\u636e\u5e93\u914d\u7f6e\"\"\"\n    host: str = \"primary.db.com\"\n    port: int = 5432\n\nclass ReadReplicaSettings(BaseModel):\n    \"\"\"\u53ea\u8bfb\u526f\u672c\u914d\u7f6e\"\"\"\n    host: str = \"replica.db.com\"\n    port: int = 5432\n\nclass MultiDBSettings(BaseSettings):\n    \"\"\"\u591a\u6570\u636e\u5e93\u914d\u7f6e\"\"\"\n    primary: PrimaryDatabaseSettings = PrimaryDatabaseSettings()\n    replica: ReadReplicaSettings = ReadReplicaSettings()\n</code></pre>"},{"location":"features/config-grouping/#_19","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"features/config-grouping/#q","title":"Q: \u5206\u7ec4\u914d\u7f6e\u662f\u5426\u5f71\u54cd\u6027\u80fd\uff1f","text":"<p>A: \u4e0d\u4f1a\u3002\u914d\u7f6e\u5728\u5e94\u7528\u542f\u52a8\u65f6\u52a0\u8f7d\u4e00\u6b21\uff0c\u5206\u7ec4\u53ea\u662f\u903b\u8f91\u4e0a\u7684\u7ec4\u7ec7\u65b9\u5f0f\uff0c\u4e0d\u5f71\u54cd\u8fd0\u884c\u65f6\u6027\u80fd\u3002</p>"},{"location":"features/config-grouping/#q_1","title":"Q: \u5982\u4f55\u5728\u4e0d\u540c\u73af\u5883\u4f7f\u7528\u4e0d\u540c\u7684\u914d\u7f6e\u7ec4\uff1f","text":"<p>A: \u4f7f\u7528\u5de5\u5382\u51fd\u6570\u6216\u6761\u4ef6\u903b\u8f91\uff1a</p> <pre><code>def get_database_settings(env: str):\n    if env == \"prod\":\n        return DatabaseSettings(type=\"postgres\", host=\"prod.db\")\n    return DatabaseSettings(type=\"sqlite\")\n\nsettings = Settings(database=get_database_settings(os.getenv(\"ENV\")))\n</code></pre>"},{"location":"features/config-grouping/#q_2","title":"Q: \u914d\u7f6e\u7ec4\u53ef\u4ee5\u518d\u5d4c\u5957\u5417\uff1f","text":"<p>A: \u53ef\u4ee5\uff0c\u4f46\u4e0d\u5efa\u8bae\u8d85\u8fc7 2-3 \u5c42\uff1a</p> <pre><code>class CredentialsSettings(BaseModel):\n    user: str\n    password: str\n\nclass DatabaseSettings(BaseModel):\n    host: str\n    credentials: CredentialsSettings  # \u5d4c\u5957\u7684\u914d\u7f6e\u7ec4\n</code></pre>"},{"location":"features/config-grouping/#q_3","title":"Q: \u5982\u4f55\u9a8c\u8bc1\u914d\u7f6e\u7ec4\u4e4b\u95f4\u7684\u5173\u7cfb\uff1f","text":"<p>A: \u4f7f\u7528\u6a21\u578b\u7ea7\u522b\u7684\u9a8c\u8bc1\u5668\uff1a</p> <pre><code>@model_validator(mode=\"after\")\ndef validate_config_relationships(self):\n    if self.server.port == self.database.port:\n        raise ValueError(\"\u670d\u52a1\u5668\u548c\u6570\u636e\u5e93\u4e0d\u80fd\u4f7f\u7528\u76f8\u540c\u7684\u7aef\u53e3\")\n    return self\n</code></pre>"},{"location":"features/config-grouping/#_20","title":"\u603b\u7ed3","text":"<p>\u914d\u7f6e\u5206\u7ec4\u4e0e\u5d4c\u5957\u662f\u73b0\u4ee3\u5e94\u7528\u914d\u7f6e\u7ba1\u7406\u7684\u6700\u4f73\u5b9e\u8df5\uff1a</p> \u65b9\u9762 \u6241\u5e73\u914d\u7f6e \u5206\u7ec4\u914d\u7f6e \u53ef\u8bfb\u6027 \u274c \u5dee \u2705 \u4f18\u79c0 \u7ef4\u62a4\u6027 \u274c \u56f0\u96be \u2705 \u5bb9\u6613 \u7c7b\u578b\u5b89\u5168 \u26a0\ufe0f \u4e00\u822c \u2705 \u5f3a IDE \u652f\u6301 \u26a0\ufe0f \u4e00\u822c \u2705 \u4f18\u79c0 \u53ef\u91cd\u7528\u6027 \u274c \u5dee \u2705 \u4f18\u79c0 \u9a8c\u8bc1\u7cbe\u7ec6\u5ea6 \u26a0\ufe0f \u4e00\u822c \u2705 \u7cbe\u7ec6 \u547d\u540d\u7a7a\u95f4 \u274c \u6613\u51b2\u7a81 \u2705 \u9694\u79bb <p>\u63a8\u8350\u5728\u6240\u6709\u65b0\u9879\u76ee\u4e2d\u4f7f\u7528\u914d\u7f6e\u5206\u7ec4\uff01</p>"},{"location":"features/config-refactoring/","title":"\u914d\u7f6e\u7ed3\u6784\u91cd\u6784\u8bf4\u660e","text":""},{"location":"features/config-refactoring/#_2","title":"\u6982\u8ff0","text":"<p>\u914d\u7f6e\u7cfb\u7edf\u5df2\u7ecf\u91cd\u6784\u4e3a\u66f4\u52a0\u6a21\u5757\u5316\u548c\u6613\u4e8e\u7ef4\u62a4\u7684\u7ed3\u6784\uff0c\u5c06\u914d\u7f6e\u5206\u7ec4\u5230\u72ec\u7acb\u7684\u6587\u4ef6\u4e2d\u3002</p>"},{"location":"features/config-refactoring/#_3","title":"\u65b0\u7684\u6587\u4ef6\u7ed3\u6784","text":"<pre><code>faster_app/settings/\n\u251c\u2500\u2500 groups/                 # \u914d\u7f6e\u7ec4\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 __init__.py        # \u5bfc\u51fa\u6240\u6709\u914d\u7f6e\u7ec4\n\u2502   \u251c\u2500\u2500 server.py          # \u670d\u52a1\u5668\u914d\u7f6e (ServerSettings)\n\u2502   \u251c\u2500\u2500 jwt.py             # JWT \u914d\u7f6e (JWTSettings)\n\u2502   \u251c\u2500\u2500 database.py        # \u6570\u636e\u5e93\u914d\u7f6e (DatabaseSettings)\n\u2502   \u2514\u2500\u2500 log.py             # \u65e5\u5fd7\u914d\u7f6e (LogSettings)\n\u2514\u2500\u2500 builtins/\n    \u2514\u2500\u2500 settings.py        # \u4e3b\u914d\u7f6e\u7c7b (Settings)\n</code></pre>"},{"location":"features/config-refactoring/#_4","title":"\u4e3b\u8981\u6539\u8fdb","text":""},{"location":"features/config-refactoring/#1","title":"1. \u6587\u4ef6\u540d\u7b80\u6d01","text":"<ul> <li>\u2705 \u4e3b\u914d\u7f6e\u7c7b\u540d\u6539\u4e3a <code>Settings</code>\uff08\u800c\u4e0d\u662f <code>GroupedSettings</code>\uff09</li> <li>\u2705 \u6587\u4ef6\u540d\u4fdd\u6301\u7b80\u6d01 <code>settings.py</code></li> </ul>"},{"location":"features/config-refactoring/#2","title":"2. \u914d\u7f6e\u7ec4\u72ec\u7acb\u6587\u4ef6","text":"<p>\u6bcf\u4e2a\u914d\u7f6e\u7ec4\u90fd\u6709\u81ea\u5df1\u7684\u6587\u4ef6\uff0c\u9075\u5faa\u5355\u4e00\u804c\u8d23\u539f\u5219\uff1a</p> <ul> <li><code>server.py</code> - \u670d\u52a1\u5668\u914d\u7f6e\uff08host, port\uff09</li> <li><code>jwt.py</code> - JWT \u914d\u7f6e\uff08secret_key, algorithm, access_token_expire_minutes\uff09</li> <li><code>database.py</code> - \u6570\u636e\u5e93\u914d\u7f6e\uff08type, host, port, user, password, database\uff09</li> <li><code>log.py</code> - \u65e5\u5fd7\u914d\u7f6e\uff08level, format\uff09</li> </ul>"},{"location":"features/config-refactoring/#3","title":"3. \u4ee3\u7801\u9694\u79bb","text":"<ul> <li>\u6bcf\u4e2a\u914d\u7f6e\u7ec4\u72ec\u7acb\u7ef4\u62a4</li> <li>\u4fee\u6539\u67d0\u4e2a\u914d\u7f6e\u7ec4\u4e0d\u5f71\u54cd\u5176\u4ed6</li> <li>\u66f4\u5bb9\u6613\u6d4b\u8bd5\u548c\u8c03\u8bd5</li> </ul>"},{"location":"features/config-refactoring/#4","title":"4. \u5bfc\u5165\u6e05\u6670","text":"<pre><code># \u5bfc\u5165\u914d\u7f6e\u7ec4\nfrom faster_app.settings.groups import (\n    ServerSettings,\n    JWTSettings,\n    DatabaseSettings,\n    LogSettings,\n)\n\n# \u5bfc\u5165\u4e3b\u914d\u7f6e\nfrom faster_app.settings.builtins.settings import Settings\n\n# \u6216\u8005\u4f7f\u7528\u522b\u540d\uff08\u5411\u540e\u517c\u5bb9\uff09\nfrom faster_app.settings.builtins.settings import DefaultSettings\n</code></pre>"},{"location":"features/config-refactoring/#_5","title":"\u4f7f\u7528\u65b9\u5f0f","text":""},{"location":"features/config-refactoring/#_6","title":"\u57fa\u672c\u4f7f\u7528","text":"<pre><code>from faster_app.settings.builtins.settings import Settings\n\n# \u521b\u5efa\u914d\u7f6e\u5b9e\u4f8b\nsettings = Settings()\n\n# \u8bbf\u95ee\u914d\u7f6e\nprint(settings.project_name)           # \u57fa\u7840\u914d\u7f6e\nprint(settings.server.host)            # \u670d\u52a1\u5668\u914d\u7f6e\nprint(settings.jwt.secret_key)         # JWT \u914d\u7f6e\nprint(settings.database.host)          # \u6570\u636e\u5e93\u914d\u7f6e\nprint(settings.log.level)              # \u65e5\u5fd7\u914d\u7f6e\n</code></pre>"},{"location":"features/config-refactoring/#_7","title":"\u81ea\u5b9a\u4e49\u914d\u7f6e\u7ec4","text":"<pre><code>from faster_app.settings.groups import DatabaseSettings\nfrom faster_app.settings.builtins.settings import Settings\n\n# \u521b\u5efa\u81ea\u5b9a\u4e49\u6570\u636e\u5e93\u914d\u7f6e\ncustom_db = DatabaseSettings(\n    type=\"postgres\",\n    host=\"prod.db.com\",\n    port=5432,\n    user=\"prod_user\",\n    password=\"Str0ng!P@ssw0rd\",\n    database=\"production_db\"\n)\n\n# \u4f7f\u7528\u81ea\u5b9a\u4e49\u914d\u7f6e\nsettings = Settings(database=custom_db)\n</code></pre>"},{"location":"features/config-refactoring/#_8","title":"\u73af\u5883\u53d8\u91cf","text":"<p>\u4f7f\u7528\u53cc\u4e0b\u5212\u7ebf <code>__</code> \u8868\u793a\u5d4c\u5957\uff1a</p> <pre><code># \u57fa\u7840\u914d\u7f6e\nexport FASTER_PROJECT_NAME=\"My App\"\nexport FASTER_DEBUG=false\n\n# \u670d\u52a1\u5668\u914d\u7f6e\nexport FASTER_SERVER__HOST=10.0.0.1\nexport FASTER_SERVER__PORT=8000\n\n# JWT \u914d\u7f6e\nexport FASTER_JWT__SECRET_KEY=your-secret-key\nexport FASTER_JWT__ALGORITHM=HS256\n\n# \u6570\u636e\u5e93\u914d\u7f6e\nexport FASTER_DATABASE__TYPE=postgres\nexport FASTER_DATABASE__HOST=db.production.com\nexport FASTER_DATABASE__PASSWORD=your-password\n\n# \u65e5\u5fd7\u914d\u7f6e\nexport FASTER_LOG__LEVEL=INFO\n</code></pre>"},{"location":"features/config-refactoring/#_9","title":"\u5411\u540e\u517c\u5bb9","text":"<p>\u4e3a\u4e86\u4fdd\u6301\u5411\u540e\u517c\u5bb9\uff0c\u63d0\u4f9b\u4e86 <code>DefaultSettings</code> \u522b\u540d\uff1a</p> <pre><code># \u65b0\u65b9\u5f0f\uff08\u63a8\u8350\uff09\nfrom faster_app.settings.builtins.settings import Settings\nsettings = Settings()\n\n# \u65e7\u65b9\u5f0f\uff08\u4ecd\u7136\u53ef\u7528\uff09\nfrom faster_app.settings.builtins.settings import DefaultSettings\nsettings = DefaultSettings()\n\n# DefaultSettings \u662f Settings \u7684\u522b\u540d\nassert DefaultSettings is Settings  # True\n</code></pre>"},{"location":"features/config-refactoring/#_10","title":"\u914d\u7f6e\u53d1\u73b0","text":"<p>\u914d\u7f6e\u53d1\u73b0\u673a\u5236\u5df2\u66f4\u65b0\u4ee5\u652f\u6301\u65b0\u7684\u914d\u7f6e\u7ed3\u6784\uff1a</p> <pre><code>from faster_app.settings.discover import SettingsDiscover\n\n# \u81ea\u52a8\u53d1\u73b0\u548c\u5408\u5e76\u914d\u7f6e\nsettings = SettingsDiscover().merge()\n\n# \u8bbf\u95ee\u914d\u7f6e\u7ec4\nprint(settings.server.host)\nprint(settings.database.type)\n</code></pre>"},{"location":"features/config-refactoring/#_11","title":"\u8fc1\u79fb\u6307\u5357","text":""},{"location":"features/config-refactoring/#_12","title":"\u4ece\u65e7\u7684\u6241\u5e73\u914d\u7f6e\u8fc1\u79fb","text":""},{"location":"features/config-refactoring/#1_1","title":"1. \u66f4\u65b0\u5bfc\u5165","text":"<pre><code># \u65e7\u4ee3\u7801\nfrom faster_app.settings.builtins.settings import DefaultSettings\n\n# \u65b0\u4ee3\u7801\uff08\u63a8\u8350\uff09\nfrom faster_app.settings.builtins.settings import Settings\n\n# \u6216\u4fdd\u6301\u5411\u540e\u517c\u5bb9\nfrom faster_app.settings.builtins.settings import DefaultSettings  # \u4ecd\u7136\u53ef\u7528\n</code></pre>"},{"location":"features/config-refactoring/#2_1","title":"2. \u66f4\u65b0\u914d\u7f6e\u8bbf\u95ee","text":"<pre><code># \u65e7\u4ee3\u7801\nsettings.DB_HOST\nsettings.DB_PORT\nsettings.SECRET_KEY\nsettings.LOG_LEVEL\n\n# \u65b0\u4ee3\u7801\nsettings.database.host\nsettings.database.port\nsettings.jwt.secret_key\nsettings.log.level\n</code></pre>"},{"location":"features/config-refactoring/#3_1","title":"3. \u66f4\u65b0\u73af\u5883\u53d8\u91cf","text":"<pre><code># \u65e7\u73af\u5883\u53d8\u91cf\nFASTER_DB_HOST=localhost\nFASTER_SECRET_KEY=key\n\n# \u65b0\u73af\u5883\u53d8\u91cf\uff08\u4f7f\u7528\u53cc\u4e0b\u5212\u7ebf\uff09\nFASTER_DATABASE__HOST=localhost\nFASTER_JWT__SECRET_KEY=key\n</code></pre>"},{"location":"features/config-refactoring/#4_1","title":"4. \u66f4\u65b0\u65e5\u5fd7\u914d\u7f6e\u5f15\u7528","text":"<p>\u5982\u679c\u4f60\u76f4\u63a5\u4f7f\u7528\u4e86 <code>configs.LOG_LEVEL</code>\uff0c\u9700\u8981\u6539\u4e3a <code>configs.log.level</code>\uff1a</p> <pre><code># \u65e7\u4ee3\u7801\nconfigs.LOG_LEVEL\nconfigs.LOG_FORMAT\n\n# \u65b0\u4ee3\u7801\nconfigs.log.level\nconfigs.log.format\n</code></pre>"},{"location":"features/config-refactoring/#_13","title":"\u4f18\u52bf\u603b\u7ed3","text":"\u65b9\u9762 \u65e7\u7ed3\u6784 \u65b0\u7ed3\u6784 \u6587\u4ef6\u7ec4\u7ec7 \u5355\u4e00\u6587\u4ef6 \u591a\u6587\u4ef6\u5206\u7ec4 \u4ee3\u7801\u9694\u79bb \u274c \u6df7\u5728\u4e00\u8d77 \u2705 \u72ec\u7acb\u6587\u4ef6 \u53ef\u7ef4\u62a4\u6027 \u26a0\ufe0f \u4e00\u822c \u2705 \u4f18\u79c0 \u53ef\u6d4b\u8bd5\u6027 \u26a0\ufe0f \u4e00\u822c \u2705 \u4f18\u79c0 \u5bfc\u5165\u6e05\u6670\u5ea6 \u26a0\ufe0f \u4e00\u822c \u2705 \u4f18\u79c0 \u5355\u4e00\u804c\u8d23 \u274c \u5426 \u2705 \u662f \u6587\u4ef6\u540d \u274c \u5197\u957f \u2705 \u7b80\u6d01"},{"location":"features/config-refactoring/#_14","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"features/config-refactoring/#_15","title":"\u2705 \u63a8\u8350\u505a\u6cd5","text":"<ol> <li> <p>\u4f7f\u7528\u65b0\u7684\u914d\u7f6e\u7ed3\u6784 <pre><code>from faster_app.settings.builtins.settings import Settings\nsettings = Settings()\n</code></pre></p> </li> <li> <p>\u8bbf\u95ee\u914d\u7f6e\u65f6\u4f7f\u7528\u5206\u7ec4 <pre><code>settings.server.host\nsettings.database.type\nsettings.jwt.algorithm\n</code></pre></p> </li> <li> <p>\u914d\u7f6e\u7ec4\u72ec\u7acb\u4f7f\u7528 <pre><code>from faster_app.settings.groups import DatabaseSettings\ndb = DatabaseSettings(type=\"postgres\")\n</code></pre></p> </li> <li> <p>\u73af\u5883\u53d8\u91cf\u4f7f\u7528\u53cc\u4e0b\u5212\u7ebf <pre><code>export FASTER_DATABASE__HOST=localhost\n</code></pre></p> </li> </ol>"},{"location":"features/config-refactoring/#_16","title":"\u274c \u907f\u514d\u7684\u505a\u6cd5","text":"<ol> <li>\u274c \u6df7\u7528\u65e7\u7684\u6241\u5e73\u8bbf\u95ee\u65b9\u5f0f\uff08\u5df2\u4e0d\u652f\u6301\uff09</li> <li>\u274c \u76f4\u63a5\u4fee\u6539\u914d\u7f6e\u7ec4\u5185\u90e8\u5b9e\u73b0\uff08\u4f7f\u7528\u7ee7\u627f\uff09</li> <li>\u274c \u8de8\u914d\u7f6e\u7ec4\u521b\u5efa\u4f9d\u8d56\u5173\u7cfb</li> </ol>"},{"location":"features/config-refactoring/#_17","title":"\u6545\u969c\u6392\u67e5","text":""},{"location":"features/config-refactoring/#1-attributeerror-settings-object-has-no-attribute-db_host","title":"\u95ee\u9898 1: AttributeError: 'Settings' object has no attribute 'DB_HOST'","text":"<p>\u539f\u56e0\uff1a \u4f7f\u7528\u4e86\u65e7\u7684\u6241\u5e73\u914d\u7f6e\u5b57\u6bb5\u540d</p> <p>\u89e3\u51b3\uff1a <pre><code># \u274c \u9519\u8bef\nsettings.DB_HOST\n\n# \u2705 \u6b63\u786e\nsettings.database.host\n</code></pre></p>"},{"location":"features/config-refactoring/#2_2","title":"\u95ee\u9898 2: \u73af\u5883\u53d8\u91cf\u4e0d\u751f\u6548","text":"<p>\u539f\u56e0\uff1a \u4f7f\u7528\u4e86\u65e7\u7684\u73af\u5883\u53d8\u91cf\u683c\u5f0f</p> <p>\u89e3\u51b3\uff1a <pre><code># \u274c \u9519\u8bef\nexport FASTER_DB_HOST=localhost\n\n# \u2705 \u6b63\u786e\nexport FASTER_DATABASE__HOST=localhost\n</code></pre></p>"},{"location":"features/config-refactoring/#3_2","title":"\u95ee\u9898 3: \u5bfc\u5165\u9519\u8bef","text":"<p>\u539f\u56e0\uff1a \u4f7f\u7528\u4e86\u65e7\u7684\u5bfc\u5165\u8def\u5f84</p> <p>\u89e3\u51b3\uff1a <pre><code># \u274c \u53ef\u80fd\u5931\u8d25\nfrom faster_app.settings.groups.server import ServerSettings\n\n# \u2705 \u63a8\u8350\nfrom faster_app.settings.groups import ServerSettings\n</code></pre></p>"},{"location":"features/config-refactoring/#_18","title":"\u603b\u7ed3","text":"<p>\u65b0\u7684\u914d\u7f6e\u7ed3\u6784\u63d0\u4f9b\u4e86\uff1a</p> <ul> <li>\u2705 \u66f4\u6e05\u6670\u7684\u4ee3\u7801\u7ec4\u7ec7</li> <li>\u2705 \u66f4\u597d\u7684\u53ef\u7ef4\u62a4\u6027</li> <li>\u2705 \u66f4\u5f3a\u7684\u4ee3\u7801\u9694\u79bb</li> <li>\u2705 \u66f4\u7b80\u6d01\u7684\u6587\u4ef6\u547d\u540d</li> <li>\u2705 \u5b8c\u6574\u7684\u5411\u540e\u517c\u5bb9</li> <li>\u2705 \u7b26\u5408\u5355\u4e00\u804c\u8d23\u539f\u5219</li> </ul> <p>\u5efa\u8bae\u5728\u6240\u6709\u65b0\u4ee3\u7801\u4e2d\u4f7f\u7528\u65b0\u7684\u914d\u7f6e\u7ed3\u6784\uff01</p>"},{"location":"features/crud-router/","title":"CRUD Router - \u4e09\u79cd\u5f00\u53d1\u6a21\u5f0f","text":"<p>Faster APP \u63d0\u4f9b\u4e86\u5f3a\u5927\u7684 CRUD Router \u529f\u80fd\uff0c\u8ba9\u4f60\u53ef\u4ee5\u7528**\u6700\u5c11 5 \u884c\u4ee3\u7801**\u5b8c\u6210\u6807\u51c6\u7684\u589e\u5220\u6539\u67e5\u63a5\u53e3\u3002Demo \u5e94\u7528\u5c55\u793a\u4e86\u4e09\u79cd\u4e0d\u540c\u7684\u5f00\u53d1\u6a21\u5f0f\uff0c\u6ee1\u8db3\u4ece\u5feb\u901f\u539f\u578b\u5230\u590d\u6742\u4e1a\u52a1\u7684\u5404\u79cd\u9700\u6c42\u3002</p>"},{"location":"features/crud-router/#_1","title":"\ud83d\udcca \u4e09\u79cd\u6a21\u5f0f\u5bf9\u6bd4","text":"\u6a21\u5f0f \u4ee3\u7801\u91cf \u7075\u6d3b\u6027 \u9002\u7528\u573a\u666f \u63a8\u8350\u5ea6 \u5feb\u901f\u6a21\u5f0f 5 \u884c \u2b50 \u5feb\u901f\u539f\u578b\u3001\u6807\u51c6 CRUD \u2b50\u2b50\u2b50 \u5e73\u8861\u6a21\u5f0f 10-20 \u884c \u2b50\u2b50\u2b50 \u5927\u591a\u6570\u4e1a\u52a1\u573a\u666f \u2b50\u2b50\u2b50\u2b50\u2b50 \u5b8c\u5168\u63a7\u5236 50+ \u884c \u2b50\u2b50\u2b50\u2b50\u2b50 \u590d\u6742\u4e1a\u52a1\u903b\u8f91 \u2b50\u2b50\u2b50"},{"location":"features/crud-router/#_2","title":"\ud83d\ude80 \u6a21\u5f0f\u4e00\uff1a\u5feb\u901f\u6a21\u5f0f","text":"<p>5 \u884c\u4ee3\u7801\u5b8c\u6210\u6807\u51c6 CRUD\uff0c\u9002\u5408\u5feb\u901f\u539f\u578b\u5f00\u53d1\u548c\u6807\u51c6\u4e1a\u52a1\u573a\u666f\u3002</p>"},{"location":"features/crud-router/#_3","title":"\u4ee3\u7801\u793a\u4f8b","text":"<pre><code>from faster_app.apps.demo.models import DemoModel\nfrom faster_app.utils.crud import CRUDRouter\n\n# \u521b\u5efa\u8def\u7531 - \u81ea\u52a8\u751f\u6210\u6240\u6709 CRUD \u63a5\u53e3\ndemo_quick_router = CRUDRouter(\n    model=DemoModel,\n    prefix=\"/demos-quick\",\n    tags=[\"Demo - \u5feb\u901f\u6a21\u5f0f\"],\n    operations=\"CRUDL\",  # C:\u521b\u5efa R:\u8bfb\u53d6 U:\u66f4\u65b0 D:\u5220\u9664 L:\u5217\u8868\n).get_router()\n</code></pre>"},{"location":"features/crud-router/#_4","title":"\u81ea\u52a8\u751f\u6210\u7684\u63a5\u53e3","text":"\u65b9\u6cd5 \u8def\u5f84 \u529f\u80fd \u64cd\u4f5c\u7b26 <code>GET</code> <code>/demos-quick/</code> \u5217\u8868\u67e5\u8be2\uff08\u5206\u9875\uff09 L <code>POST</code> <code>/demos-quick/</code> \u521b\u5efa\u8bb0\u5f55 C <code>GET</code> <code>/demos-quick/{id}</code> \u67e5\u8be2\u5355\u4e2a R <code>PUT</code> <code>/demos-quick/{id}</code> \u66f4\u65b0\u8bb0\u5f55 U <code>DELETE</code> <code>/demos-quick/{id}</code> \u5220\u9664\u8bb0\u5f55 D"},{"location":"features/crud-router/#_5","title":"\u53c2\u6570\u8bf4\u660e","text":"<pre><code>CRUDRouter(\n    model=DemoModel,              # \u5fc5\u586b\uff1aTortoise ORM \u6a21\u578b\n    prefix=\"/demos-quick\",        # \u5fc5\u586b\uff1a\u8def\u7531\u524d\u7f00\n    tags=[\"Demo\"],                # \u53ef\u9009\uff1aSwagger \u6807\u7b7e\n    operations=\"CRUDL\",           # \u53ef\u9009\uff1a\u6307\u5b9a\u5f00\u653e\u7684\u64cd\u4f5c\uff0c\u9ed8\u8ba4\u5168\u90e8\n    create_schema=None,           # \u53ef\u9009\uff1a\u81ea\u5b9a\u4e49\u521b\u5efa Schema\n    update_schema=None,           # \u53ef\u9009\uff1a\u81ea\u5b9a\u4e49\u66f4\u65b0 Schema\n    response_schema=None,         # \u53ef\u9009\uff1a\u81ea\u5b9a\u4e49\u54cd\u5e94 Schema\n    paginate=True,                # \u53ef\u9009\uff1a\u662f\u5426\u542f\u7528\u5206\u9875\uff0c\u9ed8\u8ba4 True\n)\n</code></pre>"},{"location":"features/crud-router/#_6","title":"\u64cd\u4f5c\u7b26\u7ec4\u5408","text":"<p>\u4f60\u53ef\u4ee5\u901a\u8fc7 <code>operations</code> \u53c2\u6570\u7075\u6d3b\u63a7\u5236\u5f00\u653e\u54ea\u4e9b\u63a5\u53e3\uff1a</p> <pre><code># \u53ea\u8bfb\u6a21\u5f0f\uff1a\u4ec5\u67e5\u8be2\u548c\u5217\u8868\noperations=\"RL\"\n\n# \u4e0d\u5141\u8bb8\u5220\u9664\uff1a\u521b\u5efa\u3001\u8bfb\u53d6\u3001\u66f4\u65b0\u3001\u5217\u8868\noperations=\"CRUL\"\n\n# \u4ec5\u521b\u5efa\u548c\u67e5\u8be2\noperations=\"CR\"\n\n# \u5b8c\u6574 CRUD\uff08\u9ed8\u8ba4\u503c\uff09\noperations=\"CRUDL\"\n</code></pre>"},{"location":"features/crud-router/#_7","title":"\u9002\u7528\u573a\u666f","text":"<ul> <li>\u2705 \u5feb\u901f\u539f\u578b\u5f00\u53d1</li> <li>\u2705 \u6807\u51c6\u7684\u6570\u636e\u7ba1\u7406\u754c\u9762</li> <li>\u2705 \u5185\u90e8\u7ba1\u7406\u7cfb\u7edf</li> <li>\u2705 \u7b80\u5355\u7684\u8d44\u6e90 API</li> </ul>"},{"location":"features/crud-router/#_8","title":"\u2696\ufe0f \u6a21\u5f0f\u4e8c\uff1a\u5e73\u8861\u6a21\u5f0f\uff08\u63a8\u8350\uff09","text":"<p>\u4f7f\u7528**\u81ea\u5b9a\u4e49 Schema**\uff0c\u4fdd\u7559\u7075\u6d3b\u6027\uff0c\u9002\u5408\u5927\u591a\u6570\u4e1a\u52a1\u573a\u666f\u3002</p>"},{"location":"features/crud-router/#_9","title":"\u4ee3\u7801\u793a\u4f8b","text":"<pre><code>from faster_app.apps.demo.models import DemoModel\nfrom faster_app.apps.demo.schemas import DemoCreate, DemoUpdate\nfrom faster_app.utils.crud import CRUDRouter\n\n# \u4f7f\u7528\u81ea\u5b9a\u4e49 Schema\ndemo_balanced_router = CRUDRouter(\n    model=DemoModel,\n    create_schema=DemoCreate,  # \u81ea\u5b9a\u4e49\u521b\u5efa Schema\uff08\u5e26\u9a8c\u8bc1\uff09\n    update_schema=DemoUpdate,  # \u81ea\u5b9a\u4e49\u66f4\u65b0 Schema\uff08\u5e26\u9a8c\u8bc1\uff09\n    prefix=\"/demos\",\n    tags=[\"Demo - \u5e73\u8861\u6a21\u5f0f\"],\n).get_router()\n\n\n# \u5728\u81ea\u52a8\u751f\u6210\u7684\u57fa\u7840\u4e0a\uff0c\u6dfb\u52a0\u81ea\u5b9a\u4e49\u8def\u7531\n@demo_balanced_router.get(\"/statistics\")\nasync def get_statistics():\n    \"\"\"\u83b7\u53d6\u7edf\u8ba1\u4fe1\u606f - \u81ea\u5b9a\u4e49\u7aef\u70b9\"\"\"\n    total = await DemoModel.all().count()\n    active = await DemoModel.filter(status=1).count()\n\n    return {\n        \"total\": total,\n        \"active\": active,\n    }\n\n\n@demo_balanced_router.post(\"/batch-create\")\nasync def batch_create(items_data: list[DemoCreate]):\n    \"\"\"\u6279\u91cf\u521b\u5efa - \u81ea\u5b9a\u4e49\u7aef\u70b9\"\"\"\n    created_records = []\n    for create_data in items_data:\n        record = await DemoModel.create(**create_data.model_dump())\n        created_records.append(record)\n\n    return {\"count\": len(created_records)}\n</code></pre>"},{"location":"features/crud-router/#schema","title":"\u81ea\u5b9a\u4e49 Schema \u793a\u4f8b","text":""},{"location":"features/crud-router/#schema_1","title":"\u521b\u5efa Schema","text":"<pre><code>from pydantic import BaseModel, Field, field_validator\n\nclass DemoCreate(BaseModel):\n    \"\"\"\u521b\u5efa Demo \u7684\u8bf7\u6c42 Schema - \u81ea\u5b9a\u4e49\u9a8c\u8bc1\u548c\u63cf\u8ff0\"\"\"\n\n    name: str = Field(\n        ...,\n        min_length=1,\n        max_length=255,\n        description=\"Demo \u540d\u79f0\",\n        examples=[\"\u6211\u7684\u7b2c\u4e00\u4e2a Demo\"],\n    )\n    status: int = Field(\n        default=1,\n        description=\"\u72b6\u6001\uff1a1-\u6fc0\u6d3b\uff0c0-\u672a\u6fc0\u6d3b\",\n    )\n\n    @field_validator(\"name\")\n    @classmethod\n    def validate_name(cls, v: str) -&gt; str:\n        \"\"\"\u81ea\u5b9a\u4e49\u9a8c\u8bc1\uff1a\u540d\u79f0\u4e0d\u80fd\u5305\u542b\u7279\u6b8a\u5b57\u7b26\"\"\"\n        if any(char in v for char in [\"&lt;\", \"&gt;\", \"&amp;\", \"'\"]):\n            raise ValueError(\"\u540d\u79f0\u4e0d\u80fd\u5305\u542b\u7279\u6b8a\u5b57\u7b26\")\n        return v.strip()\n</code></pre>"},{"location":"features/crud-router/#schema_2","title":"\u66f4\u65b0 Schema","text":"<pre><code>class DemoUpdate(BaseModel):\n    \"\"\"\u66f4\u65b0 Demo \u7684\u8bf7\u6c42 Schema - \u6240\u6709\u5b57\u6bb5\u53ef\u9009\"\"\"\n\n    name: str | None = Field(\n        None,\n        min_length=1,\n        max_length=255,\n        description=\"Demo \u540d\u79f0\"\n    )\n    status: int | None = Field(\n        None,\n        description=\"\u72b6\u6001\uff1a1-\u6fc0\u6d3b\uff0c0-\u672a\u6fc0\u6d3b\"\n    )\n</code></pre>"},{"location":"features/crud-router/#_10","title":"\u6838\u5fc3\u4f18\u52bf","text":"\u7279\u6027 \u8bf4\u660e \u81ea\u52a8 CRUD \u6807\u51c6\u63a5\u53e3\u81ea\u52a8\u751f\u6210\uff0c\u7701\u65f6\u7701\u529b \u81ea\u5b9a\u4e49\u9a8c\u8bc1 Schema \u652f\u6301 Pydantic \u9a8c\u8bc1\u89c4\u5219 \u6269\u5c55\u8def\u7531 \u53ef\u4ee5\u5728\u81ea\u52a8\u8def\u7531\u57fa\u7840\u4e0a\u6dfb\u52a0\u81ea\u5b9a\u4e49\u7aef\u70b9 \u7c7b\u578b\u5b89\u5168 \u5b8c\u6574\u7684\u7c7b\u578b\u63d0\u793a\u548c IDE \u652f\u6301"},{"location":"features/crud-router/#_11","title":"\u9002\u7528\u573a\u666f","text":"<ul> <li>\u2705 \u5927\u591a\u6570\u4e1a\u52a1\u573a\u666f\uff08\u63a8\u8350\uff09</li> <li>\u2705 \u9700\u8981\u6570\u636e\u9a8c\u8bc1</li> <li>\u2705 \u9700\u8981\u81ea\u5b9a\u4e49\u5b57\u6bb5\u63cf\u8ff0</li> <li>\u2705 \u9700\u8981\u989d\u5916\u7684\u4e1a\u52a1\u63a5\u53e3</li> </ul>"},{"location":"features/crud-router/#_12","title":"\ud83c\udfaf \u6a21\u5f0f\u4e09\uff1a\u5b8c\u5168\u63a7\u5236\u6a21\u5f0f","text":"<p>\u4f7f\u7528 CRUDBase \u5de5\u5177\u7c7b\uff0c\u624b\u52a8\u5b9a\u4e49\u6240\u6709\u8def\u7531\uff0c\u9002\u5408\u9700\u8981\u5b8c\u5168\u63a7\u5236\u7684\u590d\u6742\u4e1a\u52a1\u573a\u666f\u3002</p>"},{"location":"features/crud-router/#_13","title":"\u4ee3\u7801\u793a\u4f8b","text":"<pre><code>from fastapi import APIRouter\nfrom faster_app.apps.demo.models import DemoModel\nfrom faster_app.apps.demo.schemas import DemoCreate, DemoUpdate\nfrom faster_app.utils.crud import CRUDBase\nfrom faster_app.utils.response import ApiResponse\nfrom http import HTTPStatus\n\n# \u624b\u52a8\u521b\u5efa\u8def\u7531\ndemo_custom_router = APIRouter(\n    prefix=\"/demos-custom\",\n    tags=[\"Demo - \u5b8c\u5168\u63a7\u5236\u6a21\u5f0f\"]\n)\n\n# \u4f7f\u7528 CRUD \u5de5\u5177\u7c7b\u5904\u7406\u6570\u636e\u64cd\u4f5c\ndemo_crud = CRUDBase(\n    model=DemoModel,\n    create_schema=DemoCreate,\n    update_schema=DemoUpdate,\n)\n\n\n@demo_custom_router.get(\"/\")\nasync def list_demos(\n    skip: int = 0,\n    limit: int = 100,\n    status: int | None = None,\n):\n    \"\"\"\n    \u81ea\u5b9a\u4e49\u5217\u8868\u67e5\u8be2\n    - \u652f\u6301\u6309\u72b6\u6001\u7b5b\u9009\n    - \u81ea\u5b9a\u4e49\u5206\u9875\u53c2\u6570\n    - \u81ea\u5b9a\u4e49\u54cd\u5e94\u683c\u5f0f\n    \"\"\"\n    filters = {}\n    if status is not None:\n        filters[\"status\"] = status\n\n    # \u4f7f\u7528 CRUD \u5de5\u5177\u7c7b\u67e5\u8be2\n    records = await demo_crud.get_multi(\n        skip=skip,\n        limit=limit,\n        filters=filters,\n        order_by=[\"-created_at\"],  # \u6309\u521b\u5efa\u65f6\u95f4\u5012\u5e8f\n    )\n\n    total = await DemoModel.filter(**filters).count()\n\n    return ApiResponse.success(\n        data={\n            \"items\": [\n                await demo_crud.response_schema.from_tortoise_orm(record)\n                for record in records\n            ],\n            \"total\": total,\n            \"skip\": skip,\n            \"limit\": limit,\n        }\n    )\n\n\n@demo_custom_router.post(\"/\")\nasync def create_demo(create_data: DemoCreate):\n    \"\"\"\n    \u81ea\u5b9a\u4e49\u521b\u5efa\u63a5\u53e3\n    - \u6dfb\u52a0\u4e1a\u52a1\u903b\u8f91\n    - \u81ea\u5b9a\u4e49\u54cd\u5e94\u683c\u5f0f\n    \"\"\"\n    # \u4e1a\u52a1\u903b\u8f91\uff1a\u68c0\u67e5\u540d\u79f0\u662f\u5426\u91cd\u590d\n    existing = await DemoModel.filter(name=create_data.name).first()\n    if existing:\n        return ApiResponse.error(\n            message=\"\u540d\u79f0\u5df2\u5b58\u5728\",\n            status_code=HTTPStatus.BAD_REQUEST\n        )\n\n    # \u4f7f\u7528 CRUD \u5de5\u5177\u7c7b\u521b\u5efa\n    record = await demo_crud.create(create_data)\n\n    return ApiResponse.success(\n        data=await demo_crud.response_schema.from_tortoise_orm(record),\n        message=\"\u521b\u5efa\u6210\u529f\",\n    )\n\n\n@demo_custom_router.get(\"/{record_id}\")\nasync def get_demo(record_id: str):\n    \"\"\"\u81ea\u5b9a\u4e49\u67e5\u8be2\u5355\u4e2a\u63a5\u53e3\"\"\"\n    record = await demo_crud.get(record_id)\n    if not record:\n        return ApiResponse.error(\n            message=\"\u8bb0\u5f55\u4e0d\u5b58\u5728\",\n            status_code=HTTPStatus.NOT_FOUND\n        )\n\n    return ApiResponse.success(\n        data=await demo_crud.response_schema.from_tortoise_orm(record)\n    )\n\n\n@demo_custom_router.put(\"/{record_id}\")\nasync def update_demo(record_id: str, update_data: DemoUpdate):\n    \"\"\"\u81ea\u5b9a\u4e49\u66f4\u65b0\u63a5\u53e3\"\"\"\n    record = await demo_crud.update(record_id, update_data)\n    if not record:\n        return ApiResponse.error(\n            message=\"\u8bb0\u5f55\u4e0d\u5b58\u5728\",\n            status_code=HTTPStatus.NOT_FOUND\n        )\n\n    return ApiResponse.success(\n        data=await demo_crud.response_schema.from_tortoise_orm(record),\n        message=\"\u66f4\u65b0\u6210\u529f\",\n    )\n\n\n@demo_custom_router.delete(\"/{record_id}\")\nasync def delete_demo(record_id: str):\n    \"\"\"\u81ea\u5b9a\u4e49\u5220\u9664\u63a5\u53e3\"\"\"\n    success = await demo_crud.delete(record_id)\n    if not success:\n        return ApiResponse.error(\n            message=\"\u8bb0\u5f55\u4e0d\u5b58\u5728\",\n            status_code=HTTPStatus.NOT_FOUND\n        )\n\n    return ApiResponse.success(message=\"\u5220\u9664\u6210\u529f\")\n</code></pre>"},{"location":"features/crud-router/#crudbase","title":"CRUDBase \u5de5\u5177\u7c7b\u65b9\u6cd5","text":"\u65b9\u6cd5 \u8bf4\u660e \u8fd4\u56de\u503c <code>get(id)</code> \u67e5\u8be2\u5355\u4e2a\u8bb0\u5f55 Model \u5bf9\u8c61\u6216 None <code>get_multi(skip, limit, filters, order_by)</code> \u67e5\u8be2\u591a\u4e2a\u8bb0\u5f55 List[Model] <code>create(schema)</code> \u521b\u5efa\u8bb0\u5f55 Model \u5bf9\u8c61 <code>update(id, schema)</code> \u66f4\u65b0\u8bb0\u5f55 Model \u5bf9\u8c61\u6216 None <code>delete(id)</code> \u5220\u9664\u8bb0\u5f55 bool"},{"location":"features/crud-router/#_14","title":"\u9002\u7528\u573a\u666f","text":"<ul> <li>\u2705 \u590d\u6742\u7684\u4e1a\u52a1\u903b\u8f91</li> <li>\u2705 \u9700\u8981\u81ea\u5b9a\u4e49\u9519\u8bef\u5904\u7406</li> <li>\u2705 \u9700\u8981\u7cbe\u7ec6\u7684\u6743\u9650\u63a7\u5236</li> <li>\u2705 \u975e\u6807\u51c6\u7684 REST \u63a5\u53e3</li> <li>\u2705 \u9700\u8981\u6dfb\u52a0\u65e5\u5fd7\u3001\u76d1\u63a7\u7b49\u6a2a\u5207\u5173\u6ce8\u70b9</li> </ul>"},{"location":"features/crud-router/#_15","title":"\ud83c\udfa8 \u5b9e\u6218\u793a\u4f8b","text":""},{"location":"features/crud-router/#1-api","title":"\u793a\u4f8b 1\uff1a\u53ea\u8bfb API","text":"<pre><code># \u53ea\u63d0\u4f9b\u67e5\u8be2\u63a5\u53e3\uff0c\u4e0d\u5141\u8bb8\u4fee\u6539\nreadonly_router = CRUDRouter(\n    model=DemoModel,\n    prefix=\"/demos-readonly\",\n    tags=[\"\u53ea\u8bfb\u6a21\u5f0f\"],\n    operations=\"RL\",  # \u53ea\u6709 Read \u548c List\n).get_router()\n</code></pre>"},{"location":"features/crud-router/#2","title":"\u793a\u4f8b 2\uff1a\u7ed3\u5408\u6743\u9650\u63a7\u5236","text":"<pre><code>from fastapi import Depends\nfrom faster_app.utils.auth import get_current_user\n\nprotected_router = CRUDRouter(\n    model=DemoModel,\n    prefix=\"/demos-protected\",\n    tags=[\"\u9700\u8981\u8ba4\u8bc1\"],\n).get_router()\n\n# \u4e3a\u6240\u6709\u8def\u7531\u6dfb\u52a0\u4f9d\u8d56\nprotected_router.dependencies = [Depends(get_current_user)]\n</code></pre>"},{"location":"features/crud-router/#3","title":"\u793a\u4f8b 3\uff1a\u81ea\u5b9a\u4e49\u5206\u9875","text":"<pre><code>from fastapi_pagination import Page, add_pagination\n\n# \u4f7f\u7528 fastapi-pagination\ndemo_router = CRUDRouter(\n    model=DemoModel,\n    prefix=\"/demos\",\n    paginate=True,  # \u542f\u7528\u5206\u9875\n).get_router()\n\nadd_pagination(demo_router)\n</code></pre>"},{"location":"features/crud-router/#_16","title":"\ud83d\udca1 \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"features/crud-router/#1","title":"1\ufe0f\u20e3 \u9009\u62e9\u5408\u9002\u7684\u6a21\u5f0f","text":"<pre><code># \u2705 \u63a8\u8350\uff1a\u4f18\u5148\u4f7f\u7528\u5e73\u8861\u6a21\u5f0f\n# \u517c\u987e\u5f00\u53d1\u6548\u7387\u548c\u4e1a\u52a1\u7075\u6d3b\u6027\ndemo_router = CRUDRouter(\n    model=DemoModel,\n    create_schema=DemoCreate,\n    update_schema=DemoUpdate,\n    prefix=\"/demos\",\n).get_router()\n\n# \u274c \u4e0d\u63a8\u8350\uff1a\u8fc7\u5ea6\u4f7f\u7528\u5b8c\u5168\u63a7\u5236\u6a21\u5f0f\n# \u9664\u975e\u771f\u7684\u9700\u8981\u590d\u6742\u903b\u8f91\uff0c\u5426\u5219\u4f1a\u589e\u52a0\u7ef4\u62a4\u6210\u672c\n</code></pre>"},{"location":"features/crud-router/#2-schema","title":"2\ufe0f\u20e3 \u5408\u7406\u7ec4\u7ec7 Schema","text":"<pre><code># \u521b\u5efa Schema - \u5fc5\u586b\u5b57\u6bb5\nclass DemoCreate(BaseModel):\n    name: str\n    description: str\n\n# \u66f4\u65b0 Schema - \u6240\u6709\u5b57\u6bb5\u53ef\u9009\nclass DemoUpdate(BaseModel):\n    name: str | None = None\n    description: str | None = None\n\n# \u54cd\u5e94 Schema - \u5305\u542b\u989d\u5916\u5b57\u6bb5\nclass DemoResponse(BaseModel):\n    id: UUID\n    name: str\n    description: str\n    created_at: datetime\n    updated_at: datetime\n</code></pre>"},{"location":"features/crud-router/#3_1","title":"3\ufe0f\u20e3 \u6dfb\u52a0\u4e1a\u52a1\u9a8c\u8bc1","text":"<pre><code>from pydantic import field_validator\n\nclass DemoCreate(BaseModel):\n    name: str\n    email: str\n\n    @field_validator(\"email\")\n    @classmethod\n    def validate_email(cls, v: str) -&gt; str:\n        if \"@\" not in v:\n            raise ValueError(\"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e\")\n        return v.lower()\n</code></pre>"},{"location":"features/crud-router/#4","title":"4\ufe0f\u20e3 \u7edf\u4e00\u54cd\u5e94\u683c\u5f0f","text":"<pre><code>from faster_app.utils.response import ApiResponse\n\n@demo_router.post(\"/\")\nasync def create_demo(data: DemoCreate):\n    record = await DemoModel.create(**data.model_dump())\n\n    # \u4f7f\u7528\u7edf\u4e00\u54cd\u5e94\u683c\u5f0f\n    return ApiResponse.success(\n        data=record,\n        message=\"\u521b\u5efa\u6210\u529f\"\n    )\n</code></pre>"},{"location":"features/crud-router/#_17","title":"\ud83d\udd17 \u76f8\u5173\u94fe\u63a5","text":"<ul> <li>\u6a21\u578b\u57fa\u7c7b - \u4e86\u89e3 UUIDModel\u3001DateTimeModel \u7b49\u57fa\u7c7b</li> <li>\u8def\u7531\u7ba1\u7406 - \u8def\u7531\u81ea\u52a8\u53d1\u73b0\u673a\u5236</li> <li>API \u5de5\u5177 - CRUDRouter \u548c CRUDBase API \u53c2\u8003</li> <li>\u6700\u4f73\u5b9e\u8df5 - API \u8bbe\u8ba1\u6700\u4f73\u5b9e\u8df5</li> </ul>"},{"location":"features/crud-router/#_18","title":"\ud83c\udfaf \u5c0f\u7ed3","text":"\u6a21\u5f0f \u4f55\u65f6\u4f7f\u7528 \u5feb\u901f\u6a21\u5f0f \u6807\u51c6 CRUD\uff0c\u5feb\u901f\u539f\u578b\uff0c\u5185\u90e8\u5de5\u5177 \u5e73\u8861\u6a21\u5f0f \u5927\u591a\u6570\u4e1a\u52a1\u573a\u666f\uff08\u63a8\u8350\uff09 \u5b8c\u5168\u63a7\u5236 \u590d\u6742\u4e1a\u52a1\uff0c\u7279\u6b8a\u9700\u6c42\uff0c\u7cbe\u7ec6\u63a7\u5236 <p>\u63a8\u8350\u505a\u6cd5</p> <p>\u4ece**\u5e73\u8861\u6a21\u5f0f**\u5f00\u59cb\uff0c\u9047\u5230\u7279\u6b8a\u9700\u6c42\u65f6\u518d\u8003\u8651**\u5b8c\u5168\u63a7\u5236\u6a21\u5f0f**\u3002\u907f\u514d\u8fc7\u65e9\u4f18\u5316\u548c\u8fc7\u5ea6\u8bbe\u8ba1\u3002</p> <p>\u73b0\u5728\u4f60\u5df2\u7ecf\u638c\u63e1\u4e86 Faster APP \u7684 CRUD Router \u4e09\u79cd\u5f00\u53d1\u6a21\u5f0f\uff0c\u8d76\u5feb\u5728\u4f60\u7684\u9879\u76ee\u4e2d\u5c1d\u8bd5\u5427\uff01\ud83d\ude80</p>"},{"location":"features/database-schema/","title":"\u6570\u636e\u5e93 Schema \u652f\u6301","text":""},{"location":"features/database-schema/#_1","title":"\u6982\u8ff0","text":"<p>\u4e3a\u4e86\u652f\u6301\u591a\u79df\u6237\u67b6\u6784\u548c\u6570\u636e\u9694\u79bb\uff0cFaster APP \u652f\u6301\u901a\u8fc7 \u6570\u636e\u5e93 schema \u6765\u533a\u5206\u548c\u9694\u79bb\u6570\u636e\u3002\u7279\u522b\u9002\u7528\u4e8e PostgreSQL \u7684 schema \u7279\u6027\u3002</p>"},{"location":"features/database-schema/#database-schema","title":"\u4ec0\u4e48\u662f Database Schema\uff1f","text":"<p>Schema \u662f\u6570\u636e\u5e93\u4e2d\u7684\u903b\u8f91\u547d\u540d\u7a7a\u95f4\uff0c\u7528\u4e8e\u7ec4\u7ec7\u548c\u9694\u79bb\u6570\u636e\u5e93\u5bf9\u8c61\uff08\u8868\u3001\u89c6\u56fe\u3001\u51fd\u6570\u7b49\uff09\u3002</p>"},{"location":"features/database-schema/#_2","title":"\u5404\u6570\u636e\u5e93\u7684\u652f\u6301\u60c5\u51b5","text":"\u6570\u636e\u5e93 Schema \u652f\u6301 \u8bf4\u660e PostgreSQL \u2705 \u5b8c\u5168\u652f\u6301 Schema \u662f\u4e00\u7b49\u516c\u6c11\uff0c\u9ed8\u8ba4\u4e3a <code>public</code> MySQL \u26a0\ufe0f \u6709\u9650\u652f\u6301 MySQL \u4e2d schema = database SQLite \u274c \u4e0d\u652f\u6301 SQLite \u6ca1\u6709 schema \u6982\u5ff5"},{"location":"features/database-schema/#schema_1","title":"\u4e3a\u4ec0\u4e48\u9700\u8981 Schema\uff1f","text":""},{"location":"features/database-schema/#_3","title":"\u2705 \u4f18\u52bf","text":"<ol> <li>\u591a\u79df\u6237\u9694\u79bb - \u6bcf\u4e2a\u79df\u6237\u4e00\u4e2a schema\uff0c\u6570\u636e\u9694\u79bb\u4f46\u5171\u4eab\u6570\u636e\u5e93</li> <li>\u73af\u5883\u9694\u79bb - \u5728\u540c\u4e00\u6570\u636e\u5e93\u4e2d\u9694\u79bb dev/test/staging \u6570\u636e</li> <li>\u6743\u9650\u7ba1\u7406 - \u7cbe\u7ec6\u5316\u7684 schema \u7ea7\u522b\u6743\u9650\u63a7\u5236</li> <li>\u903b\u8f91\u5206\u7ec4 - \u6309\u4e1a\u52a1\u6a21\u5757\u7ec4\u7ec7\u8868\u7ed3\u6784</li> <li>\u964d\u4f4e\u6210\u672c - \u907f\u514d\u4e3a\u6bcf\u4e2a\u79df\u6237\u521b\u5efa\u72ec\u7acb\u6570\u636e\u5e93</li> </ol>"},{"location":"features/database-schema/#_4","title":"\u5178\u578b\u573a\u666f","text":""},{"location":"features/database-schema/#1-saas","title":"1. \u591a\u79df\u6237 SaaS \u5e94\u7528","text":"<pre><code>Database: saas_app\n\u251c\u2500\u2500 Schema: tenant_a (\u79df\u6237 A \u7684\u6570\u636e)\n\u2502   \u251c\u2500\u2500 users\n\u2502   \u251c\u2500\u2500 orders\n\u2502   \u2514\u2500\u2500 products\n\u251c\u2500\u2500 Schema: tenant_b (\u79df\u6237 B \u7684\u6570\u636e)\n\u2502   \u251c\u2500\u2500 users\n\u2502   \u251c\u2500\u2500 orders\n\u2502   \u2514\u2500\u2500 products\n\u2514\u2500\u2500 Schema: public (\u516c\u5171\u6570\u636e)\n    \u251c\u2500\u2500 system_config\n    \u2514\u2500\u2500 global_settings\n</code></pre>"},{"location":"features/database-schema/#2","title":"2. \u5fae\u670d\u52a1\u6570\u636e\u9694\u79bb","text":"<pre><code>Database: microservices\n\u251c\u2500\u2500 Schema: user_service\n\u251c\u2500\u2500 Schema: order_service\n\u251c\u2500\u2500 Schema: payment_service\n\u2514\u2500\u2500 Schema: inventory_service\n</code></pre>"},{"location":"features/database-schema/#3","title":"3. \u73af\u5883\u6570\u636e\u9694\u79bb","text":"<pre><code>Database: myapp\n\u251c\u2500\u2500 Schema: dev\n\u251c\u2500\u2500 Schema: test\n\u251c\u2500\u2500 Schema: staging\n\u2514\u2500\u2500 Schema: public (\u751f\u4ea7)\n</code></pre>"},{"location":"features/database-schema/#_5","title":"\u4f7f\u7528\u65b9\u5f0f","text":""},{"location":"features/database-schema/#1-database_url","title":"\u65b9\u5f0f 1: DATABASE_URL \u67e5\u8be2\u53c2\u6570\uff08\u63a8\u8350\uff09","text":"<pre><code># PostgreSQL with schema\nexport FASTER_DATABASE_URL=\"postgresql://user:pass@host:5432/mydb?schema=tenant1\"\n\n# \u4e0d\u6307\u5b9a schema\uff08\u4f7f\u7528\u6570\u636e\u5e93\u9ed8\u8ba4\uff0cPostgreSQL \u9ed8\u8ba4\u662f public\uff09\nexport FASTER_DATABASE_URL=\"postgresql://user:pass@host:5432/mydb\"\n</code></pre>"},{"location":"features/database-schema/#2_1","title":"\u65b9\u5f0f 2: \u72ec\u7acb\u73af\u5883\u53d8\u91cf","text":"<pre><code>export FASTER_DATABASE__TYPE=postgres\nexport FASTER_DATABASE__HOST=localhost\nexport FASTER_DATABASE__PORT=5432\nexport FASTER_DATABASE__DATABASE=mydb\nexport FASTER_DATABASE__DB_SCHEMA=tenant1\n</code></pre>"},{"location":"features/database-schema/#3-python","title":"\u65b9\u5f0f 3: Python \u4ee3\u7801","text":"<pre><code>from faster_app.settings.builtins.settings import Settings\nfrom faster_app.settings.groups import DatabaseSettings\n\n# \u76f4\u63a5\u521b\u5efa\u914d\u7f6e\ndb = DatabaseSettings(\n    type=\"postgres\",\n    host=\"localhost\",\n    database=\"saas_app\",\n    db_schema=\"tenant_a\"\n)\n\n# \u4ece URL \u521b\u5efa\ndb = DatabaseSettings.from_database_url(\n    \"postgresql://user:pass@localhost:5432/saas_app?schema=tenant_a\"\n)\n</code></pre>"},{"location":"features/database-schema/#_6","title":"\u5b8c\u6574\u793a\u4f8b","text":""},{"location":"features/database-schema/#saas","title":"\u591a\u79df\u6237 SaaS \u5e94\u7528","text":"<pre><code>\"\"\"\u591a\u79df\u6237\u793a\u4f8b\"\"\"\nfrom faster_app.settings.groups import DatabaseSettings\n\n# \u79df\u6237 A\ntenant_a_db = DatabaseSettings.from_database_url(\n    \"postgresql://app:secret@prod.db:5432/saas?schema=tenant_a\"\n)\n\n# \u79df\u6237 B\ntenant_b_db = DatabaseSettings.from_database_url(\n    \"postgresql://app:secret@prod.db:5432/saas?schema=tenant_b\"\n)\n\n# \u4e24\u4e2a\u79df\u6237\u4f7f\u7528\u540c\u4e00\u4e2a\u6570\u636e\u5e93\uff0c\u4f46\u6570\u636e\u5b8c\u5168\u9694\u79bb\nassert tenant_a_db.database == tenant_b_db.database == \"saas\"\nassert tenant_a_db.db_schema != tenant_b_db.db_schema\n</code></pre>"},{"location":"features/database-schema/#_7","title":"\u52a8\u6001\u79df\u6237\u5207\u6362","text":"<pre><code>\"\"\"\u8fd0\u884c\u65f6\u52a8\u6001\u5207\u6362\u79df\u6237 schema\"\"\"\nimport os\nfrom faster_app.settings.builtins.settings import Settings\n\ndef get_settings_for_tenant(tenant_id: str) -&gt; Settings:\n    \"\"\"\u4e3a\u6307\u5b9a\u79df\u6237\u83b7\u53d6\u914d\u7f6e\"\"\"\n    base_url = \"postgresql://app:secret@db.example.com:5432/saas\"\n    os.environ[\"FASTER_DATABASE_URL\"] = f\"{base_url}?schema=tenant_{tenant_id}\"\n    return Settings()\n\n# \u79df\u6237 A \u7684\u914d\u7f6e\nsettings_a = get_settings_for_tenant(\"a\")\nprint(settings_a.database.db_schema)  # tenant_a\n\n# \u79df\u6237 B \u7684\u914d\u7f6e\nsettings_b = get_settings_for_tenant(\"b\")\nprint(settings_b.database.db_schema)  # tenant_b\n</code></pre>"},{"location":"features/database-schema/#_8","title":"\u73af\u5883\u9694\u79bb","text":"<pre><code># \u5f00\u53d1\u73af\u5883\nexport FASTER_DATABASE_URL=\"postgresql://dev:dev@localhost:5432/myapp?schema=dev\"\n\n# \u6d4b\u8bd5\u73af\u5883\nexport FASTER_DATABASE_URL=\"postgresql://test:test@localhost:5432/myapp?schema=test\"\n\n# \u751f\u4ea7\u73af\u5883\uff08\u4f7f\u7528\u9ed8\u8ba4 public schema\uff09\nexport FASTER_DATABASE_URL=\"postgresql://prod:secret@prod.db:5432/myapp\"\n</code></pre>"},{"location":"features/database-schema/#docker-compose","title":"Docker Compose \u591a\u79df\u6237","text":"<pre><code># docker-compose.yml\nversion: '3.8'\n\nservices:\n  # \u79df\u6237 A \u670d\u52a1\n  app_tenant_a:\n    image: faster-app\n    environment:\n      - FASTER_DATABASE_URL=postgresql://app:pass@db:5432/saas?schema=tenant_a\n    ports:\n      - \"8001:8000\"\n\n  # \u79df\u6237 B \u670d\u52a1\n  app_tenant_b:\n    image: faster-app\n    environment:\n      - FASTER_DATABASE_URL=postgresql://app:pass@db:5432/saas?schema=tenant_b\n    ports:\n      - \"8002:8000\"\n\n  # \u5171\u4eab\u6570\u636e\u5e93\n  db:\n    image: postgres:15\n    environment:\n      - POSTGRES_DB=saas\n      - POSTGRES_USER=app\n      - POSTGRES_PASSWORD=pass\n    volumes:\n      - ./init-schemas.sql:/docker-entrypoint-initdb.d/init.sql\n</code></pre> <pre><code>-- init-schemas.sql\n-- \u521b\u5efa\u79df\u6237 schema\nCREATE SCHEMA IF NOT EXISTS tenant_a;\nCREATE SCHEMA IF NOT EXISTS tenant_b;\n\n-- \u6388\u6743\nGRANT ALL ON SCHEMA tenant_a TO app;\nGRANT ALL ON SCHEMA tenant_b TO app;\n</code></pre>"},{"location":"features/database-schema/#tortoise_orm","title":"TORTOISE_ORM \u96c6\u6210","text":"<p>Schema \u914d\u7f6e\u4f1a\u81ea\u52a8\u96c6\u6210\u5230 Tortoise ORM \u914d\u7f6e\u4e2d\uff1a</p> <pre><code>from faster_app.settings.builtins.settings import Settings\n\nsettings = Settings()\n\n# \u6709 schema \u65f6\n# TORTOISE_ORM['connections']['POSTGRES']['credentials']\n# {\n#     'host': 'localhost',\n#     'port': 5432,\n#     'user': 'user',\n#     'password': '***',\n#     'database': 'mydb',\n#     'schema': 'tenant_a'  \u2190 \u81ea\u52a8\u6dfb\u52a0\n# }\n\n# \u65e0 schema \u65f6\uff08\u9ed8\u8ba4\uff09\n# {\n#     'host': 'localhost',\n#     'port': 5432,\n#     'user': 'user',\n#     'password': '***',\n#     'database': 'mydb'\n#     # \u6ca1\u6709 schema \u5b57\u6bb5\uff0c\u4f7f\u7528\u6570\u636e\u5e93\u9ed8\u8ba4\n# }\n</code></pre>"},{"location":"features/database-schema/#postgresql-schema","title":"PostgreSQL Schema \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"features/database-schema/#1-schema","title":"1. \u521b\u5efa Schema","text":"<pre><code>-- \u521b\u5efa schema\nCREATE SCHEMA tenant_a;\n\n-- \u521b\u5efa schema \u5e76\u6307\u5b9a\u6240\u6709\u8005\nCREATE SCHEMA tenant_a AUTHORIZATION app_user;\n\n-- \u8bbe\u7f6e\u9ed8\u8ba4 search_path\nALTER ROLE app_user SET search_path TO tenant_a, public;\n</code></pre>"},{"location":"features/database-schema/#2-schema","title":"2. Schema \u6743\u9650\u7ba1\u7406","text":"<pre><code>-- \u6388\u4e88\u6240\u6709\u6743\u9650\nGRANT ALL ON SCHEMA tenant_a TO tenant_a_user;\n\n-- \u6388\u4e88\u7279\u5b9a\u6743\u9650\nGRANT USAGE ON SCHEMA tenant_a TO read_only_user;\nGRANT SELECT ON ALL TABLES IN SCHEMA tenant_a TO read_only_user;\n\n-- \u64a4\u9500\u6743\u9650\nREVOKE ALL ON SCHEMA tenant_a FROM public;\n</code></pre>"},{"location":"features/database-schema/#3-schema","title":"3. \u67e5\u8be2\u6307\u5b9a Schema \u7684\u8868","text":"<pre><code>-- \u67e5\u8be2 tenant_a schema \u4e2d\u7684\u7528\u6237\u8868\nSELECT * FROM tenant_a.users;\n\n-- \u8bbe\u7f6e search_path \u540e\u53ef\u7701\u7565 schema \u524d\u7f00\nSET search_path TO tenant_a;\nSELECT * FROM users;  -- \u81ea\u52a8\u5728 tenant_a \u4e2d\u67e5\u627e\n</code></pre>"},{"location":"features/database-schema/#_9","title":"\u914d\u7f6e\u4f18\u5148\u7ea7","text":"<p>Schema \u914d\u7f6e\u9075\u5faa\u4ee5\u4e0b\u4f18\u5148\u7ea7\uff1a</p> <ol> <li>DATABASE_URL \u67e5\u8be2\u53c2\u6570 - <code>?schema=xxx</code></li> <li>FASTER_DATABASE__DB_SCHEMA \u73af\u5883\u53d8\u91cf</li> <li>\u9ed8\u8ba4\u503c - <code>None</code>\uff08\u4f7f\u7528\u6570\u636e\u5e93\u9ed8\u8ba4 schema\uff09</li> </ol> <pre><code># \u793a\u4f8b\uff1aURL \u53c2\u6570\u4f18\u5148\nexport FASTER_DATABASE_URL=\"postgresql://user:pass@host:5432/db?schema=from_url\"\nexport FASTER_DATABASE__DB_SCHEMA=\"from_env\"\n\n# \u5b9e\u9645\u4f7f\u7528: from_url\uff08URL \u53c2\u6570\u4f18\u5148\uff09\n</code></pre>"},{"location":"features/database-schema/#_10","title":"\u6ce8\u610f\u4e8b\u9879","text":""},{"location":"features/database-schema/#_11","title":"\u2705 \u63a8\u8350\u505a\u6cd5","text":"<ol> <li> <p>\u660e\u786e\u6307\u5b9a Schema <pre><code># \u63a8\u8350\uff1a\u660e\u786e\u6307\u5b9a\nurl = \"postgresql://user:pass@host:5432/db?schema=tenant_a\"\n</code></pre></p> </li> <li> <p>Schema \u547d\u540d\u89c4\u8303 <pre><code>\u2705 \u63a8\u8350: tenant_a, user_service, dev_env\n\u274c \u907f\u514d: Tenant-A, user.service, dev env\n</code></pre></p> </li> <li> <p>\u6743\u9650\u6700\u5c0f\u5316 <pre><code>-- \u6bcf\u4e2a\u79df\u6237\u53ea\u80fd\u8bbf\u95ee\u81ea\u5df1\u7684 schema\nGRANT USAGE ON SCHEMA tenant_a TO tenant_a_user;\nREVOKE ALL ON SCHEMA tenant_b FROM tenant_a_user;\n</code></pre></p> </li> <li> <p>\u5907\u4efd\u65f6\u5305\u542b Schema <pre><code># \u5907\u4efd\u7279\u5b9a schema\npg_dump -h localhost -U user -n tenant_a mydb &gt; tenant_a_backup.sql\n\n# \u6062\u590d\npsql -h localhost -U user mydb &lt; tenant_a_backup.sql\n</code></pre></p> </li> </ol>"},{"location":"features/database-schema/#_12","title":"\u26a0\ufe0f \u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>Schema \u5fc5\u987b\u5b58\u5728</li> <li>\u5e94\u7528\u542f\u52a8\u524d\u786e\u4fdd schema \u5df2\u521b\u5efa</li> <li> <p>\u4f7f\u7528\u8fc1\u79fb\u5de5\u5177\u81ea\u52a8\u521b\u5efa</p> </li> <li> <p>\u8de8 Schema \u67e5\u8be2\u6027\u80fd</p> </li> <li>\u907f\u514d\u9891\u7e41\u7684\u8de8 schema JOIN</li> <li> <p>\u8003\u8651\u6570\u636e\u590d\u5236\u6216\u7269\u5316\u89c6\u56fe</p> </li> <li> <p>\u8fde\u63a5\u6c60\u914d\u7f6e</p> </li> <li>\u6bcf\u4e2a schema \u53ef\u80fd\u9700\u8981\u72ec\u7acb\u7684\u8fde\u63a5\u6c60</li> <li> <p>\u6ce8\u610f\u8fde\u63a5\u6570\u9650\u5236</p> </li> <li> <p>SQLite \u5ffd\u7565 Schema <pre><code># SQLite \u4f1a\u5ffd\u7565 schema \u53c2\u6570\ndb = DatabaseSettings.from_database_url(\n    \"sqlite:///mydb.db?schema=ignored\"\n)\nassert db.db_schema is None  # SQLite \u4e0d\u652f\u6301\n</code></pre></p> </li> </ol>"},{"location":"features/database-schema/#_13","title":"\u8fc1\u79fb\u6307\u5357","text":""},{"location":"features/database-schema/#schema-schema","title":"\u4ece\u5355 Schema \u8fc1\u79fb\u5230\u591a Schema","text":"<p>\u6b65\u9aa4 1: \u521b\u5efa\u65b0 Schema <pre><code>CREATE SCHEMA tenant_new;\n</code></pre></p> <p>\u6b65\u9aa4 2: \u590d\u5236\u8868\u7ed3\u6784 <pre><code>-- \u65b9\u6cd5 1: \u624b\u52a8\u590d\u5236\nCREATE TABLE tenant_new.users (LIKE public.users INCLUDING ALL);\n\n-- \u65b9\u6cd5 2: \u4f7f\u7528 pg_dump\npg_dump -s -n public mydb | sed 's/public\\./tenant_new./g' | psql mydb\n</code></pre></p> <p>\u6b65\u9aa4 3: \u8fc1\u79fb\u6570\u636e <pre><code>INSERT INTO tenant_new.users SELECT * FROM public.users WHERE tenant_id = 'new';\n</code></pre></p> <p>\u6b65\u9aa4 4: \u66f4\u65b0\u914d\u7f6e <pre><code># \u66f4\u65b0\u73af\u5883\u53d8\u91cf\nexport FASTER_DATABASE_URL=\"postgresql://user:pass@host:5432/mydb?schema=tenant_new\"\n</code></pre></p>"},{"location":"features/database-schema/#_14","title":"\u6545\u969c\u6392\u67e5","text":""},{"location":"features/database-schema/#1-schema_1","title":"\u95ee\u9898 1: Schema \u4e0d\u5b58\u5728","text":"<pre><code>ERROR: schema \"tenant_a\" does not exist\n</code></pre> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>CREATE SCHEMA IF NOT EXISTS tenant_a;\n</code></pre></p>"},{"location":"features/database-schema/#2_2","title":"\u95ee\u9898 2: \u6743\u9650\u4e0d\u8db3","text":"<pre><code>ERROR: permission denied for schema tenant_a\n</code></pre> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>GRANT USAGE ON SCHEMA tenant_a TO your_user;\nGRANT ALL ON ALL TABLES IN SCHEMA tenant_a TO your_user;\n</code></pre></p>"},{"location":"features/database-schema/#3_1","title":"\u95ee\u9898 3: \u627e\u4e0d\u5230\u8868","text":"<pre><code>ERROR: relation \"users\" does not exist\n</code></pre> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>-- \u68c0\u67e5 search_path\nSHOW search_path;\n\n-- \u8bbe\u7f6e\u6b63\u786e\u7684 search_path\nSET search_path TO tenant_a, public;\n\n-- \u6216\u4f7f\u7528\u5168\u9650\u5b9a\u540d\nSELECT * FROM tenant_a.users;\n</code></pre></p>"},{"location":"features/database-schema/#_15","title":"\u76f8\u5173\u6587\u6863","text":"<ul> <li>DATABASE_URL \u652f\u6301 - \u6570\u636e\u5e93 URL \u914d\u7f6e</li> <li>\u914d\u7f6e\u5206\u7ec4 - \u914d\u7f6e\u7ed3\u6784\u8bf4\u660e</li> <li>\u751f\u4ea7\u73af\u5883\u9a8c\u8bc1 - \u751f\u4ea7\u914d\u7f6e\u68c0\u67e5</li> </ul>"},{"location":"features/database-schema/#_16","title":"\u6280\u672f\u7ec6\u8282","text":""},{"location":"features/database-schema/#_17","title":"\u5b9e\u73b0\u539f\u7406","text":"<pre><code># 1. URL \u89e3\u6790\nfrom urllib.parse import urlparse, parse_qs\n\nurl = \"postgresql://user:pass@host:5432/db?schema=tenant_a\"\nparsed = urlparse(url)\nquery_params = parse_qs(parsed.query)\nschema = query_params.get(\"schema\", [None])[0]  # \"tenant_a\"\n\n# 2. \u5b57\u6bb5\u5b9a\u4e49\nclass DatabaseSettings(BaseModel):\n    db_schema: Optional[str] = None  # \u4f7f\u7528 db_schema \u907f\u514d\u4e0e BaseModel.schema \u51b2\u7a81\n\n# 3. Tortoise ORM \u96c6\u6210\ncredentials = {\n    \"host\": self.database.host,\n    \"database\": self.database.database,\n}\nif self.database.db_schema:\n    credentials[\"schema\"] = self.database.db_schema\n</code></pre>"},{"location":"features/database-schema/#_18","title":"\u5b57\u6bb5\u547d\u540d\u8bf4\u660e","text":"<p>\u914d\u7f6e\u5b57\u6bb5\u4f7f\u7528 <code>db_schema</code> \u800c\u4e0d\u662f <code>schema</code>\uff0c\u539f\u56e0\uff1a - Pydantic <code>BaseModel</code> \u6709\u5185\u7f6e\u7684 <code>schema()</code> \u65b9\u6cd5 - \u4f7f\u7528 <code>db_schema</code> \u907f\u514d\u547d\u540d\u51b2\u7a81 - \u5728 URL \u548c\u73af\u5883\u53d8\u91cf\u4e2d\u4ecd\u4f7f\u7528 <code>schema</code> \u66f4\u76f4\u89c2</p> <pre><code># \u2705 \u914d\u7f6e\u5b57\u6bb5: db_schema\nsettings.database.db_schema  \n\n# \u2705 URL \u53c2\u6570: schema\n\"?schema=tenant_a\"\n\n# \u2705 \u73af\u5883\u53d8\u91cf: DB_SCHEMA\nFASTER_DATABASE__DB_SCHEMA=tenant_a\n\n# \u2705 Tortoise ORM: schema\ncredentials[\"schema\"] = db_schema\n</code></pre>"},{"location":"features/database-schema/#_19","title":"\u603b\u7ed3","text":"<p>Database Schema \u652f\u6301\u662f\u4e00\u4e2a**\u7b80\u5355\u3001\u5f3a\u5927\u3001\u5b9e\u7528**\u7684\u529f\u80fd\uff1a</p> <ol> <li>\u2705 \u591a\u79df\u6237\u53cb\u597d - \u6570\u636e\u9694\u79bb\u7684\u6700\u4f73\u5b9e\u8df5</li> <li>\u2705 \u73af\u5883\u9694\u79bb - \u5f00\u53d1/\u6d4b\u8bd5/\u751f\u4ea7\u6570\u636e\u5206\u79bb</li> <li>\u2705 \u7075\u6d3b\u914d\u7f6e - URL \u53c2\u6570\u6216\u73af\u5883\u53d8\u91cf</li> <li>\u2705 \u81ea\u52a8\u96c6\u6210 - \u65e0\u7f1d\u96c6\u6210\u5230 Tortoise ORM</li> <li>\u2705 PostgreSQL \u4f18\u5316 - \u5145\u5206\u5229\u7528 PostgreSQL schema \u7279\u6027</li> </ol> <p>\u63a8\u8350\u5728\u591a\u79df\u6237 SaaS \u5e94\u7528\u4e2d\u4f7f\u7528 Schema \u5b9e\u73b0\u6570\u636e\u9694\u79bb\uff01 \ud83d\ude80</p>"},{"location":"features/database-url/","title":"DATABASE_URL \u652f\u6301","text":""},{"location":"features/database-url/#_1","title":"\u6982\u8ff0","text":"<p>\u4e3a\u4e86\u7b80\u5316\u6570\u636e\u5e93\u914d\u7f6e\u5e76\u9075\u5faa 12-Factor App \u6700\u4f73\u5b9e\u8df5\uff0cFaster APP \u652f\u6301\u901a\u8fc7\u5355\u4e2a <code>DATABASE_URL</code> \u73af\u5883\u53d8\u91cf\u914d\u7f6e\u6570\u636e\u5e93\u8fde\u63a5\u3002</p>"},{"location":"features/database-url/#database_url_1","title":"\u4e3a\u4ec0\u4e48\u9700\u8981 DATABASE_URL\uff1f","text":""},{"location":"features/database-url/#_2","title":"\u2705 \u4f18\u52bf","text":"<ol> <li>\u90e8\u7f72\u7b80\u5316 - \u4e00\u4e2a\u53d8\u91cf\u66ff\u4ee3\u591a\u4e2a\u72ec\u7acb\u914d\u7f6e</li> <li>\u4e91\u539f\u751f\u53cb\u597d - \u4e3b\u6d41\u4e91\u5e73\u53f0\uff08Heroku\u3001Railway\u3001Render\uff09\u6807\u51c6\u652f\u6301</li> <li>\u7edf\u4e00\u6807\u51c6 - \u4e1a\u754c\u5e7f\u6cdb\u8ba4\u53ef\u7684\u914d\u7f6e\u65b9\u5f0f</li> <li>\u964d\u4f4e\u51fa\u9519 - \u51cf\u5c11\u914d\u7f6e\u9879\uff0c\u964d\u4f4e\u914d\u7f6e\u9519\u8bef\u6982\u7387</li> <li>\u5b89\u5168\u6027 - \u5bc6\u7801\u7b49\u654f\u611f\u4fe1\u606f\u96c6\u4e2d\u5728\u4e00\u4e2a\u53d8\u91cf\u4e2d</li> </ol>"},{"location":"features/database-url/#_3","title":"\u9002\u7528\u573a\u666f","text":"<ul> <li>\u2705 \u4e91\u5e73\u53f0\u90e8\u7f72\uff08Heroku\u3001Railway\u3001Render\u3001Fly.io\uff09</li> <li>\u2705 \u5bb9\u5668\u5316\u90e8\u7f72\uff08Docker\u3001Kubernetes\uff09</li> <li>\u2705 CI/CD \u73af\u5883\u914d\u7f6e</li> <li>\u2705 \u591a\u73af\u5883\u5207\u6362\uff08\u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u751f\u4ea7\uff09</li> </ul>"},{"location":"features/database-url/#_4","title":"\u4f7f\u7528\u65b9\u5f0f","text":""},{"location":"features/database-url/#1-database_url","title":"\u65b9\u5f0f 1: DATABASE_URL\uff08\u6807\u51c6\uff09","text":"<pre><code>export DATABASE_URL=postgresql://user:password@host:5432/database\n</code></pre>"},{"location":"features/database-url/#2-faster_database_url","title":"\u65b9\u5f0f 2: FASTER_DATABASE_URL\uff08\u63a8\u8350\uff09","text":"<p>\u4f7f\u7528\u5e26\u524d\u7f00\u7684\u7248\u672c\uff0c\u907f\u514d\u73af\u5883\u53d8\u91cf\u51b2\u7a81\uff1a</p> <pre><code>export FASTER_DATABASE_URL=postgresql://user:password@host:5432/database\n</code></pre>"},{"location":"features/database-url/#3","title":"\u65b9\u5f0f 3: \u72ec\u7acb\u53d8\u91cf\uff08\u5411\u540e\u517c\u5bb9\uff09","text":"<p>\u5982\u679c\u66f4\u559c\u6b22\u4f20\u7edf\u65b9\u5f0f\uff0c\u4ecd\u53ef\u4f7f\u7528\u72ec\u7acb\u73af\u5883\u53d8\u91cf\uff1a</p> <pre><code>export FASTER_DATABASE__TYPE=postgres\nexport FASTER_DATABASE__HOST=localhost\nexport FASTER_DATABASE__PORT=5432\nexport FASTER_DATABASE__USER=user\nexport FASTER_DATABASE__PASSWORD=password\nexport FASTER_DATABASE__DATABASE=mydb\n</code></pre>"},{"location":"features/database-url/#_5","title":"\u652f\u6301\u7684\u6570\u636e\u5e93","text":""},{"location":"features/database-url/#postgresql","title":"PostgreSQL","text":"<pre><code># \u6807\u51c6\u683c\u5f0f\npostgresql://user:password@host:5432/database\n\n# \u522b\u540d\u652f\u6301\npostgres://user:password@host:5432/database\n\n# \u9ed8\u8ba4\u7aef\u53e3\uff08\u53ef\u7701\u7565\uff09\npostgresql://user:password@host/database  # \u7aef\u53e3 5432\n\n# \u5e26 schema\uff08\u591a\u79df\u6237/\u6570\u636e\u9694\u79bb\uff09\npostgresql://user:password@host:5432/database?schema=tenant_a\n</code></pre> <p>\ud83d\udca1 \u63d0\u793a: \u5173\u4e8e Schema \u7684\u8be6\u7ec6\u4f7f\u7528\uff0c\u8bf7\u53c2\u8003 \u6570\u636e\u5e93 Schema \u652f\u6301</p>"},{"location":"features/database-url/#mysql","title":"MySQL","text":"<pre><code># \u6807\u51c6\u683c\u5f0f\nmysql://user:password@host:3306/database\n\n# \u9ed8\u8ba4\u7aef\u53e3\uff08\u53ef\u7701\u7565\uff09\nmysql://user:password@host/database  # \u7aef\u53e3 3306\n</code></pre>"},{"location":"features/database-url/#sqlite","title":"SQLite","text":"<pre><code># \u7edd\u5bf9\u8def\u5f84\nsqlite:////absolute/path/to/database.db\n\n# \u76f8\u5bf9\u8def\u5f84\nsqlite:///relative/path/database.db\n\n# \u5f53\u524d\u76ee\u5f55\nsqlite:///database.db\n</code></pre>"},{"location":"features/database-url/#_6","title":"\u914d\u7f6e\u4f18\u5148\u7ea7","text":"<p>\u5f53\u591a\u79cd\u914d\u7f6e\u65b9\u5f0f\u540c\u65f6\u5b58\u5728\u65f6\uff0c\u6309\u4ee5\u4e0b\u4f18\u5148\u7ea7\uff1a</p> <ol> <li>\u6784\u9020\u51fd\u6570\u53c2\u6570 - <code>Settings(database=...)</code></li> <li>FASTER_DATABASE_URL - \u5e26\u524d\u7f00\u7684 URL</li> <li>DATABASE_URL - \u6807\u51c6 URL</li> <li>FASTER_DATABASE__* - \u72ec\u7acb\u73af\u5883\u53d8\u91cf</li> <li>\u9ed8\u8ba4\u503c - \u4ee3\u7801\u4e2d\u7684\u9ed8\u8ba4\u914d\u7f6e</li> </ol> <pre><code># \u4f18\u5148\u7ea7\u793a\u4f8b\nos.environ[\"DATABASE_URL\"] = \"postgresql://user1:pass@host1:5432/db1\"\nos.environ[\"FASTER_DATABASE_URL\"] = \"postgresql://user2:pass@host2:5432/db2\"\n\nsettings = Settings()\n# \u5b9e\u9645\u4f7f\u7528: host2\uff08FASTER_DATABASE_URL \u4f18\u5148\uff09\n</code></pre>"},{"location":"features/database-url/#_7","title":"\u7279\u6b8a\u5b57\u7b26\u5904\u7406","text":"<p>\u5982\u679c\u5bc6\u7801\u5305\u542b\u7279\u6b8a\u5b57\u7b26\uff0c\u9700\u8981\u8fdb\u884c URL \u7f16\u7801\uff1a</p>"},{"location":"features/database-url/#python","title":"Python \u793a\u4f8b","text":"<pre><code>from urllib.parse import quote\n\npassword = \"p@ss!w#rd$123\"\nencoded = quote(password, safe=\"\")\n# \u7ed3\u679c: p%40ss%21w%23rd%24123\n\nurl = f\"postgresql://user:{encoded}@host:5432/db\"\n</code></pre>"},{"location":"features/database-url/#_8","title":"\u5e38\u89c1\u7279\u6b8a\u5b57\u7b26\u7f16\u7801","text":"\u5b57\u7b26 \u7f16\u7801 \u5b57\u7b26 \u7f16\u7801 <code>@</code> <code>%40</code> <code>#</code> <code>%23</code> <code>:</code> <code>%3A</code> <code>?</code> <code>%3F</code> <code>/</code> <code>%2F</code> <code>&amp;</code> <code>%26</code> <code>%</code> <code>%25</code> <code>$</code> <code>%24</code>"},{"location":"features/database-url/#_9","title":"\u5728\u7ebf\u5de5\u5177","text":"<ul> <li>URL Encoder/Decoder</li> <li>Python: <code>urllib.parse.quote()</code></li> <li>Node.js: <code>encodeURIComponent()</code></li> </ul>"},{"location":"features/database-url/#_10","title":"\u5b9e\u9645\u6848\u4f8b","text":""},{"location":"features/database-url/#_11","title":"\u5f00\u53d1\u73af\u5883","text":"<pre><code># .env.development\nFASTER_DATABASE_URL=sqlite:///dev.db\n</code></pre>"},{"location":"features/database-url/#_12","title":"\u6d4b\u8bd5\u73af\u5883","text":"<pre><code># .env.test\nFASTER_DATABASE_URL=postgresql://test:test@localhost:5432/test_db\n</code></pre>"},{"location":"features/database-url/#_13","title":"\u751f\u4ea7\u73af\u5883\uff08\u4e91\u5e73\u53f0\uff09","text":"<pre><code># \u4e91\u5e73\u53f0\u81ea\u52a8\u63d0\u4f9b\nDATABASE_URL=postgresql://user:pass@prod-db.cloud.com:5432/prod_db\n</code></pre>"},{"location":"features/database-url/#docker-compose","title":"Docker Compose","text":"<pre><code># docker-compose.yml\nversion: '3.8'\nservices:\n  app:\n    image: faster-app\n    environment:\n      - FASTER_DATABASE_URL=postgresql://app:password@db:5432/appdb\n\n  db:\n    image: postgres:15\n    environment:\n      - POSTGRES_USER=app\n      - POSTGRES_PASSWORD=password\n      - POSTGRES_DB=appdb\n</code></pre>"},{"location":"features/database-url/#kubernetes","title":"Kubernetes","text":"<pre><code># deployment.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: app-config\ndata:\n  FASTER_DATABASE_URL: postgresql://user:pass@postgres:5432/db\n\n---\napiVersion: apps/v1\nkind: Deployment\nspec:\n  template:\n    spec:\n      containers:\n      - name: app\n        envFrom:\n        - configMapRef:\n            name: app-config\n</code></pre>"},{"location":"features/database-url/#_14","title":"\u9519\u8bef\u5904\u7406","text":""},{"location":"features/database-url/#_15","title":"\u5e38\u89c1\u9519\u8bef","text":""},{"location":"features/database-url/#1","title":"1. \u683c\u5f0f\u9519\u8bef","text":"<pre><code># \u274c \u9519\u8bef\uff1a\u7f3a\u5c11\u534f\u8bae\nDATABASE_URL=localhost:5432/db\n\n# \u2705 \u6b63\u786e\nDATABASE_URL=postgresql://user:pass@localhost:5432/db\n</code></pre>"},{"location":"features/database-url/#2","title":"2. \u4e0d\u652f\u6301\u7684\u6570\u636e\u5e93","text":"<pre><code># \u274c \u9519\u8bef\uff1a\u4e0d\u652f\u6301 MongoDB\nDATABASE_URL=mongodb://localhost:27017/db\n# \u9519\u8bef: \u4e0d\u652f\u6301\u7684\u6570\u636e\u5e93\u7c7b\u578b: mongodb\uff0c\u652f\u6301: ['postgresql', 'postgres', 'mysql', 'sqlite']\n\n# \u2705 \u6b63\u786e\uff1a\u4f7f\u7528\u652f\u6301\u7684\u6570\u636e\u5e93\nDATABASE_URL=postgresql://localhost:5432/db\n</code></pre>"},{"location":"features/database-url/#3_1","title":"3. \u7f3a\u5c11\u5fc5\u8981\u4fe1\u606f","text":"<pre><code># \u274c \u9519\u8bef\uff1aPostgreSQL \u7f3a\u5c11\u4e3b\u673a\u540d\nDATABASE_URL=postgresql:///db\n# \u9519\u8bef: DATABASE_URL \u7f3a\u5c11\u4e3b\u673a\u540d\uff08host\uff09\n\n# \u2705 \u6b63\u786e\nDATABASE_URL=postgresql://user:pass@localhost:5432/db\n</code></pre>"},{"location":"features/database-url/#_16","title":"\u89e3\u6790\u5931\u8d25\u5904\u7406","text":"<p>\u5982\u679c <code>DATABASE_URL</code> \u89e3\u6790\u5931\u8d25\uff0c\u7cfb\u7edf\u4f1a\uff1a 1. \u53d1\u51fa\u8b66\u544a\uff08Warning\uff09 2. \u56de\u9000\u5230\u72ec\u7acb\u73af\u5883\u53d8\u91cf\u6216\u9ed8\u8ba4\u914d\u7f6e 3. \u4e0d\u4f1a\u4e2d\u65ad\u5e94\u7528\u542f\u52a8</p> <pre><code># \u89e3\u6790\u5931\u8d25\u65f6\u7684\u8b66\u544a\nUserWarning: DATABASE_URL \u89e3\u6790\u5931\u8d25: &lt;\u9519\u8bef\u8be6\u60c5&gt;\uff0c\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\n</code></pre>"},{"location":"features/database-url/#_17","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"features/database-url/#_18","title":"\u2705 \u63a8\u8350\u505a\u6cd5","text":"<ol> <li>\u751f\u4ea7\u73af\u5883\u4f7f\u7528 DATABASE_URL</li> <li>\u7b80\u5316\u914d\u7f6e\uff0c\u51cf\u5c11\u51fa\u9519</li> <li> <p>\u7b26\u5408\u4e91\u5e73\u53f0\u6807\u51c6</p> </li> <li> <p>\u5f00\u53d1\u73af\u5883\u4f7f\u7528 SQLite <pre><code>FASTER_DATABASE_URL=sqlite:///dev.db\n</code></pre></p> </li> <li> <p>\u5bc6\u7801\u5305\u542b\u7279\u6b8a\u5b57\u7b26\u8981\u7f16\u7801 <pre><code>from urllib.parse import quote\npassword = quote(\"p@ss!word\", safe=\"\")\n</code></pre></p> </li> <li> <p>\u4f18\u5148\u4f7f\u7528 FASTER_DATABASE_URL</p> </li> <li> <p>\u907f\u514d\u4e0e\u5176\u4ed6\u5e94\u7528\u51b2\u7a81</p> </li> <li> <p>\u654f\u611f\u4fe1\u606f\u4f7f\u7528\u5bc6\u94a5\u7ba1\u7406</p> </li> <li>\u751f\u4ea7\u73af\u5883\u4ece\u5bc6\u94a5\u7ba1\u7406\u670d\u52a1\u8bfb\u53d6</li> <li>\u4e0d\u8981\u5728\u4ee3\u7801\u4e2d\u786c\u7f16\u7801</li> </ol>"},{"location":"features/database-url/#_19","title":"\u274c \u907f\u514d\u7684\u505a\u6cd5","text":"<ol> <li> <p>\u4e0d\u8981\u5728\u4ee3\u7801\u4e2d\u786c\u7f16\u7801 URL <pre><code># \u274c \u9519\u8bef\nsettings = Settings(database_url=\"postgresql://...\")\n\n# \u2705 \u6b63\u786e\uff1a\u4f7f\u7528\u73af\u5883\u53d8\u91cf\n# export FASTER_DATABASE_URL=postgresql://...\n</code></pre></p> </li> <li> <p>\u4e0d\u8981\u6df7\u7528\u914d\u7f6e\u65b9\u5f0f <pre><code># \u274c \u6df7\u4e71\uff1a\u540c\u65f6\u8bbe\u7f6e URL \u548c\u72ec\u7acb\u53d8\u91cf\nexport FASTER_DATABASE_URL=postgresql://...\nexport FASTER_DATABASE__HOST=different-host\n\n# \u2705 \u6e05\u6670\uff1a\u53ea\u7528\u4e00\u79cd\u65b9\u5f0f\nexport FASTER_DATABASE_URL=postgresql://...\n</code></pre></p> </li> <li> <p>\u4e0d\u8981\u5ffd\u7565\u5bc6\u7801\u7f16\u7801 <pre><code># \u274c \u7279\u6b8a\u5b57\u7b26\u672a\u7f16\u7801\u53ef\u80fd\u5bfc\u81f4\u89e3\u6790\u9519\u8bef\nDATABASE_URL=postgresql://user:p@ss:word@host:5432/db\n\n# \u2705 \u6b63\u786e\u7f16\u7801\nDATABASE_URL=postgresql://user:p%40ss%3Aword@host:5432/db\n</code></pre></p> </li> </ol>"},{"location":"features/database-url/#_20","title":"\u8fc1\u79fb\u6307\u5357","text":""},{"location":"features/database-url/#database_url_2","title":"\u4ece\u72ec\u7acb\u53d8\u91cf\u8fc1\u79fb\u5230 DATABASE_URL","text":"<p>\u4e4b\u524d\uff1a <pre><code>export FASTER_DATABASE__TYPE=postgres\nexport FASTER_DATABASE__HOST=prod.db.com\nexport FASTER_DATABASE__PORT=5432\nexport FASTER_DATABASE__USER=appuser\nexport FASTER_DATABASE__PASSWORD=secret123\nexport FASTER_DATABASE__DATABASE=appdb\n</code></pre></p> <p>\u4e4b\u540e\uff1a <pre><code>export FASTER_DATABASE_URL=postgresql://appuser:secret123@prod.db.com:5432/appdb\n</code></pre></p> <p>\u597d\u5904\uff1a - 6 \u4e2a\u53d8\u91cf \u2192 1 \u4e2a\u53d8\u91cf - \u66f4\u6e05\u6670\uff0c\u66f4\u6613\u7ba1\u7406 - \u4e0e\u4e91\u5e73\u53f0\u6807\u51c6\u4e00\u81f4</p>"},{"location":"features/database-url/#_21","title":"\u517c\u5bb9\u6027\u8bf4\u660e","text":"<ul> <li>\u2705 \u5b8c\u5168\u5411\u540e\u517c\u5bb9 - \u72ec\u7acb\u73af\u5883\u53d8\u91cf\u4ecd\u7136\u6709\u6548</li> <li>\u2705 \u6e10\u8fdb\u5f0f\u8fc1\u79fb - \u53ef\u4ee5\u9010\u6b65\u4ece\u65e7\u65b9\u5f0f\u8fc1\u79fb\u5230\u65b0\u65b9\u5f0f</li> <li>\u2705 \u96f6\u7834\u574f\u6027 - \u73b0\u6709\u4ee3\u7801\u65e0\u9700\u4fee\u6539</li> </ul>"},{"location":"features/database-url/#_22","title":"\u76f8\u5173\u6587\u6863","text":"<ul> <li>\u914d\u7f6e\u5206\u7ec4 - \u4e86\u89e3\u914d\u7f6e\u7ed3\u6784</li> <li>\u73af\u5883\u53d8\u91cf\u524d\u7f00 - \u73af\u5883\u53d8\u91cf\u547d\u540d\u89c4\u8303</li> <li>\u751f\u4ea7\u73af\u5883\u9a8c\u8bc1 - \u751f\u4ea7\u914d\u7f6e\u5b89\u5168\u68c0\u67e5</li> <li>\u654f\u611f\u4fe1\u606f\u4fdd\u62a4 - \u5bc6\u7801\u7b49\u654f\u611f\u6570\u636e\u5904\u7406</li> </ul>"},{"location":"features/database-url/#_23","title":"\u6280\u672f\u7ec6\u8282","text":""},{"location":"features/database-url/#_24","title":"\u5b9e\u73b0\u539f\u7406","text":"<pre><code>from urllib.parse import urlparse, unquote\n\ndef from_database_url(cls, url: str) -&gt; \"DatabaseSettings\":\n    \"\"\"\u4ece DATABASE_URL \u521b\u5efa\u914d\u7f6e\"\"\"\n    parsed = urlparse(url)\n\n    # \u89e3\u6790\u6570\u636e\u5e93\u7c7b\u578b\n    db_type = parsed.scheme  # postgresql, mysql, sqlite\n\n    # \u89e3\u6790\u8fde\u63a5\u4fe1\u606f\n    host = parsed.hostname\n    port = parsed.port or 5432  # \u9ed8\u8ba4\u7aef\u53e3\n    user = unquote(parsed.username)  # URL \u89e3\u7801\n    password = unquote(parsed.password)  # URL \u89e3\u7801\n    database = parsed.path.lstrip(\"/\")\n\n    return cls(type=db_type, host=host, ...)\n</code></pre>"},{"location":"features/database-url/#_25","title":"\u6d4b\u8bd5\u8986\u76d6","text":"<ul> <li>\u2705 PostgreSQL/MySQL/SQLite \u89e3\u6790</li> <li>\u2705 \u9ed8\u8ba4\u7aef\u53e3\u5904\u7406</li> <li>\u2705 \u7279\u6b8a\u5b57\u7b26\u5bc6\u7801</li> <li>\u2705 \u73af\u5883\u53d8\u91cf\u4f18\u5148\u7ea7</li> <li>\u2705 \u5411\u540e\u517c\u5bb9\u6027</li> <li>\u2705 \u9519\u8bef\u5904\u7406</li> </ul>"},{"location":"features/database-url/#_26","title":"\u603b\u7ed3","text":"<p>DATABASE_URL \u652f\u6301\u662f\u4e00\u4e2a**\u7b80\u5355\u3001\u5b9e\u7528\u3001\u975e\u4fb5\u5165\u6027**\u7684\u529f\u80fd\u589e\u5f3a\uff1a</p> <ol> <li>\u2705 \u7b80\u5316\u914d\u7f6e - \u4e00\u4e2a\u53d8\u91cf\u641e\u5b9a\u6240\u6709\u8fde\u63a5\u4fe1\u606f</li> <li>\u2705 \u6807\u51c6\u517c\u5bb9 - \u7b26\u5408 12-Factor App \u548c\u4e91\u5e73\u53f0\u6807\u51c6</li> <li>\u2705 \u5411\u540e\u517c\u5bb9 - \u4e0d\u7834\u574f\u73b0\u6709\u914d\u7f6e\u65b9\u5f0f</li> <li>\u2705 \u7075\u6d3b\u53ef\u9009 - \u53ef\u4ee5\u9009\u7528\u6216\u4e0d\u7528</li> </ol> <p>\u63a8\u8350\u5728\u751f\u4ea7\u73af\u5883\u4f7f\u7528 DATABASE_URL\uff0c\u8ba9\u914d\u7f6e\u66f4\u6e05\u6670\u3001\u66f4\u5b89\u5168\uff01 \ud83d\ude80</p>"},{"location":"features/env-prefix/","title":"\u73af\u5883\u53d8\u91cf\u524d\u7f00","text":""},{"location":"features/env-prefix/#_2","title":"\u6982\u8ff0","text":"<p>Faster APP \u4f7f\u7528 <code>FASTER_</code> \u4f5c\u4e3a\u73af\u5883\u53d8\u91cf\u524d\u7f00\uff0c\u907f\u514d\u4e0e\u5176\u4ed6\u5e94\u7528\u6216\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u4ea7\u751f\u547d\u540d\u51b2\u7a81\u3002</p>"},{"location":"features/env-prefix/#_3","title":"\u4e3a\u4ec0\u4e48\u9700\u8981\u524d\u7f00\uff1f","text":""},{"location":"features/env-prefix/#_4","title":"\u274c \u6ca1\u6709\u524d\u7f00\u7684\u95ee\u9898","text":"<pre><code># \u591a\u4e2a\u5e94\u7528\u53ef\u80fd\u4f7f\u7528\u76f8\u540c\u7684\u73af\u5883\u53d8\u91cf\u540d\nexport DEBUG=true       # \u4f60\u7684\u5e94\u7528\nexport DEBUG=false      # \u53e6\u4e00\u4e2a\u5e94\u7528\nexport PORT=8000        # \u4f60\u7684\u5e94\u7528  \nexport PORT=3000        # \u53e6\u4e00\u4e2a\u5e94\u7528\nexport HOST=0.0.0.0     # \u4f60\u7684\u5e94\u7528\nexport HOST=localhost   # \u53e6\u4e00\u4e2a\u5e94\u7528\n\n# \u4f1a\u53d1\u751f\u51b2\u7a81\uff01\u6700\u540e\u4e00\u4e2a\u4f1a\u8986\u76d6\u524d\u9762\u7684\n</code></pre>"},{"location":"features/env-prefix/#_5","title":"\u2705 \u4f7f\u7528\u524d\u7f00\u7684\u4f18\u52bf","text":"<pre><code># \u4f7f\u7528\u524d\u7f00\uff0c\u6bcf\u4e2a\u5e94\u7528\u90fd\u6709\u81ea\u5df1\u7684\u547d\u540d\u7a7a\u95f4\nexport FASTER_DEBUG=true\nexport FASTER_PORT=8000\nexport FASTER_HOST=0.0.0.0\n\nexport ANOTHER_APP_DEBUG=false\nexport ANOTHER_APP_PORT=3000\nexport ANOTHER_APP_HOST=localhost\n\n# \u4e0d\u4f1a\u51b2\u7a81\uff01\u5404\u81ea\u72ec\u7acb\n</code></pre>"},{"location":"features/env-prefix/#_6","title":"\u4f7f\u7528\u65b9\u5f0f","text":""},{"location":"features/env-prefix/#1-env","title":"\u65b9\u5f0f 1: .env \u6587\u4ef6\uff08\u63a8\u8350\uff09","text":"<p>\u521b\u5efa <code>.env</code> \u6587\u4ef6\uff0c\u6240\u6709\u914d\u7f6e\u9879\u90fd\u9700\u8981 <code>FASTER_</code> \u524d\u7f00\uff1a</p> <pre><code># .env\n\n# \u57fa\u7840\u914d\u7f6e\nFASTER_PROJECT_NAME=My App\nFASTER_VERSION=1.0.0\nFASTER_DEBUG=false\n\n# \u670d\u52a1\u5668\u914d\u7f6e\nFASTER_HOST=0.0.0.0\nFASTER_PORT=8000\n\n# API \u914d\u7f6e\nFASTER_API_V1_STR=/api/v1\n\n# JWT \u914d\u7f6e\nFASTER_SECRET_KEY=your-super-secret-key-with-at-least-32-chars\nFASTER_ALGORITHM=HS256\nFASTER_ACCESS_TOKEN_EXPIRE_MINUTES=60\n\n# \u6570\u636e\u5e93\u914d\u7f6e\nFASTER_DB_TYPE=postgres\nFASTER_DB_HOST=db.production.com\nFASTER_DB_PORT=5432\nFASTER_DB_USER=prod_user\nFASTER_DB_PASSWORD=Str0ng!P@ssw0rd\nFASTER_DB_DATABASE=production_db\n\n# \u65e5\u5fd7\u914d\u7f6e\nFASTER_LOG_LEVEL=INFO\nFASTER_LOG_FORMAT=STRING\n</code></pre>"},{"location":"features/env-prefix/#2","title":"\u65b9\u5f0f 2: \u7cfb\u7edf\u73af\u5883\u53d8\u91cf","text":"<pre><code># Linux/macOS\nexport FASTER_DEBUG=false\nexport FASTER_SECRET_KEY=your-secret-key\nexport FASTER_DB_PASSWORD=your-password\n\n# Windows CMD\nset FASTER_DEBUG=false\nset FASTER_SECRET_KEY=your-secret-key\n\n# Windows PowerShell\n$env:FASTER_DEBUG=\"false\"\n$env:FASTER_SECRET_KEY=\"your-secret-key\"\n</code></pre>"},{"location":"features/env-prefix/#3-docker-compose","title":"\u65b9\u5f0f 3: Docker Compose","text":"<pre><code># docker-compose.yml\nversion: '3.8'\n\nservices:\n  app:\n    image: faster-app:latest\n    environment:\n      - FASTER_DEBUG=false\n      - FASTER_SECRET_KEY=${FASTER_SECRET_KEY}\n      - FASTER_DB_HOST=postgres\n      - FASTER_DB_PASSWORD=${FASTER_DB_PASSWORD}\n    env_file:\n      - .env.production\n</code></pre>"},{"location":"features/env-prefix/#4-kubernetes-configmapsecret","title":"\u65b9\u5f0f 4: Kubernetes ConfigMap/Secret","text":"<pre><code># configmap.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: faster-app-config\ndata:\n  FASTER_DEBUG: \"false\"\n  FASTER_DB_HOST: \"postgres-service\"\n  FASTER_DB_PORT: \"5432\"\n  FASTER_LOG_LEVEL: \"INFO\"\n\n---\n# secret.yaml\napiVersion: v1\nkind: Secret\nmetadata:\n  name: faster-app-secrets\ntype: Opaque\nstringData:\n  FASTER_SECRET_KEY: \"your-secret-key-here\"\n  FASTER_DB_PASSWORD: \"your-db-password-here\"\n</code></pre>"},{"location":"features/env-prefix/#_7","title":"\u914d\u7f6e\u9879\u6620\u5c04","text":"\u73af\u5883\u53d8\u91cf \u914d\u7f6e\u5b57\u6bb5 \u7c7b\u578b \u9ed8\u8ba4\u503c <code>FASTER_PROJECT_NAME</code> PROJECT_NAME str \"Faster APP\" <code>FASTER_VERSION</code> VERSION str \"0.0.1\" <code>FASTER_DEBUG</code> DEBUG bool true <code>FASTER_HOST</code> HOST str \"0.0.0.0\" <code>FASTER_PORT</code> PORT int 8000 <code>FASTER_API_V1_STR</code> API_V1_STR str \"/api/v1\" <code>FASTER_SECRET_KEY</code> SECRET_KEY SecretStr \"...\" <code>FASTER_ALGORITHM</code> ALGORITHM str \"HS256\" <code>FASTER_ACCESS_TOKEN_EXPIRE_MINUTES</code> ACCESS_TOKEN_EXPIRE_MINUTES int 30 <code>FASTER_DB_TYPE</code> DB_TYPE str \"sqlite\" <code>FASTER_DB_ENGINE</code> DB_ENGINE str \"tortoise.backends.asyncpg\" <code>FASTER_DB_HOST</code> DB_HOST str \"localhost\" <code>FASTER_DB_PORT</code> DB_PORT int 5432 <code>FASTER_DB_USER</code> DB_USER str \"postgres\" <code>FASTER_DB_PASSWORD</code> DB_PASSWORD SecretStr \"postgres\" <code>FASTER_DB_DATABASE</code> DB_DATABASE str \"faster_app\" <code>FASTER_LOG_LEVEL</code> LOG_LEVEL str \"INFO\" <code>FASTER_LOG_FORMAT</code> LOG_FORMAT str \"STRING\""},{"location":"features/env-prefix/#_8","title":"\u91cd\u8981\u6ce8\u610f\u4e8b\u9879","text":""},{"location":"features/env-prefix/#_9","title":"\u26a0\ufe0f \u524d\u7f00\u662f\u5fc5\u9700\u7684","text":"<p>\u4ece\u914d\u7f6e\u7cfb\u7edf\u542f\u7528\u524d\u7f00\u540e\uff0c**\u6240\u6709**\u73af\u5883\u53d8\u91cf\u90fd\u5fc5\u987b\u4f7f\u7528 <code>FASTER_</code> \u524d\u7f00\uff1a</p> <pre><code># \u274c \u9519\u8bef\uff1a\u4e0d\u5e26\u524d\u7f00\u7684\u53d8\u91cf\u4f1a\u88ab\u5ffd\u7565\nexport DEBUG=false\nexport SECRET_KEY=my-key\n\n# \u2705 \u6b63\u786e\uff1a\u4f7f\u7528\u524d\u7f00\nexport FASTER_DEBUG=false\nexport FASTER_SECRET_KEY=my-key\n</code></pre>"},{"location":"features/env-prefix/#env","title":"\ud83d\udcdd .env \u6587\u4ef6\u4e5f\u9700\u8981\u524d\u7f00","text":"<p>\u5373\u4f7f\u5728 <code>.env</code> \u6587\u4ef6\u4e2d\uff0c\u4e5f\u5fc5\u987b\u4f7f\u7528\u524d\u7f00\uff1a</p> <pre><code># .env\n\n# \u274c \u9519\u8bef\nDEBUG=false\nSECRET_KEY=my-key\n\n# \u2705 \u6b63\u786e\nFASTER_DEBUG=false\nFASTER_SECRET_KEY=my-key\n</code></pre>"},{"location":"features/env-prefix/#_10","title":"\ud83d\udd04 \u7c7b\u578b\u81ea\u52a8\u8f6c\u6362","text":"<p>Pydantic \u4f1a\u81ea\u52a8\u8f6c\u6362\u73af\u5883\u53d8\u91cf\u7684\u7c7b\u578b\uff1a</p> <pre><code># \u5e03\u5c14\u503c\nFASTER_DEBUG=true    # \u2192 True\nFASTER_DEBUG=false   # \u2192 False\nFASTER_DEBUG=1       # \u2192 True\nFASTER_DEBUG=0       # \u2192 False\n\n# \u6574\u6570\nFASTER_PORT=8000     # \u2192 8000 (int)\n\n# \u5b57\u7b26\u4e32\nFASTER_PROJECT_NAME=\"My App\"  # \u2192 \"My App\" (str)\n</code></pre>"},{"location":"features/env-prefix/#_11","title":"\u9a8c\u8bc1\u524d\u7f00\u529f\u80fd","text":""},{"location":"features/env-prefix/#_12","title":"\u6d4b\u8bd5\u662f\u5426\u6b63\u786e\u4f7f\u7528\u524d\u7f00","text":"<pre><code>import os\nfrom faster_app.settings.builtins.settings import DefaultSettings\n\n# \u6d4b\u8bd5 1: \u8bbe\u7f6e\u4e0d\u5e26\u524d\u7f00\u7684\u73af\u5883\u53d8\u91cf\uff08\u5e94\u8be5\u88ab\u5ffd\u7565\uff09\nos.environ[\"DEBUG\"] = \"false\"\nos.environ[\"PORT\"] = \"9000\"\n\nsettings = DefaultSettings()\nprint(settings.DEBUG)  # \u8f93\u51fa: True\uff08\u4f7f\u7528\u9ed8\u8ba4\u503c\uff0c\u5ffd\u7565\u73af\u5883\u53d8\u91cf\uff09\nprint(settings.PORT)   # \u8f93\u51fa: 8000\uff08\u4f7f\u7528\u9ed8\u8ba4\u503c\uff0c\u5ffd\u7565\u73af\u5883\u53d8\u91cf\uff09\n\n# \u6d4b\u8bd5 2: \u8bbe\u7f6e\u5e26\u524d\u7f00\u7684\u73af\u5883\u53d8\u91cf\uff08\u5e94\u8be5\u88ab\u4f7f\u7528\uff09\nos.environ[\"FASTER_DEBUG\"] = \"false\"\nos.environ[\"FASTER_PORT\"] = \"9000\"\n\nsettings = DefaultSettings()\nprint(settings.DEBUG)  # \u8f93\u51fa: False\uff08\u4f7f\u7528\u73af\u5883\u53d8\u91cf\uff09\nprint(settings.PORT)   # \u8f93\u51fa: 9000\uff08\u4f7f\u7528\u73af\u5883\u53d8\u91cf\uff09\n</code></pre>"},{"location":"features/env-prefix/#_13","title":"\u8fc1\u79fb\u6307\u5357","text":""},{"location":"features/env-prefix/#_14","title":"\u4ece\u65e0\u524d\u7f00\u8fc1\u79fb\u5230\u6709\u524d\u7f00","text":"<p>\u5982\u679c\u4f60\u5df2\u7ecf\u5728\u4f7f\u7528 Faster APP \u4e14\u73af\u5883\u53d8\u91cf\u6ca1\u6709\u524d\u7f00\uff0c\u9700\u8981\u6267\u884c\u4ee5\u4e0b\u8fc1\u79fb\uff1a</p>"},{"location":"features/env-prefix/#1-env_1","title":"\u6b65\u9aa4 1: \u66f4\u65b0 .env \u6587\u4ef6","text":"<pre><code># \u65e7\u7684 .env\uff08\u65e0\u524d\u7f00\uff09\nDEBUG=false\nSECRET_KEY=my-key\nDB_PASSWORD=my-password\n\n# \u65b0\u7684 .env\uff08\u6709\u524d\u7f00\uff09\nFASTER_DEBUG=false\nFASTER_SECRET_KEY=my-key\nFASTER_DB_PASSWORD=my-password\n</code></pre>"},{"location":"features/env-prefix/#2_1","title":"\u6b65\u9aa4 2: \u66f4\u65b0\u90e8\u7f72\u811a\u672c","text":"<pre><code># \u65e7\u811a\u672c\nexport DEBUG=false\nexport SECRET_KEY=$SECRET_KEY\n\n# \u65b0\u811a\u672c\nexport FASTER_DEBUG=false\nexport FASTER_SECRET_KEY=$SECRET_KEY\n</code></pre>"},{"location":"features/env-prefix/#3-dockerk8s","title":"\u6b65\u9aa4 3: \u66f4\u65b0 Docker/K8s \u914d\u7f6e","text":"<pre><code># \u65e7\u7684 docker-compose.yml\nenvironment:\n  - DEBUG=false\n  - SECRET_KEY=${SECRET_KEY}\n\n# \u65b0\u7684 docker-compose.yml\nenvironment:\n  - FASTER_DEBUG=false\n  - FASTER_SECRET_KEY=${SECRET_KEY}\n</code></pre>"},{"location":"features/env-prefix/#4-cicd","title":"\u6b65\u9aa4 4: \u66f4\u65b0 CI/CD \u914d\u7f6e","text":"<pre><code># GitHub Actions \u793a\u4f8b\n# \u65e7\u7684\nenv:\n  DEBUG: false\n  SECRET_KEY: ${{ secrets.SECRET_KEY }}\n\n# \u65b0\u7684\nenv:\n  FASTER_DEBUG: false\n  FASTER_SECRET_KEY: ${{ secrets.SECRET_KEY }}\n</code></pre>"},{"location":"features/env-prefix/#_15","title":"\u6279\u91cf\u8fc1\u79fb\u811a\u672c","text":"<p>\u5982\u679c\u4f60\u6709\u5927\u91cf\u73af\u5883\u53d8\u91cf\u9700\u8981\u8fc1\u79fb\uff0c\u53ef\u4ee5\u4f7f\u7528\u811a\u672c\uff1a</p> <pre><code>#!/bin/bash\n# migrate_env.sh\n\n# \u8bfb\u53d6\u65e7\u7684 .env \u6587\u4ef6\u5e76\u6dfb\u52a0\u524d\u7f00\nwhile IFS='=' read -r key value; do\n  # \u8df3\u8fc7\u7a7a\u884c\u548c\u6ce8\u91ca\n  if [[ -z \"$key\" ]] || [[ \"$key\" =~ ^# ]]; then\n    continue\n  fi\n\n  # \u6dfb\u52a0\u524d\u7f00\u5e76\u8f93\u51fa\n  echo \"FASTER_${key}=${value}\"\ndone &lt; .env &gt; .env.new\n\necho \"\u8fc1\u79fb\u5b8c\u6210\uff01\u8bf7\u68c0\u67e5 .env.new \u6587\u4ef6\"\n</code></pre>"},{"location":"features/env-prefix/#_16","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"features/env-prefix/#_17","title":"\u2705 \u63a8\u8350\u505a\u6cd5","text":"<ol> <li> <p>\u59cb\u7ec8\u4f7f\u7528\u524d\u7f00 <pre><code>export FASTER_DEBUG=false\n</code></pre></p> </li> <li> <p>\u5728 .env.example \u4e2d\u4e5f\u4f7f\u7528\u524d\u7f00 <pre><code># .env.example\nFASTER_SECRET_KEY=change-me\nFASTER_DB_PASSWORD=change-me\n</code></pre></p> </li> <li> <p>\u6587\u6863\u4e2d\u8bf4\u660e\u524d\u7f00\u8981\u6c42 <pre><code>## \u73af\u5883\u53d8\u91cf\n\n\u6240\u6709\u73af\u5883\u53d8\u91cf\u90fd\u9700\u8981 `FASTER_` \u524d\u7f00\uff1a\n- FASTER_DEBUG\n- FASTER_SECRET_KEY\n- ...\n</code></pre></p> </li> <li> <p>\u5728\u9519\u8bef\u6d88\u606f\u4e2d\u63d0\u793a\u524d\u7f00 <pre><code># \u5982\u679c\u914d\u7f6e\u52a0\u8f7d\u5931\u8d25\uff0c\u63d0\u793a\u7528\u6237\u68c0\u67e5\u524d\u7f00\nprint(\"\u63d0\u793a\uff1a\u73af\u5883\u53d8\u91cf\u9700\u8981 FASTER_ \u524d\u7f00\")\n</code></pre></p> </li> </ol>"},{"location":"features/env-prefix/#_18","title":"\u274c \u907f\u514d\u7684\u505a\u6cd5","text":"<ol> <li>\u274c \u6df7\u7528\u5e26\u524d\u7f00\u548c\u4e0d\u5e26\u524d\u7f00\u7684\u53d8\u91cf</li> <li>\u274c \u5728\u4e0d\u540c\u73af\u5883\u4f7f\u7528\u4e0d\u540c\u7684\u524d\u7f00\u89c4\u5219</li> <li>\u274c \u5fd8\u8bb0\u5728 .env.example \u4e2d\u6dfb\u52a0\u524d\u7f00</li> <li>\u274c \u90e8\u7f72\u811a\u672c\u4e2d\u4f7f\u7528\u4e0d\u5e26\u524d\u7f00\u7684\u53d8\u91cf</li> </ol>"},{"location":"features/env-prefix/#_19","title":"\u6545\u969c\u6392\u67e5","text":""},{"location":"features/env-prefix/#1","title":"\u95ee\u9898 1: \u73af\u5883\u53d8\u91cf\u4e0d\u751f\u6548","text":"<p>\u75c7\u72b6\uff1a \u8bbe\u7f6e\u4e86\u73af\u5883\u53d8\u91cf\uff0c\u4f46\u5e94\u7528\u4ecd\u4f7f\u7528\u9ed8\u8ba4\u503c</p> <p>\u539f\u56e0\uff1a \u53ef\u80fd\u5fd8\u8bb0\u6dfb\u52a0\u524d\u7f00</p> <p>\u89e3\u51b3\uff1a <pre><code># \u274c \u9519\u8bef\nexport DEBUG=false\n\n# \u2705 \u6b63\u786e\nexport FASTER_DEBUG=false\n</code></pre></p>"},{"location":"features/env-prefix/#2_2","title":"\u95ee\u9898 2: \u90e8\u7f72\u540e\u914d\u7f6e\u9519\u8bef","text":"<p>\u75c7\u72b6\uff1a \u672c\u5730\u8fd0\u884c\u6b63\u5e38\uff0c\u90e8\u7f72\u540e\u51fa\u9519</p> <p>\u539f\u56e0\uff1a \u90e8\u7f72\u73af\u5883\u7684\u73af\u5883\u53d8\u91cf\u6ca1\u6709\u6dfb\u52a0\u524d\u7f00</p> <p>\u89e3\u51b3\uff1a \u68c0\u67e5\u5e76\u66f4\u65b0\u90e8\u7f72\u914d\u7f6e\uff08Docker\u3001K8s\u3001CI/CD\u7b49\uff09</p>"},{"location":"features/env-prefix/#3","title":"\u95ee\u9898 3: \u654f\u611f\u4fe1\u606f\u672a\u52a0\u8f7d","text":"<p>\u75c7\u72b6\uff1a SECRET_KEY \u6216 DB_PASSWORD \u4f7f\u7528\u9ed8\u8ba4\u503c</p> <p>\u539f\u56e0\uff1a \u5fd8\u8bb0\u5728\u73af\u5883\u53d8\u91cf\u540d\u524d\u6dfb\u52a0 FASTER_ \u524d\u7f00</p> <p>\u89e3\u51b3\uff1a <pre><code># \u274c \u9519\u8bef\nexport SECRET_KEY=my-secret\n\n# \u2705 \u6b63\u786e\nexport FASTER_SECRET_KEY=my-secret\n</code></pre></p>"},{"location":"features/env-prefix/#_20","title":"\u6280\u672f\u7ec6\u8282","text":""},{"location":"features/env-prefix/#pydantic","title":"Pydantic \u914d\u7f6e","text":"<p>\u524d\u7f00\u662f\u901a\u8fc7 Pydantic Settings \u7684 <code>env_prefix</code> \u914d\u7f6e\u5b9e\u73b0\u7684\uff1a</p> <pre><code>class DefaultSettings(BaseSettings):\n    # ... \u5b57\u6bb5\u5b9a\u4e49 ...\n\n    class Config:\n        env_file = \".env\"\n        env_prefix = \"FASTER_\"  # \u6240\u6709\u73af\u5883\u53d8\u91cf\u5fc5\u987b\u6709\u6b64\u524d\u7f00\n        extra = \"ignore\"\n</code></pre>"},{"location":"features/env-prefix/#_21","title":"\u5de5\u4f5c\u539f\u7406","text":"<ol> <li>Pydantic \u8bfb\u53d6\u73af\u5883\u53d8\u91cf\u65f6\uff0c\u4f1a\u81ea\u52a8\u67e5\u627e\u5e26 <code>FASTER_</code> \u524d\u7f00\u7684\u53d8\u91cf</li> <li>\u4f8b\u5982\uff0c<code>PROJECT_NAME</code> \u5b57\u6bb5\u4f1a\u4ece <code>FASTER_PROJECT_NAME</code> \u73af\u5883\u53d8\u91cf\u8bfb\u53d6</li> <li>\u4e0d\u5e26\u524d\u7f00\u7684\u53d8\u91cf\u4f1a\u88ab\u5ffd\u7565</li> </ol>"},{"location":"features/env-prefix/#_22","title":"\u81ea\u5b9a\u4e49\u524d\u7f00","text":"<p>\u5982\u679c\u9700\u8981\u4f7f\u7528\u4e0d\u540c\u7684\u524d\u7f00\uff0c\u53ef\u4ee5\u5728\u81ea\u5b9a\u4e49\u914d\u7f6e\u4e2d\u8986\u76d6\uff1a</p> <pre><code># config/settings.py\nfrom faster_app.settings.builtins.settings import DefaultSettings\n\nclass Settings(DefaultSettings):\n    class Config:\n        env_prefix = \"MYAPP_\"  # \u4f7f\u7528\u81ea\u5b9a\u4e49\u524d\u7f00\n</code></pre>"},{"location":"features/env-prefix/#_23","title":"\u603b\u7ed3","text":"<p>\u73af\u5883\u53d8\u91cf\u524d\u7f00\u662f\u4e00\u4e2a\u7b80\u5355\u4f46\u5f3a\u5927\u7684\u529f\u80fd\uff1a</p> <ul> <li>\u2705 \u907f\u514d\u547d\u540d\u51b2\u7a81</li> <li>\u2705 \u63d0\u9ad8\u914d\u7f6e\u6e05\u6670\u5ea6</li> <li>\u2705 \u4fbf\u4e8e\u591a\u5e94\u7528\u5171\u5b58</li> <li>\u2705 \u7b26\u5408\u6700\u4f73\u5b9e\u8df5</li> </ul> <p>\u8bb0\u4f4f\uff1a\u6240\u6709 Faster APP \u7684\u73af\u5883\u53d8\u91cf\u90fd\u9700\u8981 <code>FASTER_</code> \u524d\u7f00\uff01</p>"},{"location":"features/middleware/","title":"\u4e2d\u95f4\u4ef6","text":"<p>Faster APP \u652f\u6301\u4e2d\u95f4\u4ef6\u7684\u81ea\u52a8\u53d1\u73b0\u548c\u6ce8\u518c\uff0c\u8ba9\u4f60\u8f7b\u677e\u6269\u5c55\u5e94\u7528\u529f\u80fd\u3002</p>"},{"location":"features/middleware/#_2","title":"\ud83c\udfaf \u57fa\u672c\u6982\u5ff5","text":"<p>\u4e2d\u95f4\u4ef6\u662f\u5904\u7406\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u5728\u8bf7\u6c42\u5230\u8fbe\u8def\u7531\u4e4b\u524d\u6216\u54cd\u5e94\u8fd4\u56de\u4e4b\u540e\u6267\u884c\u989d\u5916\u903b\u8f91\u3002</p>"},{"location":"features/middleware/#_3","title":"\u521b\u5efa\u4e2d\u95f4\u4ef6","text":"<pre><code># middleware/auth.py\nfrom faster_app.middleware.base import BaseMiddleware\nfrom fastapi import Request\nfrom starlette.middleware.base import RequestResponseEndpoint\n\nclass AuthMiddleware(BaseMiddleware):\n    \"\"\"\u8ba4\u8bc1\u4e2d\u95f4\u4ef6\"\"\"\n\n    priority = 100  # \u4f18\u5148\u7ea7\uff08\u6570\u5b57\u8d8a\u5c0f\u8d8a\u5148\u6267\u884c\uff09\n\n    async def __call__(\n        self,\n        request: Request,\n        call_next: RequestResponseEndpoint\n    ):\n        # \u8bf7\u6c42\u524d\u5904\u7406\n        token = request.headers.get(\"Authorization\")\n        if token:\n            request.state.user = await self.authenticate(token)\n\n        # \u8c03\u7528\u4e0b\u4e00\u4e2a\u4e2d\u95f4\u4ef6/\u8def\u7531\n        response = await call_next(request)\n\n        # \u54cd\u5e94\u540e\u5904\u7406\n        response.headers[\"X-Process-Time\"] = str(time.time())\n\n        return response\n\n    async def authenticate(self, token: str):\n        \"\"\"\u8ba4\u8bc1\u903b\u8f91\"\"\"\n        # \u5b9e\u73b0\u4f60\u7684\u8ba4\u8bc1\u903b\u8f91\n        pass\n</code></pre> <p>\u66f4\u591a\u5185\u5bb9\u8bf7\u67e5\u770b\u5b8c\u6574\u6587\u6863...</p>"},{"location":"features/models/","title":"\u6a21\u578b\u57fa\u7c7b","text":"<p>Faster APP \u63d0\u4f9b\u4e86\u4e00\u5957\u5f00\u7bb1\u5373\u7528\u7684\u6a21\u578b\u57fa\u7c7b\uff0c\u8986\u76d6 90% \u7684\u4e1a\u52a1\u573a\u666f\uff0c\u8ba9\u4f60\u65e0\u9700\u91cd\u590d\u7f16\u5199\u5e38\u7528\u5b57\u6bb5\u3002</p>"},{"location":"features/models/#_2","title":"\ud83c\udfaf \u8bbe\u8ba1\u7406\u5ff5","text":"<p>\u6838\u5fc3\u601d\u60f3</p> <p>\u901a\u8fc7\u7ec4\u5408\u57fa\u7c7b\uff0c\u5feb\u901f\u6784\u5efa\u6ee1\u8db3\u4e1a\u52a1\u9700\u6c42\u7684\u6570\u636e\u6a21\u578b\uff0c\u51cf\u5c11\u91cd\u590d\u4ee3\u7801\u3002</p>"},{"location":"features/models/#_3","title":"\ud83d\udce6 \u57fa\u7c7b\u6982\u89c8","text":"\u57fa\u7c7b \u529f\u80fd \u4e3b\u8981\u5b57\u6bb5 \u9002\u7528\u573a\u666f <code>UUIDModel</code> UUID \u4e3b\u952e <code>id</code> (UUID) \u5927\u90e8\u5206\u4e1a\u52a1\u8868 <code>DateTimeModel</code> \u65f6\u95f4\u6233 <code>created_at</code>, <code>updated_at</code> \u9700\u8981\u8ffd\u8e2a\u521b\u5efa/\u66f4\u65b0\u65f6\u95f4 <code>EnumModel</code> \u679a\u4e3e\u5b57\u6bb5 \u52a8\u6001\u679a\u4e3e \u72b6\u6001\u673a\u3001\u5206\u7c7b\u7b49 <code>ScopeModel</code> \u591a\u79df\u6237 <code>scope_id</code> SaaS \u5e94\u7528"},{"location":"features/models/#uuidmodel-uuid","title":"\ud83d\udd11 UUIDModel - UUID \u4e3b\u952e","text":""},{"location":"features/models/#_4","title":"\u57fa\u672c\u7528\u6cd5","text":"<pre><code>from faster_app.models.base import UUIDModel\nfrom tortoise import fields\n\nclass User(UUIDModel):\n    \"\"\"\u7528\u6237\u6a21\u578b\"\"\"\n    username = fields.CharField(max_length=50)\n    email = fields.CharField(max_length=100)\n\n    class Meta:\n        table = \"users\"\n</code></pre> <p>\u751f\u6210\u7684\u8868\u7ed3\u6784\uff1a</p> <pre><code>CREATE TABLE users (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    username VARCHAR(50) NOT NULL,\n    email VARCHAR(100) NOT NULL\n);\n</code></pre>"},{"location":"features/models/#uuid","title":"\u4e3a\u4ec0\u4e48\u4f7f\u7528 UUID\uff1f","text":"<p>!!! success \"UUID \u7684\u4f18\u52bf\" - \u2705 \u5168\u5c40\u552f\u4e00\uff1a\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u65e0\u51b2\u7a81 - \u2705 \u5b89\u5168\u6027\u9ad8\uff1a\u4e0d\u4f1a\u6cc4\u9732\u6570\u636e\u91cf\u4fe1\u606f - \u2705 \u53ef\u79bb\u7ebf\u751f\u6210\uff1a\u65e0\u9700\u4f9d\u8d56\u6570\u636e\u5e93 - \u2705 \u4fbf\u4e8e\u5408\u5e76\u6570\u636e\uff1a\u591a\u4e2a\u6570\u636e\u6e90\u5408\u5e76\u65f6\u65e0\u51b2\u7a81</p> <p>!!! warning \"\u6ce8\u610f\u4e8b\u9879\" - \u274c \u5b58\u50a8\u7a7a\u95f4\uff1a\u6bd4\u6574\u578b\u5360\u7528\u66f4\u591a\u7a7a\u95f4\uff0816 \u5b57\u8282\uff09 - \u274c \u6027\u80fd\uff1a\u7d22\u5f15\u548c\u67e5\u8be2\u7565\u6162\u4e8e\u6574\u578b - \u274c \u53ef\u8bfb\u6027\uff1a\u4e0d\u5982\u81ea\u589e ID \u76f4\u89c2</p>"},{"location":"features/models/#_5","title":"\u4f7f\u7528\u793a\u4f8b","text":"<pre><code># \u521b\u5efa\u8bb0\u5f55\nuser = await User.create(username=\"alice\", email=\"alice@example.com\")\nprint(user.id)  # UUID('550e8400-e29b-41d4-a716-446655440000')\n\n# \u67e5\u8be2\u8bb0\u5f55\nuser = await User.get(id=\"550e8400-e29b-41d4-a716-446655440000\")\n\n# \u6279\u91cf\u67e5\u8be2\nusers = await User.filter(\n    id__in=[\n        \"550e8400-e29b-41d4-a716-446655440000\",\n        \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\"\n    ]\n)\n</code></pre>"},{"location":"features/models/#datetimemodel-","title":"\u23f0 DateTimeModel - \u65f6\u95f4\u6233","text":""},{"location":"features/models/#_6","title":"\u57fa\u672c\u7528\u6cd5","text":"<pre><code>from faster_app.models.base import DateTimeModel\nfrom tortoise import fields\n\nclass Article(DateTimeModel):\n    \"\"\"\u6587\u7ae0\u6a21\u578b\"\"\"\n    title = fields.CharField(max_length=200)\n    content = fields.TextField()\n\n    class Meta:\n        table = \"articles\"\n</code></pre> <p>\u751f\u6210\u7684\u8868\u7ed3\u6784\uff1a</p> <pre><code>CREATE TABLE articles (\n    id SERIAL PRIMARY KEY,\n    title VARCHAR(200) NOT NULL,\n    content TEXT NOT NULL,\n    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP\n);\n</code></pre>"},{"location":"features/models/#_7","title":"\u5b57\u6bb5\u8bf4\u660e","text":"<ul> <li><code>created_at</code>: \u521b\u5efa\u65f6\u95f4\uff0c\u81ea\u52a8\u8bbe\u7f6e\uff0c\u4e0d\u53ef\u4fee\u6539</li> <li><code>updated_at</code>: \u66f4\u65b0\u65f6\u95f4\uff0c\u6bcf\u6b21\u4fdd\u5b58\u65f6\u81ea\u52a8\u66f4\u65b0</li> </ul>"},{"location":"features/models/#_8","title":"\u4f7f\u7528\u793a\u4f8b","text":"<pre><code># \u521b\u5efa\u6587\u7ae0\narticle = await Article.create(\n    title=\"Python \u6700\u4f73\u5b9e\u8df5\",\n    content=\"...\"\n)\nprint(article.created_at)  # 2024-01-01 10:00:00\nprint(article.updated_at)  # 2024-01-01 10:00:00\n\n# \u66f4\u65b0\u6587\u7ae0\narticle.title = \"Python \u8fdb\u9636\"\nawait article.save()\nprint(article.created_at)  # 2024-01-01 10:00:00 (\u4e0d\u53d8)\nprint(article.updated_at)  # 2024-01-01 10:30:00 (\u81ea\u52a8\u66f4\u65b0)\n</code></pre>"},{"location":"features/models/#_9","title":"\u67e5\u8be2\u793a\u4f8b","text":"<pre><code>from datetime import datetime, timedelta\n\n# \u67e5\u8be2\u6700\u8fd1 7 \u5929\u7684\u6587\u7ae0\nweek_ago = datetime.now() - timedelta(days=7)\nrecent_articles = await Article.filter(created_at__gte=week_ago)\n\n# \u67e5\u8be2\u4eca\u5929\u66f4\u65b0\u7684\u6587\u7ae0\ntoday = datetime.now().date()\ntoday_updated = await Article.filter(\n    updated_at__gte=today,\n    updated_at__lt=today + timedelta(days=1)\n)\n</code></pre>"},{"location":"features/models/#enummodel-","title":"\ud83c\udfa8 EnumModel - \u679a\u4e3e\u5b57\u6bb5","text":""},{"location":"features/models/#_10","title":"\u57fa\u672c\u7528\u6cd5","text":"<pre><code>from faster_app.models.base import EnumModel\nfrom tortoise import fields\nfrom enum import Enum\n\nclass OrderStatus(str, Enum):\n    \"\"\"\u8ba2\u5355\u72b6\u6001\"\"\"\n    PENDING = \"pending\"\n    PAID = \"paid\"\n    SHIPPED = \"shipped\"\n    DELIVERED = \"delivered\"\n    CANCELLED = \"cancelled\"\n\nclass Order(EnumModel):\n    \"\"\"\u8ba2\u5355\u6a21\u578b\"\"\"\n    order_no = fields.CharField(max_length=50, unique=True)\n    amount = fields.DecimalField(max_digits=10, decimal_places=2)\n    status = fields.CharEnumField(OrderStatus, default=OrderStatus.PENDING)\n\n    class Meta:\n        table = \"orders\"\n</code></pre>"},{"location":"features/models/#_11","title":"\u4f7f\u7528\u793a\u4f8b","text":"<pre><code># \u521b\u5efa\u8ba2\u5355\norder = await Order.create(\n    order_no=\"ORD20240101001\",\n    amount=99.99,\n    status=OrderStatus.PENDING\n)\n\n# \u66f4\u65b0\u72b6\u6001\norder.status = OrderStatus.PAID\nawait order.save()\n\n# \u67e5\u8be2\u7279\u5b9a\u72b6\u6001\u7684\u8ba2\u5355\npending_orders = await Order.filter(status=OrderStatus.PENDING)\n\n# \u67e5\u8be2\u591a\u4e2a\u72b6\u6001\u7684\u8ba2\u5355\nactive_orders = await Order.filter(\n    status__in=[OrderStatus.PENDING, OrderStatus.PAID]\n)\n</code></pre>"},{"location":"features/models/#_12","title":"\u72b6\u6001\u673a\u6a21\u5f0f","text":"<pre><code>class Order(EnumModel):\n    \"\"\"\u8ba2\u5355\u6a21\u578b\uff08\u5e26\u72b6\u6001\u673a\uff09\"\"\"\n\n    # \u72b6\u6001\u8f6c\u6362\u89c4\u5219\n    STATUS_TRANSITIONS = {\n        OrderStatus.PENDING: [OrderStatus.PAID, OrderStatus.CANCELLED],\n        OrderStatus.PAID: [OrderStatus.SHIPPED, OrderStatus.CANCELLED],\n        OrderStatus.SHIPPED: [OrderStatus.DELIVERED],\n        OrderStatus.DELIVERED: [],\n        OrderStatus.CANCELLED: [],\n    }\n\n    async def change_status(self, new_status: OrderStatus):\n        \"\"\"\u5b89\u5168\u7684\u72b6\u6001\u8f6c\u6362\"\"\"\n        allowed = self.STATUS_TRANSITIONS.get(self.status, [])\n        if new_status not in allowed:\n            raise ValueError(\n                f\"\u65e0\u6cd5\u4ece {self.status} \u8f6c\u6362\u5230 {new_status}\"\n            )\n\n        self.status = new_status\n        await self.save()\n</code></pre>"},{"location":"features/models/#scopemodel-","title":"\ud83c\udfe2 ScopeModel - \u591a\u79df\u6237","text":""},{"location":"features/models/#_13","title":"\u57fa\u672c\u7528\u6cd5","text":"<pre><code>from faster_app.models.base import ScopeModel\nfrom tortoise import fields\n\nclass Product(ScopeModel):\n    \"\"\"\u5546\u54c1\u6a21\u578b\uff08\u591a\u79df\u6237\uff09\"\"\"\n    name = fields.CharField(max_length=100)\n    price = fields.DecimalField(max_digits=10, decimal_places=2)\n\n    class Meta:\n        table = \"products\"\n</code></pre> <p>\u751f\u6210\u7684\u8868\u7ed3\u6784\uff1a</p> <pre><code>CREATE TABLE products (\n    id SERIAL PRIMARY KEY,\n    scope_id UUID NOT NULL,  -- \u79df\u6237 ID\n    name VARCHAR(100) NOT NULL,\n    price DECIMAL(10, 2) NOT NULL,\n    INDEX idx_scope_id (scope_id)\n);\n</code></pre>"},{"location":"features/models/#_14","title":"\u4f7f\u7528\u793a\u4f8b","text":"<pre><code># \u521b\u5efa\u5546\u54c1\uff08\u6307\u5b9a\u79df\u6237\uff09\nproduct = await Product.create(\n    scope_id=\"tenant-001\",\n    name=\"\u7b14\u8bb0\u672c\u7535\u8111\",\n    price=5999.00\n)\n\n# \u67e5\u8be2\u5f53\u524d\u79df\u6237\u7684\u5546\u54c1\ntenant_products = await Product.filter(scope_id=\"tenant-001\")\n\n# \u79df\u6237\u9694\u79bb\u67e5\u8be2\nasync def get_tenant_products(tenant_id: str):\n    \"\"\"\u83b7\u53d6\u6307\u5b9a\u79df\u6237\u7684\u5546\u54c1\"\"\"\n    return await Product.filter(scope_id=tenant_id).all()\n</code></pre>"},{"location":"features/models/#_15","title":"\u4e2d\u95f4\u4ef6\u96c6\u6210","text":"<pre><code># middleware/tenant.py\nfrom faster_app.middleware.base import BaseMiddleware\n\nclass TenantMiddleware(BaseMiddleware):\n    \"\"\"\u79df\u6237\u8bc6\u522b\u4e2d\u95f4\u4ef6\"\"\"\n\n    async def __call__(self, request, call_next):\n        # \u4ece\u8bf7\u6c42\u5934\u83b7\u53d6\u79df\u6237 ID\n        tenant_id = request.headers.get(\"X-Tenant-ID\")\n\n        # \u5b58\u50a8\u5230\u8bf7\u6c42\u4e0a\u4e0b\u6587\n        request.state.tenant_id = tenant_id\n\n        response = await call_next(request)\n        return response\n\n# \u5728\u8def\u7531\u4e2d\u4f7f\u7528\n@router.post(\"/products\")\nasync def create_product(\n    request: Request,\n    name: str,\n    price: float\n):\n    \"\"\"\u521b\u5efa\u5546\u54c1\uff08\u81ea\u52a8\u9694\u79bb\uff09\"\"\"\n    product = await Product.create(\n        scope_id=request.state.tenant_id,\n        name=name,\n        price=price\n    )\n    return product\n</code></pre>"},{"location":"features/models/#_16","title":"\ud83c\udfad \u7ec4\u5408\u4f7f\u7528","text":""},{"location":"features/models/#_17","title":"\u5e38\u89c1\u7ec4\u5408","text":"<pre><code>from faster_app.models.base import UUIDModel, DateTimeModel\nfrom tortoise import fields\n\n# \u6700\u5e38\u7528\u7ec4\u5408\uff1aUUID + \u65f6\u95f4\u6233\nclass User(UUIDModel, DateTimeModel):\n    \"\"\"\u7528\u6237\u6a21\u578b\"\"\"\n    username = fields.CharField(max_length=50)\n    email = fields.CharField(max_length=100)\n\n    class Meta:\n        table = \"users\"\n\n# \u5b8c\u6574\u7ec4\u5408\uff1aUUID + \u65f6\u95f4\u6233 + \u591a\u79df\u6237\nclass Order(UUIDModel, DateTimeModel, ScopeModel):\n    \"\"\"\u8ba2\u5355\u6a21\u578b\uff08\u591a\u79df\u6237\uff09\"\"\"\n    order_no = fields.CharField(max_length=50)\n    amount = fields.DecimalField(max_digits=10, decimal_places=2)\n\n    class Meta:\n        table = \"orders\"\n</code></pre>"},{"location":"features/models/#_18","title":"\u81ea\u5b9a\u4e49\u57fa\u7c7b","text":"<pre><code>from faster_app.models.base import UUIDModel, DateTimeModel\nfrom tortoise import fields\n\nclass BaseModel(UUIDModel, DateTimeModel):\n    \"\"\"\u9879\u76ee\u901a\u7528\u57fa\u7c7b\"\"\"\n\n    is_deleted = fields.BooleanField(default=False, description=\"\u8f6f\u5220\u9664\")\n    remark = fields.TextField(null=True, description=\"\u5907\u6ce8\")\n\n    class Meta:\n        abstract = True  # \u62bd\u8c61\u6a21\u578b\uff0c\u4e0d\u521b\u5efa\u8868\n\nclass User(BaseModel):\n    \"\"\"\u7528\u6237\u6a21\u578b\uff08\u7ee7\u627f\u901a\u7528\u5b57\u6bb5\uff09\"\"\"\n    username = fields.CharField(max_length=50)\n    email = fields.CharField(max_length=100)\n\n    class Meta:\n        table = \"users\"\n</code></pre>"},{"location":"features/models/#_19","title":"\ud83d\udcdd \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"features/models/#1","title":"1. \u9009\u62e9\u5408\u9002\u7684\u4e3b\u952e\u7c7b\u578b","text":"<pre><code># \u2705 \u63a8\u8350\uff1a\u5927\u591a\u6570\u573a\u666f\u4f7f\u7528 UUID\nclass User(UUIDModel):\n    pass\n\n# \u26a0\ufe0f \u7279\u6b8a\u573a\u666f\uff1a\u8d85\u9ad8\u6027\u80fd\u8981\u6c42\uff0c\u4f7f\u7528\u81ea\u589e ID\nclass Log(Model):\n    id = fields.BigIntField(pk=True)\n</code></pre>"},{"location":"features/models/#2","title":"2. \u59cb\u7ec8\u6dfb\u52a0\u65f6\u95f4\u6233","text":"<pre><code># \u2705 \u63a8\u8350\uff1a\u51e0\u4e4e\u6240\u6709\u8868\u90fd\u5e94\u8be5\u6709\u65f6\u95f4\u6233\nclass Article(UUIDModel, DateTimeModel):\n    pass\n\n# \u274c \u4e0d\u63a8\u8350\uff1a\u7f3a\u5c11\u5ba1\u8ba1\u4fe1\u606f\nclass Article(UUIDModel):\n    pass\n</code></pre>"},{"location":"features/models/#3","title":"3. \u5408\u7406\u4f7f\u7528\u679a\u4e3e","text":"<pre><code># \u2705 \u63a8\u8350\uff1a\u56fa\u5b9a\u7684\u72b6\u6001\u503c\u4f7f\u7528\u679a\u4e3e\nclass OrderStatus(str, Enum):\n    PENDING = \"pending\"\n    PAID = \"paid\"\n\nclass Order(Model):\n    status = fields.CharEnumField(OrderStatus)\n\n# \u274c \u4e0d\u63a8\u8350\uff1a\u4f7f\u7528\u5b57\u7b26\u4e32\u6216\u6574\u6570\nclass Order(Model):\n    status = fields.CharField(max_length=20)  # \u5bb9\u6613\u51fa\u9519\n</code></pre>"},{"location":"features/models/#4","title":"4. \u591a\u79df\u6237\u9694\u79bb","text":"<pre><code># \u2705 \u63a8\u8350\uff1a\u4f7f\u7528 ScopeModel\nclass Product(ScopeModel):\n    pass\n\n# \u26a0\ufe0f \u624b\u52a8\u5b9e\u73b0\uff08\u7075\u6d3b\u4f46\u5bb9\u6613\u9057\u6f0f\uff09\nclass Product(Model):\n    tenant_id = fields.UUIDField()\n</code></pre>"},{"location":"features/models/#_20","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u5b66\u4e60 \u8def\u7531\u7ba1\u7406</li> <li>\u4e86\u89e3 CRUD \u5de5\u5177</li> <li>\u638c\u63e1 \u6570\u636e\u5e93\u6700\u4f73\u5b9e\u8df5</li> </ul>"},{"location":"features/production-validation/","title":"\u751f\u4ea7\u73af\u5883\u914d\u7f6e\u9a8c\u8bc1\uff08\u5b89\u5168\uff09","text":""},{"location":"features/production-validation/#_2","title":"\u6982\u8ff0","text":"<p>Faster APP \u63d0\u4f9b\u4e86\u5168\u9762\u7684\u751f\u4ea7\u73af\u5883\u914d\u7f6e\u9a8c\u8bc1\u673a\u5236\uff0c\u786e\u4fdd\u5e94\u7528\u5728\u751f\u4ea7\u73af\u5883\u90e8\u7f72\u65f6\u7684\u5b89\u5168\u6027\u548c\u7a33\u5b9a\u6027\u3002</p>"},{"location":"features/production-validation/#_3","title":"\u9a8c\u8bc1\u5c42\u7ea7","text":""},{"location":"features/production-validation/#1-field-validators","title":"1. \u5b57\u6bb5\u7ea7\u9a8c\u8bc1\uff08Field Validators\uff09","text":"<p>\u9488\u5bf9\u5355\u4e2a\u5b57\u6bb5\u7684\u5373\u65f6\u9a8c\u8bc1\uff0c\u5728\u5b57\u6bb5\u8d4b\u503c\u65f6\u81ea\u52a8\u89e6\u53d1\u3002</p>"},{"location":"features/production-validation/#2-model-validators","title":"2. \u6a21\u578b\u7ea7\u9a8c\u8bc1\uff08Model Validators\uff09","text":"<p>\u5728\u6240\u6709\u5b57\u6bb5\u9a8c\u8bc1\u5b8c\u6210\u540e\u6267\u884c\uff0c\u53ef\u4ee5\u8fdb\u884c\u8de8\u5b57\u6bb5\u7684\u590d\u6742\u9a8c\u8bc1\u903b\u8f91\u3002</p>"},{"location":"features/production-validation/#_4","title":"\u5177\u4f53\u9a8c\u8bc1\u89c4\u5219","text":""},{"location":"features/production-validation/#_5","title":"\ud83d\udd12 \u654f\u611f\u4fe1\u606f\u9a8c\u8bc1","text":""},{"location":"features/production-validation/#secret_key","title":"SECRET_KEY \u9a8c\u8bc1","text":"<p>\u5f00\u53d1\u73af\u5883\uff1a - \u2705 \u5141\u8bb8\u4f7f\u7528\u9ed8\u8ba4\u503c - \u2705 \u5141\u8bb8\u4efb\u610f\u957f\u5ea6</p> <p>\u751f\u4ea7\u73af\u5883\uff08DEBUG=False\uff09\uff1a - \u274c \u4e0d\u80fd\u4f7f\u7528\u9ed8\u8ba4\u503c <code>your-secret-key-here-change-in-production</code> - \u274c \u957f\u5ea6\u5fc5\u987b\u81f3\u5c11 32 \u4e2a\u5b57\u7b26 - \u2705 \u5fc5\u987b\u901a\u8fc7\u73af\u5883\u53d8\u91cf\u8bbe\u7f6e\u5f3a\u5bc6\u94a5</p> <pre><code># \u274c \u751f\u4ea7\u73af\u5883\u4f1a\u62d2\u7edd\nsettings = DefaultSettings(\n    DEBUG=False,\n    SECRET_KEY=\"short\",  # \u592a\u77ed\n    DB_PASSWORD=\"ValidPassword123\"\n)\n# ValidationError: \u751f\u4ea7\u73af\u5883 SECRET_KEY \u957f\u5ea6\u5fc5\u987b\u81f3\u5c11 32 \u4e2a\u5b57\u7b26\n\n# \u2705 \u751f\u4ea7\u73af\u5883\u63a5\u53d7\nsettings = DefaultSettings(\n    DEBUG=False,\n    SECRET_KEY=\"my-super-secret-production-key-12345678\",  # \u226532 \u5b57\u7b26\n    DB_PASSWORD=\"ValidPassword123\"\n)\n</code></pre>"},{"location":"features/production-validation/#db_password","title":"DB_PASSWORD \u9a8c\u8bc1","text":"<p>\u5f00\u53d1\u73af\u5883\uff1a - \u2705 \u5141\u8bb8\u5f31\u5bc6\u7801 - \u2705 \u5141\u8bb8\u4efb\u610f\u957f\u5ea6</p> <p>\u751f\u4ea7\u73af\u5883\uff08DEBUG=False\uff09\uff1a - \u274c \u4e0d\u80fd\u4f7f\u7528\u5f31\u5bc6\u7801\uff1a<code>postgres</code>, <code>password</code>, <code>123456</code>, <code>admin</code>, <code>root</code> - \u274c \u957f\u5ea6\u5fc5\u987b\u81f3\u5c11 8 \u4e2a\u5b57\u7b26 - \u2705 \u5fc5\u987b\u4f7f\u7528\u5f3a\u5bc6\u7801</p> <pre><code># \u274c \u751f\u4ea7\u73af\u5883\u4f1a\u62d2\u7edd\nsettings = DefaultSettings(\n    DEBUG=False,\n    SECRET_KEY=\"a\" * 32,\n    DB_PASSWORD=\"postgres\"  # \u5f31\u5bc6\u7801\n)\n# ValidationError: \u751f\u4ea7\u73af\u5883\u4e0d\u80fd\u4f7f\u7528\u5f31\u5bc6\u7801 'postgres'\n\n# \u2705 \u751f\u4ea7\u73af\u5883\u63a5\u53d7\nsettings = DefaultSettings(\n    DEBUG=False,\n    SECRET_KEY=\"a\" * 32,\n    DB_PASSWORD=\"Str0ng!P@ssw0rd\"  # \u22658 \u5b57\u7b26\u4e14\u4e0d\u5728\u5f31\u5bc6\u7801\u5217\u8868\n)\n</code></pre>"},{"location":"features/production-validation/#_6","title":"\ud83d\udd22 \u6570\u503c\u8303\u56f4\u9a8c\u8bc1","text":""},{"location":"features/production-validation/#port","title":"PORT \u9a8c\u8bc1","text":"<pre><code># \u2705 \u6709\u6548\u7aef\u53e3\nsettings = DefaultSettings(PORT=8000)  # 1-65535\n\n# \u274c \u65e0\u6548\u7aef\u53e3\nsettings = DefaultSettings(PORT=0)      # ValidationError\nsettings = DefaultSettings(PORT=70000)  # ValidationError\n</code></pre>"},{"location":"features/production-validation/#db_port","title":"DB_PORT \u9a8c\u8bc1","text":"<pre><code># \u2705 \u6709\u6548\u6570\u636e\u5e93\u7aef\u53e3\nsettings = DefaultSettings(DB_PORT=5432)  # 1-65535\n\n# \u274c \u65e0\u6548\u6570\u636e\u5e93\u7aef\u53e3\nsettings = DefaultSettings(DB_PORT=-1)    # ValidationError\n</code></pre>"},{"location":"features/production-validation/#access_token_expire_minutes","title":"ACCESS_TOKEN_EXPIRE_MINUTES \u9a8c\u8bc1","text":"<pre><code># \u2705 \u5408\u7406\u7684\u8fc7\u671f\u65f6\u95f4\nsettings = DefaultSettings(ACCESS_TOKEN_EXPIRE_MINUTES=30)  # 1-43200\n\n# \u274c \u8fc7\u77ed\u6216\u8fc7\u957f\nsettings = DefaultSettings(ACCESS_TOKEN_EXPIRE_MINUTES=0)      # ValidationError: \u5fc5\u987b &gt; 0\nsettings = DefaultSettings(ACCESS_TOKEN_EXPIRE_MINUTES=50000)  # ValidationError: \u4e0d\u5e94\u8d85\u8fc7 30 \u5929\n</code></pre> <p>\u751f\u4ea7\u73af\u5883\u989d\u5916\u9650\u5236\uff1a - \u274c \u4e0d\u5e94\u5c11\u4e8e 5 \u5206\u949f\uff08\u9632\u6b62\u9891\u7e41\u91cd\u65b0\u8ba4\u8bc1\uff09</p> <pre><code># \u274c \u751f\u4ea7\u73af\u5883\u4f1a\u62d2\u7edd\nsettings = DefaultSettings(\n    DEBUG=False,\n    SECRET_KEY=\"a\" * 32,\n    DB_PASSWORD=\"ValidPassword123\",\n    ACCESS_TOKEN_EXPIRE_MINUTES=2  # &lt; 5\n)\n# ValidationError: \u751f\u4ea7\u73af\u5883 ACCESS_TOKEN_EXPIRE_MINUTES \u4e0d\u5e94\u5c11\u4e8e 5 \u5206\u949f\n</code></pre>"},{"location":"features/production-validation/#_7","title":"\ud83d\udccb \u679a\u4e3e\u503c\u9a8c\u8bc1","text":""},{"location":"features/production-validation/#log_level","title":"LOG_LEVEL \u9a8c\u8bc1","text":"<pre><code># \u2705 \u6709\u6548\u65e5\u5fd7\u7ea7\u522b\uff08\u81ea\u52a8\u8f6c\u6362\u4e3a\u5927\u5199\uff09\nsettings = DefaultSettings(LOG_LEVEL=\"debug\")   # \u2192 \"DEBUG\"\nsettings = DefaultSettings(LOG_LEVEL=\"INFO\")    # \u2192 \"INFO\"\nsettings = DefaultSettings(LOG_LEVEL=\"error\")   # \u2192 \"ERROR\"\n\n# \u5141\u8bb8\u7684\u503c\uff1aDEBUG, INFO, WARNING, ERROR, CRITICAL\n\n# \u274c \u65e0\u6548\u65e5\u5fd7\u7ea7\u522b\nsettings = DefaultSettings(LOG_LEVEL=\"TRACE\")   # ValidationError\n</code></pre>"},{"location":"features/production-validation/#algorithm","title":"ALGORITHM \u9a8c\u8bc1","text":"<pre><code># \u2705 \u6709\u6548 JWT \u7b97\u6cd5\nsettings = DefaultSettings(ALGORITHM=\"HS256\")   # \u5bf9\u79f0\u52a0\u5bc6\nsettings = DefaultSettings(ALGORITHM=\"RS256\")   # \u975e\u5bf9\u79f0\u52a0\u5bc6\n\n# \u5141\u8bb8\u7684\u503c\uff1aHS256, HS384, HS512, RS256, RS384, RS512\n\n# \u274c \u65e0\u6548\u7b97\u6cd5\nsettings = DefaultSettings(ALGORITHM=\"MD5\")     # ValidationError\n</code></pre>"},{"location":"features/production-validation/#db_type","title":"DB_TYPE \u9a8c\u8bc1","text":"<pre><code># \u2705 \u6709\u6548\u6570\u636e\u5e93\u7c7b\u578b\uff08\u81ea\u52a8\u8f6c\u6362\u4e3a\u5c0f\u5199\uff09\nsettings = DefaultSettings(DB_TYPE=\"SQLITE\")    # \u2192 \"sqlite\"\nsettings = DefaultSettings(DB_TYPE=\"postgres\")  # \u2192 \"postgres\"\nsettings = DefaultSettings(DB_TYPE=\"MySQL\")     # \u2192 \"mysql\"\n\n# \u5141\u8bb8\u7684\u503c\uff1asqlite, postgres, mysql\n\n# \u274c \u65e0\u6548\u6570\u636e\u5e93\u7c7b\u578b\nsettings = DefaultSettings(DB_TYPE=\"mongodb\")   # ValidationError\n</code></pre>"},{"location":"features/production-validation/#warnings","title":"\u26a0\ufe0f \u751f\u4ea7\u73af\u5883\u8b66\u544a\uff08Warnings\uff09","text":"<p>\u67d0\u4e9b\u914d\u7f6e\u5728\u751f\u4ea7\u73af\u5883\u4e0b\u867d\u7136\u53ef\u4ee5\u5de5\u4f5c\uff0c\u4f46\u5b58\u5728\u6f5c\u5728\u98ce\u9669\u6216\u4e0d\u5408\u7406\uff0c\u7cfb\u7edf\u4f1a\u53d1\u51fa\u8b66\u544a\u4f46\u4e0d\u963b\u6b62\u542f\u52a8\u3002</p>"},{"location":"features/production-validation/#1-host0000","title":"\u8b66\u544a 1: HOST=0.0.0.0","text":"<pre><code>settings = DefaultSettings(\n    DEBUG=False,\n    HOST=\"0.0.0.0\",  # \u26a0\ufe0f  \u89e6\u53d1\u8b66\u544a\n    SECRET_KEY=\"a\" * 32,\n    DB_PASSWORD=\"ValidPassword123\"\n)\n# UserWarning: \u751f\u4ea7\u73af\u5883\u4f7f\u7528 HOST=0.0.0.0 \u53ef\u80fd\u5b58\u5728\u5b89\u5168\u98ce\u9669\uff0c\n#              \u5efa\u8bae\u4f7f\u7528\u5177\u4f53\u7684 IP \u5730\u5740\u6216\u57df\u540d\n</code></pre> <p>\u5efa\u8bae\uff1a - \u4f7f\u7528\u5177\u4f53\u7684\u5185\u7f51 IP\uff08\u5982 <code>10.0.0.1</code>\uff09 - \u4f7f\u7528\u57df\u540d - \u901a\u8fc7\u53cd\u5411\u4ee3\u7406\uff08Nginx\uff09\u66b4\u9732\u670d\u52a1</p>"},{"location":"features/production-validation/#2-postgresql-localhost","title":"\u8b66\u544a 2: PostgreSQL \u4f7f\u7528 localhost","text":"<pre><code>settings = DefaultSettings(\n    DEBUG=False,\n    DB_TYPE=\"postgres\",\n    DB_HOST=\"localhost\",  # \u26a0\ufe0f  \u89e6\u53d1\u8b66\u544a\n    SECRET_KEY=\"a\" * 32,\n    DB_PASSWORD=\"ValidPassword123\"\n)\n# UserWarning: \u751f\u4ea7\u73af\u5883\u6570\u636e\u5e93\u4f7f\u7528 localhost \u53ef\u80fd\u914d\u7f6e\u9519\u8bef\uff0c\n#              \u8bf7\u786e\u8ba4\u6570\u636e\u5e93\u8fde\u63a5\u914d\u7f6e\u662f\u5426\u6b63\u786e\n</code></pre> <p>\u539f\u56e0\uff1a - \u751f\u4ea7\u73af\u5883\u901a\u5e38\u4f7f\u7528\u72ec\u7acb\u7684\u6570\u636e\u5e93\u670d\u52a1\u5668 - localhost \u53ef\u80fd\u8868\u793a\u914d\u7f6e\u672a\u66f4\u65b0</p>"},{"location":"features/production-validation/#3","title":"\u8b66\u544a 3: \u4f7f\u7528\u9ed8\u8ba4\u9879\u76ee\u540d","text":"<pre><code>settings = DefaultSettings(\n    DEBUG=False,\n    PROJECT_NAME=\"Faster APP\",  # \u26a0\ufe0f  \u89e6\u53d1\u8b66\u544a\uff08\u9ed8\u8ba4\u503c\uff09\n    SECRET_KEY=\"a\" * 32,\n    DB_PASSWORD=\"ValidPassword123\"\n)\n# UserWarning: \u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4fee\u6539 PROJECT_NAME \u4e3a\u5b9e\u9645\u9879\u76ee\u540d\u79f0\n</code></pre>"},{"location":"features/production-validation/#_8","title":"\u9a8c\u8bc1\u65f6\u673a","text":""},{"location":"features/production-validation/#1","title":"1. \u5e94\u7528\u542f\u52a8\u65f6","text":"<p>\u914d\u7f6e\u5728\u5e94\u7528\u542f\u52a8\u65f6\u81ea\u52a8\u9a8c\u8bc1\uff1a</p> <pre><code>from faster_app.settings.discover import SettingsDiscover\n\n# \u81ea\u52a8\u6267\u884c\u6240\u6709\u9a8c\u8bc1\nsettings = SettingsDiscover().merge()\n\n# \u5982\u679c\u9a8c\u8bc1\u5931\u8d25\uff0c\u629b\u51fa ValidationError \u963b\u6b62\u542f\u52a8\n</code></pre>"},{"location":"features/production-validation/#2","title":"2. \u624b\u52a8\u521b\u5efa\u5b9e\u4f8b\u65f6","text":"<pre><code>from faster_app.settings.builtins.settings import DefaultSettings\nfrom pydantic import ValidationError\n\ntry:\n    settings = DefaultSettings(\n        DEBUG=False,\n        SECRET_KEY=\"short\"  # \u4e0d\u6ee1\u8db3\u8981\u6c42\n    )\nexcept ValidationError as e:\n    print(\"\u914d\u7f6e\u9519\u8bef:\", e.errors())\n    # \u5904\u7406\u9519\u8bef...\n</code></pre>"},{"location":"features/production-validation/#_9","title":"\u9519\u8bef\u5904\u7406","text":""},{"location":"features/production-validation/#validationerror","title":"ValidationError \u7ed3\u6784","text":"<pre><code>try:\n    settings = DefaultSettings(\n        DEBUG=False,\n        PORT=70000,\n        SECRET_KEY=\"short\",\n        DB_PASSWORD=\"weak\"\n    )\nexcept ValidationError as e:\n    for error in e.errors():\n        print(f\"\u5b57\u6bb5: {error['loc']}\")\n        print(f\"\u7c7b\u578b: {error['type']}\")\n        print(f\"\u6d88\u606f: {error['msg']}\")\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>\u5b57\u6bb5: ('PORT',)\n\u7c7b\u578b: value_error\n\u6d88\u606f: PORT \u5fc5\u987b\u5728 1-65535 \u4e4b\u95f4\uff0c\u5f53\u524d\u503c: 70000\n\n\u5b57\u6bb5: ('SECRET_KEY',)\n\u7c7b\u578b: value_error\n\u6d88\u606f: \u751f\u4ea7\u73af\u5883 SECRET_KEY \u957f\u5ea6\u5fc5\u987b\u81f3\u5c11 32 \u4e2a\u5b57\u7b26\uff0c\u5f53\u524d\u957f\u5ea6: 5\n\n\u5b57\u6bb5: ('DB_PASSWORD',)\n\u7c7b\u578b: value_error\n\u6d88\u606f: \u751f\u4ea7\u73af\u5883\u4e0d\u80fd\u4f7f\u7528\u5f31\u5bc6\u7801 'weak'\uff01\u8bf7\u901a\u8fc7\u73af\u5883\u53d8\u91cf DB_PASSWORD \u8bbe\u7f6e\u5f3a\u5bc6\u7801\n</code></pre>"},{"location":"features/production-validation/#_10","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"features/production-validation/#_11","title":"\u2705 \u63a8\u8350\u7684\u751f\u4ea7\u73af\u5883\u914d\u7f6e","text":"<pre><code># .env.production\nDEBUG=false\nPROJECT_NAME=My Production App\n\n# \u670d\u52a1\u5668\u914d\u7f6e\nHOST=10.0.0.1\nPORT=8000\n\n# JWT \u914d\u7f6e\uff08\u81f3\u5c11 32 \u5b57\u7b26\uff09\nSECRET_KEY=my-super-secret-production-key-with-at-least-32-characters\nALGORITHM=HS256\nACCESS_TOKEN_EXPIRE_MINUTES=60\n\n# \u6570\u636e\u5e93\u914d\u7f6e\nDB_TYPE=postgres\nDB_HOST=db.production.com\nDB_PORT=5432\nDB_USER=prod_user\nDB_PASSWORD=Str0ng!Pr0duction@P@ssw0rd  # \u81f3\u5c11 8 \u5b57\u7b26\uff0c\u907f\u514d\u5f31\u5bc6\u7801\nDB_DATABASE=production_db\n\n# \u65e5\u5fd7\u914d\u7f6e\nLOG_LEVEL=INFO\nLOG_FORMAT=STRING\n</code></pre>"},{"location":"features/production-validation/#_12","title":"\u274c \u907f\u514d\u7684\u914d\u7f6e","text":"<pre><code># \u274c \u4e0d\u8981\u5728\u751f\u4ea7\u73af\u5883\u8fd9\u6837\u914d\u7f6e\nDEBUG=true                              # \u751f\u4ea7\u73af\u5883\u5fc5\u987b\u5173\u95ed\nHOST=0.0.0.0                           # \u5b89\u5168\u98ce\u9669\nSECRET_KEY=default-key                  # \u592a\u77ed\u4e14\u662f\u9ed8\u8ba4\u503c\nDB_PASSWORD=postgres                    # \u5f31\u5bc6\u7801\nDB_HOST=localhost                       # \u53ef\u80fd\u914d\u7f6e\u9519\u8bef\nACCESS_TOKEN_EXPIRE_MINUTES=2          # \u8fc7\u77ed\nPORT=99999                              # \u8d85\u51fa\u8303\u56f4\nLOG_LEVEL=TRACE                         # \u65e0\u6548\u503c\n</code></pre>"},{"location":"features/production-validation/#_13","title":"\u914d\u7f6e\u68c0\u67e5\u6e05\u5355","text":""},{"location":"features/production-validation/#_14","title":"\u90e8\u7f72\u524d\u68c0\u67e5","text":"<ul> <li> <code>DEBUG</code> \u8bbe\u7f6e\u4e3a <code>false</code></li> <li> <code>SECRET_KEY</code> \u957f\u5ea6\u81f3\u5c11 32 \u5b57\u7b26\uff0c\u4e14\u4e0d\u662f\u9ed8\u8ba4\u503c</li> <li> <code>DB_PASSWORD</code> \u957f\u5ea6\u81f3\u5c11 8 \u5b57\u7b26\uff0c\u4e14\u4e0d\u5728\u5f31\u5bc6\u7801\u5217\u8868</li> <li> <code>HOST</code> \u4e0d\u662f <code>0.0.0.0</code>\uff08\u6216\u901a\u8fc7\u53cd\u5411\u4ee3\u7406\uff09</li> <li> <code>DB_HOST</code> \u4e0d\u662f <code>localhost</code>\uff08\u5982\u679c\u4f7f\u7528\u8fdc\u7a0b\u6570\u636e\u5e93\uff09</li> <li> <code>PROJECT_NAME</code> \u4fee\u6539\u4e3a\u5b9e\u9645\u9879\u76ee\u540d\u79f0</li> <li> <code>PORT</code> \u548c <code>DB_PORT</code> \u5728\u6709\u6548\u8303\u56f4\u5185</li> <li> <code>ACCESS_TOKEN_EXPIRE_MINUTES</code> \u5408\u7406\uff085-1440 \u5206\u949f\uff09</li> <li> <code>LOG_LEVEL</code> \u8bbe\u7f6e\u4e3a <code>INFO</code> \u6216\u66f4\u9ad8</li> <li> <code>ALGORITHM</code> \u4f7f\u7528\u5b89\u5168\u7684\u7b97\u6cd5</li> </ul>"},{"location":"features/production-validation/#_15","title":"\u73af\u5883\u53d8\u91cf\u68c0\u67e5","text":"<pre><code># \u68c0\u67e5\u5173\u952e\u73af\u5883\u53d8\u91cf\u662f\u5426\u8bbe\u7f6e\necho $DEBUG                              # \u5e94\u8be5\u662f false\necho $SECRET_KEY | wc -c                # \u5e94\u8be5 \u2265 32\necho $DB_PASSWORD | wc -c               # \u5e94\u8be5 \u2265 8\n</code></pre>"},{"location":"features/production-validation/#_16","title":"\u81ea\u5b9a\u4e49\u9a8c\u8bc1","text":"<p>\u5982\u679c\u9700\u8981\u6dfb\u52a0\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u89c4\u5219\uff0c\u53ef\u4ee5\u5728 <code>config/settings.py</code> \u4e2d\u7ee7\u627f <code>DefaultSettings</code>\uff1a</p> <pre><code>from faster_app.settings.builtins.settings import DefaultSettings\nfrom pydantic import field_validator, model_validator\n\nclass Settings(DefaultSettings):\n    \"\"\"\u81ea\u5b9a\u4e49\u914d\u7f6e\"\"\"\n\n    # \u6dfb\u52a0\u65b0\u5b57\u6bb5\n    CUSTOM_FIELD: str = \"default\"\n\n    @field_validator(\"CUSTOM_FIELD\")\n    @classmethod\n    def validate_custom_field(cls, v, info):\n        \"\"\"\u81ea\u5b9a\u4e49\u5b57\u6bb5\u9a8c\u8bc1\"\"\"\n        debug_mode = info.data.get(\"DEBUG\", True)\n\n        if not debug_mode and v == \"default\":\n            raise ValueError(\"\u751f\u4ea7\u73af\u5883\u5fc5\u987b\u4fee\u6539 CUSTOM_FIELD\")\n\n        return v\n\n    @model_validator(mode=\"after\")\n    def validate_custom_logic(self):\n        \"\"\"\u81ea\u5b9a\u4e49\u8de8\u5b57\u6bb5\u9a8c\u8bc1\"\"\"\n        # \u6dfb\u52a0\u60a8\u7684\u9a8c\u8bc1\u903b\u8f91\n        return self\n</code></pre>"},{"location":"features/production-validation/#_17","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"features/production-validation/#q","title":"Q: \u4e3a\u4ec0\u4e48\u5f00\u53d1\u73af\u5883\u4e0d\u5f3a\u5236\u5bc6\u7801\u8981\u6c42\uff1f","text":"<p>A: \u4e3a\u4e86\u4fbf\u4e8e\u672c\u5730\u5f00\u53d1\u548c\u6d4b\u8bd5\u3002\u5f00\u53d1\u73af\u5883\uff08<code>DEBUG=True</code>\uff09\u5141\u8bb8\u4f7f\u7528\u5f31\u5bc6\u7801\u548c\u9ed8\u8ba4\u914d\u7f6e\uff0c\u4f46\u751f\u4ea7\u73af\u5883\uff08<code>DEBUG=False</code>\uff09\u4f1a\u4e25\u683c\u9a8c\u8bc1\u3002</p>"},{"location":"features/production-validation/#q_1","title":"Q: \u8b66\u544a\u4f1a\u963b\u6b62\u5e94\u7528\u542f\u52a8\u5417\uff1f","text":"<p>A: \u4e0d\u4f1a\u3002\u8b66\u544a\u53ea\u662f\u63d0\u9192\u6f5c\u5728\u95ee\u9898\uff0c\u4f46\u4e0d\u4f1a\u963b\u6b62\u542f\u52a8\u3002\u5982\u679c\u9700\u8981\u5c06\u8b66\u544a\u5347\u7ea7\u4e3a\u9519\u8bef\uff0c\u53ef\u4ee5\u5728 <code>model_validator</code> \u4e2d\u4f7f\u7528 <code>raise ValueError</code> \u800c\u4e0d\u662f <code>warnings.warn</code>\u3002</p>"},{"location":"features/production-validation/#q_2","title":"Q: \u5982\u4f55\u5173\u95ed\u67d0\u4e2a\u8b66\u544a\uff1f","text":"<p>A: \u4f7f\u7528 Python \u7684 warnings \u8fc7\u6ee4\u5668\uff1a</p> <pre><code>import warnings\n\n# \u5ffd\u7565\u7279\u5b9a\u8b66\u544a\nwarnings.filterwarnings(\"ignore\", message=\".*HOST=0.0.0.0.*\")\n\n# \u6216\u8005\u5728\u4ee3\u7801\u4e2d\nwith warnings.catch_warnings():\n    warnings.simplefilter(\"ignore\")\n    settings = DefaultSettings(...)\n</code></pre>"},{"location":"features/production-validation/#q_3","title":"Q: \u9a8c\u8bc1\u5931\u8d25\u5982\u4f55\u8c03\u8bd5\uff1f","text":"<p>A: ValidationError \u63d0\u4f9b\u4e86\u8be6\u7ec6\u7684\u9519\u8bef\u4fe1\u606f\uff1a</p> <pre><code>from pydantic import ValidationError\n\ntry:\n    settings = DefaultSettings(...)\nexcept ValidationError as e:\n    # \u6253\u5370\u53cb\u597d\u7684\u9519\u8bef\u6d88\u606f\n    print(e)\n\n    # \u83b7\u53d6\u7ed3\u6784\u5316\u9519\u8bef\n    for error in e.errors():\n        print(f\"\u5b57\u6bb5: {'.'.join(str(x) for x in error['loc'])}\")\n        print(f\"\u9519\u8bef: {error['msg']}\")\n        print(f\"\u8f93\u5165: {error['input']}\")\n</code></pre>"},{"location":"features/production-validation/#q_4","title":"Q: \u53ef\u4ee5\u52a8\u6001\u8c03\u6574\u9a8c\u8bc1\u89c4\u5219\u5417\uff1f","text":"<p>A: \u53ef\u4ee5\u3002\u9a8c\u8bc1\u89c4\u5219\u662f\u5728\u7c7b\u5b9a\u4e49\u65f6\u786e\u5b9a\u7684\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u7ee7\u627f\u548c\u8986\u76d6\u6765\u8c03\u6574\uff1a</p> <pre><code>class RelaxedSettings(DefaultSettings):\n    \"\"\"\u653e\u5bbd\u67d0\u4e9b\u9a8c\u8bc1\u89c4\u5219\"\"\"\n\n    @field_validator(\"SECRET_KEY\")\n    @classmethod\n    def validate_secret_key_in_production(cls, v, info):\n        \"\"\"\u8986\u76d6\u7236\u7c7b\u7684\u9a8c\u8bc1\uff0c\u653e\u5bbd\u8981\u6c42\"\"\"\n        debug_mode = info.data.get(\"DEBUG\", True)\n        secret_value = v.get_secret_value() if isinstance(v, SecretStr) else str(v)\n\n        if not debug_mode and len(secret_value) &lt; 16:  # \u653e\u5bbd\u5230 16 \u5b57\u7b26\n            raise ValueError(\"\u5bc6\u94a5\u81f3\u5c11\u9700\u8981 16 \u5b57\u7b26\")\n\n        return v\n</code></pre>"},{"location":"features/production-validation/#_18","title":"\u5b89\u5168\u5efa\u8bae","text":""},{"location":"features/production-validation/#1_1","title":"1. \u4f7f\u7528\u73af\u5883\u53d8\u91cf","text":"<p>**\u6c38\u8fdc\u4e0d\u8981**\u5728\u4ee3\u7801\u4e2d\u786c\u7f16\u7801\u654f\u611f\u4fe1\u606f\uff1a</p> <pre><code># \u274c \u9519\u8bef\u505a\u6cd5\nclass Settings(DefaultSettings):\n    SECRET_KEY: SecretStr = SecretStr(\"my-production-key\")  # \u786c\u7f16\u7801\n\n# \u2705 \u6b63\u786e\u505a\u6cd5\n# \u5728 .env \u6587\u4ef6\u6216\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u4e2d\u8bbe\u7f6e\n# SECRET_KEY=my-production-key\n</code></pre>"},{"location":"features/production-validation/#2_1","title":"2. \u4f7f\u7528\u5bc6\u94a5\u7ba1\u7406\u670d\u52a1","text":"<p>\u5bf9\u4e8e\u751f\u4ea7\u73af\u5883\uff0c\u5efa\u8bae\u4f7f\u7528\u4e13\u4e1a\u7684\u5bc6\u94a5\u7ba1\u7406\u670d\u52a1\uff1a - AWS Secrets Manager - Azure Key Vault - HashiCorp Vault - Google Secret Manager</p>"},{"location":"features/production-validation/#3_1","title":"3. \u5b9a\u671f\u8f6e\u6362\u5bc6\u94a5","text":"<pre><code># \u751f\u6210\u5f3a\u968f\u673a\u5bc6\u94a5\nopenssl rand -hex 32\n\n# \u6216\u4f7f\u7528 Python\npython -c \"import secrets; print(secrets.token_urlsafe(32))\"\n</code></pre>"},{"location":"features/production-validation/#4","title":"4. \u6700\u5c0f\u6743\u9650\u539f\u5219","text":"<p>\u6570\u636e\u5e93\u7528\u6237\u5e94\u8be5\u53ea\u6709\u5fc5\u8981\u7684\u6743\u9650\uff1a</p> <pre><code>-- \u2705 \u53ea\u6388\u4e88\u5e94\u7528\u9700\u8981\u7684\u6743\u9650\nGRANT SELECT, INSERT, UPDATE, DELETE ON database.* TO 'app_user'@'%';\n\n-- \u274c \u4e0d\u8981\u6388\u4e88\u8fc7\u591a\u6743\u9650\nGRANT ALL PRIVILEGES ON *.* TO 'app_user'@'%';  -- \u5371\u9669\uff01\n</code></pre>"},{"location":"features/production-validation/#_19","title":"\u76d1\u63a7\u548c\u5ba1\u8ba1","text":"<p>\u5efa\u8bae\u5728\u5e94\u7528\u542f\u52a8\u65f6\u8bb0\u5f55\u914d\u7f6e\u72b6\u6001\uff08\u4e0d\u5305\u542b\u654f\u611f\u4fe1\u606f\uff09\uff1a</p> <pre><code>import logging\n\nlogger = logging.getLogger(__name__)\n\ndef log_config_status(settings):\n    \"\"\"\u8bb0\u5f55\u914d\u7f6e\u72b6\u6001\uff08\u5b89\u5168\u7684\uff09\"\"\"\n    logger.info(\"\u914d\u7f6e\u52a0\u8f7d\u5b8c\u6210:\")\n    logger.info(f\"  DEBUG: {settings.DEBUG}\")\n    logger.info(f\"  HOST: {settings.HOST}\")\n    logger.info(f\"  PORT: {settings.PORT}\")\n    logger.info(f\"  DB_TYPE: {settings.DB_TYPE}\")\n    logger.info(f\"  DB_HOST: {settings.DB_HOST}\")\n    logger.info(f\"  LOG_LEVEL: {settings.LOG_LEVEL}\")\n    # \u4e0d\u8981\u8bb0\u5f55 SECRET_KEY \u548c DB_PASSWORD\n</code></pre>"},{"location":"features/production-validation/#_20","title":"\u603b\u7ed3","text":"<p>Faster APP \u7684\u751f\u4ea7\u73af\u5883\u914d\u7f6e\u9a8c\u8bc1\u63d0\u4f9b\u4e86\u591a\u5c42\u9632\u62a4\uff1a</p> <ol> <li>\u5b57\u6bb5\u7ea7\u9a8c\u8bc1 - \u5373\u65f6\u68c0\u67e5\u5355\u4e2a\u5b57\u6bb5\u7684\u6709\u6548\u6027</li> <li>\u6a21\u578b\u7ea7\u9a8c\u8bc1 - \u8de8\u5b57\u6bb5\u7684\u590d\u6742\u9a8c\u8bc1\u903b\u8f91</li> <li>\u8b66\u544a\u673a\u5236 - \u63d0\u9192\u6f5c\u5728\u95ee\u9898\u4f46\u4e0d\u963b\u6b62\u542f\u52a8</li> <li>\u6e05\u6670\u7684\u9519\u8bef\u6d88\u606f - \u51c6\u786e\u6307\u51fa\u914d\u7f6e\u95ee\u9898\u548c\u4fee\u590d\u5efa\u8bae</li> </ol> <p>\u8fd9\u4e9b\u9a8c\u8bc1\u673a\u5236\u5e2e\u52a9\u60a8\u5728\u90e8\u7f72\u524d\u53d1\u73b0\u914d\u7f6e\u95ee\u9898\uff0c\u63d0\u9ad8\u5e94\u7528\u7684\u5b89\u5168\u6027\u548c\u7a33\u5b9a\u6027\u3002</p>"},{"location":"features/routes/","title":"\u8def\u7531\u7ba1\u7406","text":"<p>\u672c\u9875\u9762\u4ecb\u7ecd Faster APP \u4e2d\u7684\u8def\u7531\u7ba1\u7406\u548c\u6700\u4f73\u5b9e\u8df5\u3002</p>"},{"location":"features/routes/#_2","title":"\ud83c\udfaf \u57fa\u672c\u6982\u5ff5","text":"<p>Faster APP \u4f7f\u7528 FastAPI \u7684 <code>APIRouter</code> \u8fdb\u884c\u8def\u7531\u7ba1\u7406\uff0c\u5e76\u901a\u8fc7\u81ea\u52a8\u53d1\u73b0\u673a\u5236\u5b9e\u73b0\u96f6\u914d\u7f6e\u8def\u7531\u6ce8\u518c\u3002</p>"},{"location":"features/routes/#_3","title":"\ud83d\udcc1 \u8def\u7531\u7ec4\u7ec7","text":""},{"location":"features/routes/#_4","title":"\u6807\u51c6\u7ed3\u6784","text":"<pre><code># apps/users/routes.py\nfrom fastapi import APIRouter, Depends, HTTPException\nfrom .models import User\nfrom .schemas import UserCreate, UserResponse\n\nrouter = APIRouter(\n    prefix=\"/users\",        # \u8def\u7531\u524d\u7f00\n    tags=[\"\u7528\u6237\"],          # API \u6587\u6863\u5206\u7ec4\n    responses={404: {\"description\": \"\u672a\u627e\u5230\"}}\n)\n\n@router.get(\"\", response_model=list[UserResponse])\nasync def list_users(skip: int = 0, limit: int = 10):\n    \"\"\"\u83b7\u53d6\u7528\u6237\u5217\u8868\"\"\"\n    users = await User.all().offset(skip).limit(limit)\n    return users\n\n@router.post(\"\", response_model=UserResponse, status_code=201)\nasync def create_user(data: UserCreate):\n    \"\"\"\u521b\u5efa\u7528\u6237\"\"\"\n    user = await User.create(**data.dict())\n    return user\n\n@router.get(\"/{user_id}\", response_model=UserResponse)\nasync def get_user(user_id: str):\n    \"\"\"\u83b7\u53d6\u7528\u6237\u8be6\u60c5\"\"\"\n    user = await User.get_or_none(id=user_id)\n    if not user:\n        raise HTTPException(status_code=404, detail=\"\u7528\u6237\u4e0d\u5b58\u5728\")\n    return user\n\n@router.put(\"/{user_id}\", response_model=UserResponse)\nasync def update_user(user_id: str, data: UserCreate):\n    \"\"\"\u66f4\u65b0\u7528\u6237\"\"\"\n    user = await User.get_or_none(id=user_id)\n    if not user:\n        raise HTTPException(status_code=404, detail=\"\u7528\u6237\u4e0d\u5b58\u5728\")\n\n    await user.update_from_dict(data.dict())\n    await user.save()\n    return user\n\n@router.delete(\"/{user_id}\", status_code=204)\nasync def delete_user(user_id: str):\n    \"\"\"\u5220\u9664\u7528\u6237\"\"\"\n    user = await User.get_or_none(id=user_id)\n    if not user:\n        raise HTTPException(status_code=404, detail=\"\u7528\u6237\u4e0d\u5b58\u5728\")\n\n    await user.delete()\n    return None\n</code></pre>"},{"location":"features/routes/#_5","title":"\u8be6\u7ec6\u5185\u5bb9\u8bf7\u67e5\u770b\u5b8c\u6574\u6587\u6863...","text":""},{"location":"features/settings-security/","title":"\u914d\u7f6e\u654f\u611f\u4fe1\u606f\u4fdd\u62a4\u4f7f\u7528\u6307\u5357","text":""},{"location":"features/settings-security/#_2","title":"\u6982\u8ff0","text":"<p>\u4ece\u672c\u6b21\u66f4\u65b0\u5f00\u59cb\uff0cFaster APP \u7684\u914d\u7f6e\u7cfb\u7edf\u589e\u5f3a\u4e86\u654f\u611f\u4fe1\u606f\u4fdd\u62a4\u529f\u80fd\uff0c\u4f7f\u7528 Pydantic \u7684 <code>SecretStr</code> \u7c7b\u578b\u6765\u4fdd\u62a4\u654f\u611f\u6570\u636e\u3002</p>"},{"location":"features/settings-security/#_3","title":"\u4e3b\u8981\u7279\u6027","text":""},{"location":"features/settings-security/#1","title":"1. \u654f\u611f\u5b57\u6bb5\u4fdd\u62a4","text":"<p>\u4ee5\u4e0b\u5b57\u6bb5\u73b0\u5728\u4f7f\u7528 <code>SecretStr</code> \u7c7b\u578b\u4fdd\u62a4\uff1a - <code>SECRET_KEY</code>: JWT \u7b7e\u540d\u5bc6\u94a5 - <code>DB_PASSWORD</code>: \u6570\u636e\u5e93\u5bc6\u7801</p>"},{"location":"features/settings-security/#2","title":"2. \u81ea\u52a8\u9a8c\u8bc1","text":""},{"location":"features/settings-security/#_4","title":"\u751f\u4ea7\u73af\u5883\u68c0\u67e5","text":"<p>\u5f53 <code>DEBUG=False</code> \u65f6\uff08\u751f\u4ea7\u73af\u5883\uff09\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u9a8c\u8bc1\uff1a</p> <p>SECRET_KEY \u9a8c\u8bc1\uff1a - \u274c \u4e0d\u80fd\u4f7f\u7528\u9ed8\u8ba4\u503c <code>your-secret-key-here-change-in-production</code> - \u2705 \u5fc5\u987b\u901a\u8fc7\u73af\u5883\u53d8\u91cf\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u5bc6\u94a5</p> <p>DB_PASSWORD \u9a8c\u8bc1\uff1a - \u274c \u4e0d\u80fd\u4f7f\u7528\u5f31\u5bc6\u7801\uff1a<code>postgres</code>, <code>password</code>, <code>123456</code>, <code>admin</code>, <code>root</code> - \u2705 \u5fc5\u987b\u4f7f\u7528\u5f3a\u5bc6\u7801</p>"},{"location":"features/settings-security/#_5","title":"\u5f00\u53d1\u73af\u5883","text":"<p>\u5f53 <code>DEBUG=True</code> \u65f6\uff08\u5f00\u53d1\u73af\u5883\uff09\uff0c\u5141\u8bb8\u4f7f\u7528\u9ed8\u8ba4\u51ed\u636e\uff0c\u65b9\u4fbf\u5f00\u53d1\u8c03\u8bd5\u3002</p>"},{"location":"features/settings-security/#3","title":"3. \u5e8f\u5217\u5316\u4fdd\u62a4","text":"<p>\u654f\u611f\u4fe1\u606f\u5728\u5e8f\u5217\u5316\u65f6\u81ea\u52a8\u9690\u85cf\uff1a</p> <pre><code>from faster_app.settings.discover import SettingsDiscover\n\nsettings = SettingsDiscover().merge()\n\n# \u83b7\u53d6\u771f\u5b9e\u503c\nsecret = settings.SECRET_KEY.get_secret_value()  # \u8fd4\u56de\u5b9e\u9645\u5bc6\u94a5\n\n# \u5e8f\u5217\u5316\u65f6\u81ea\u52a8\u9690\u85cf\nsettings_dict = settings.model_dump()\nprint(settings_dict['SECRET_KEY'])  # \u8f93\u51fa: **********\n</code></pre>"},{"location":"features/settings-security/#_6","title":"\u4f7f\u7528\u65b9\u5f0f","text":""},{"location":"features/settings-security/#1_1","title":"\u65b9\u5f0f 1: \u73af\u5883\u53d8\u91cf\uff08\u63a8\u8350\uff09","text":"<p>\u5728 <code>.env</code> \u6587\u4ef6\u4e2d\u8bbe\u7f6e\uff1a</p> <pre><code># \u5f00\u53d1\u73af\u5883\nDEBUG=true\nSECRET_KEY=my-dev-secret-key\nDB_PASSWORD=postgres\n\n# \u751f\u4ea7\u73af\u5883\nDEBUG=false\nSECRET_KEY=your-super-secret-production-key-with-at-least-32-chars\nDB_PASSWORD=YourStr0ng!Pr0duction@P@ssw0rd\n</code></pre>"},{"location":"features/settings-security/#2_1","title":"\u65b9\u5f0f 2: \u4ee3\u7801\u4e2d\u8bbe\u7f6e","text":"<pre><code>from faster_app.settings.builtins.settings import DefaultSettings\n\n# \u5f00\u53d1\u73af\u5883\nsettings = DefaultSettings(\n    DEBUG=True,\n    # \u4f7f\u7528\u9ed8\u8ba4\u503c\u5373\u53ef\n)\n\n# \u751f\u4ea7\u73af\u5883\nsettings = DefaultSettings(\n    DEBUG=False,\n    SECRET_KEY=\"your-super-secret-production-key\",\n    DB_PASSWORD=\"YourStr0ng!Pr0duction@P@ssw0rd\"\n)\n</code></pre>"},{"location":"features/settings-security/#3_1","title":"\u65b9\u5f0f 3: \u81ea\u5b9a\u4e49\u914d\u7f6e\u7c7b","text":"<p>\u5728 <code>config/settings.py</code> \u4e2d\uff1a</p> <pre><code>from faster_app.settings.builtins.settings import DefaultSettings\nfrom pydantic import SecretStr\n\nclass Settings(DefaultSettings):\n    \"\"\"\u81ea\u5b9a\u4e49\u914d\u7f6e\"\"\"\n\n    # \u7ee7\u627f\u6240\u6709\u9ed8\u8ba4\u914d\u7f6e\n    # \u53ef\u4ee5\u8986\u76d6\u4efb\u4f55\u914d\u7f6e\u9879\n    PROJECT_NAME: str = \"My Project\"\n\n    # \u654f\u611f\u4fe1\u606f\u4f7f\u7528 SecretStr\n    SECRET_KEY: SecretStr = SecretStr(\"my-custom-key\")\n</code></pre>"},{"location":"features/settings-security/#_7","title":"\u8bbf\u95ee\u654f\u611f\u503c","text":"<p>\u5728\u5e94\u7528\u4ee3\u7801\u4e2d\u4f7f\u7528\u65f6\uff0c\u9700\u8981\u8c03\u7528 <code>get_secret_value()</code> \u83b7\u53d6\u771f\u5b9e\u503c\uff1a</p> <pre><code>from faster_app.app import app\n\n# \u83b7\u53d6\u914d\u7f6e\nsettings = app.settings\n\n# \u8bbf\u95ee\u666e\u901a\u5b57\u6bb5\nproject_name = settings.PROJECT_NAME\n\n# \u8bbf\u95ee\u654f\u611f\u5b57\u6bb5\nsecret_key = settings.SECRET_KEY.get_secret_value()\ndb_password = settings.DB_PASSWORD.get_secret_value()\n</code></pre>"},{"location":"features/settings-security/#tortoise_orm","title":"TORTOISE_ORM \u914d\u7f6e","text":"<p>\u6570\u636e\u5e93\u914d\u7f6e\u4f1a\u81ea\u52a8\u5904\u7406 <code>SecretStr</code>\uff0c\u65e0\u9700\u624b\u52a8\u8f6c\u6362\uff1a</p> <pre><code># TORTOISE_ORM \u4e2d\u7684\u5bc6\u7801\u5df2\u81ea\u52a8\u89e3\u5bc6\nsettings.TORTOISE_ORM[\"connections\"][\"POSTGRES\"][\"credentials\"][\"password\"]\n# \u8fd4\u56de\u89e3\u5bc6\u540e\u7684\u5b57\u7b26\u4e32\uff0c\u53ef\u76f4\u63a5\u7528\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\n</code></pre>"},{"location":"features/settings-security/#_8","title":"\u9a8c\u8bc1\u9519\u8bef\u793a\u4f8b","text":""},{"location":"features/settings-security/#secret_key","title":"\u751f\u4ea7\u73af\u5883\u4f7f\u7528\u9ed8\u8ba4 SECRET_KEY","text":"<pre><code>settings = DefaultSettings(DEBUG=False)\n# ValidationError: \u751f\u4ea7\u73af\u5883\u5fc5\u987b\u4fee\u6539 SECRET_KEY\uff01\n</code></pre>"},{"location":"features/settings-security/#_9","title":"\u751f\u4ea7\u73af\u5883\u4f7f\u7528\u5f31\u5bc6\u7801","text":"<pre><code>settings = DefaultSettings(\n    DEBUG=False,\n    SECRET_KEY=\"my-custom-key\",\n    DB_PASSWORD=\"postgres\"  # \u5f31\u5bc6\u7801\n)\n# ValidationError: \u751f\u4ea7\u73af\u5883\u4e0d\u80fd\u4f7f\u7528\u5f31\u5bc6\u7801 'postgres'\uff01\n</code></pre>"},{"location":"features/settings-security/#_10","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"features/settings-security/#_11","title":"\u2705 \u63a8\u8350\u505a\u6cd5","text":"<ol> <li>\u4f7f\u7528\u73af\u5883\u53d8\u91cf\uff1a\u751f\u4ea7\u73af\u5883\u7684\u654f\u611f\u4fe1\u606f\u5e94\u901a\u8fc7\u73af\u5883\u53d8\u91cf\u6ce8\u5165</li> <li>\u4e0d\u540c\u73af\u5883\u4f7f\u7528\u4e0d\u540c\u914d\u7f6e\uff1a\u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u751f\u4ea7\u73af\u5883\u5206\u522b\u4f7f\u7528\u4e0d\u540c\u7684 <code>.env</code> \u6587\u4ef6</li> <li>\u5f3a\u5bc6\u7801\u7b56\u7565\uff1a\u751f\u4ea7\u73af\u5883\u4f7f\u7528\u590d\u6742\u7684\u5f3a\u5bc6\u7801</li> <li>\u7248\u672c\u63a7\u5236\u6392\u9664\uff1a\u786e\u4fdd <code>.env</code> \u6587\u4ef6\u5728 <code>.gitignore</code> \u4e2d</li> </ol>"},{"location":"features/settings-security/#_12","title":"\u274c \u907f\u514d\u505a\u6cd5","text":"<ol> <li>\u274c \u5728\u4ee3\u7801\u4e2d\u786c\u7f16\u7801\u654f\u611f\u4fe1\u606f</li> <li>\u274c \u5c06 <code>.env</code> \u6587\u4ef6\u63d0\u4ea4\u5230\u7248\u672c\u63a7\u5236</li> <li>\u274c \u751f\u4ea7\u73af\u5883\u4f7f\u7528\u9ed8\u8ba4\u6216\u5f31\u5bc6\u7801</li> <li>\u274c \u5728\u65e5\u5fd7\u4e2d\u8f93\u51fa\u654f\u611f\u4fe1\u606f</li> </ol>"},{"location":"features/settings-security/#_13","title":"\u914d\u7f6e\u6587\u4ef6\u793a\u4f8b","text":""},{"location":"features/settings-security/#envexample","title":".env.example\uff08\u63d0\u4ea4\u5230\u7248\u672c\u63a7\u5236\uff09","text":"<pre><code># \u9879\u76ee\u914d\u7f6e\nPROJECT_NAME=Faster APP\nVERSION=0.0.1\nDEBUG=true\n\n# \u670d\u52a1\u5668\u914d\u7f6e\nHOST=0.0.0.0\nPORT=8000\n\n# JWT \u914d\u7f6e\nSECRET_KEY=change-me-in-production\nALGORITHM=HS256\nACCESS_TOKEN_EXPIRE_MINUTES=30\n\n# \u6570\u636e\u5e93\u914d\u7f6e\nDB_TYPE=sqlite\nDB_HOST=localhost\nDB_PORT=5432\nDB_USER=postgres\nDB_PASSWORD=change-me-in-production\nDB_DATABASE=faster_app\n</code></pre>"},{"location":"features/settings-security/#env","title":".env\uff08\u4e0d\u63d0\u4ea4\u5230\u7248\u672c\u63a7\u5236\uff09","text":"<pre><code># \u5b9e\u9645\u4f7f\u7528\u7684\u914d\u7f6e\uff0c\u5305\u542b\u771f\u5b9e\u7684\u654f\u611f\u4fe1\u606f\nSECRET_KEY=actual-secret-key-here\nDB_PASSWORD=actual-strong-password-here\n</code></pre>"},{"location":"features/settings-security/#_14","title":"\u6d4b\u8bd5","text":"<p>\u8fd0\u884c\u6d4b\u8bd5\u9a8c\u8bc1\u914d\u7f6e\u529f\u80fd\uff1a</p> <pre><code>uv run python test_settings_security.py\n</code></pre>"},{"location":"features/settings-security/#_15","title":"\u6280\u672f\u7ec6\u8282","text":""},{"location":"features/settings-security/#secretstr","title":"SecretStr \u7c7b\u578b","text":"<p><code>SecretStr</code> \u662f Pydantic \u63d0\u4f9b\u7684\u7279\u6b8a\u7c7b\u578b\uff1a - \u81ea\u52a8\u9690\u85cf\u5b57\u7b26\u4e32\u8868\u793a\uff08<code>__repr__</code>\uff09 - \u5e8f\u5217\u5316\u65f6\u9ed8\u8ba4\u9690\u85cf - \u901a\u8fc7 <code>get_secret_value()</code> \u83b7\u53d6\u771f\u5b9e\u503c</p>"},{"location":"features/settings-security/#_16","title":"\u9a8c\u8bc1\u5668","text":"<p>\u4f7f\u7528 Pydantic \u7684 <code>field_validator</code> \u88c5\u9970\u5668\u5b9e\u73b0\uff1a - \u5728\u5b57\u6bb5\u8d4b\u503c\u65f6\u81ea\u52a8\u89e6\u53d1 - \u53ef\u4ee5\u8bbf\u95ee\u5176\u4ed6\u5b57\u6bb5\u7684\u503c - \u629b\u51fa <code>ValueError</code> \u6765\u62d2\u7edd\u65e0\u6548\u503c</p>"},{"location":"features/settings-security/#_17","title":"\u914d\u7f6e\u5408\u5e76","text":"<p><code>discover.py</code> \u4e2d\u7684 <code>merge()</code> \u65b9\u6cd5\u5df2\u66f4\u65b0\uff1a - \u4f7f\u7528 <code>mode='python'</code> \u4fdd\u7559 <code>SecretStr</code> \u7c7b\u578b - \u652f\u6301\u7528\u6237\u914d\u7f6e\u4e2d\u7684 <code>SecretStr</code> \u5b57\u6bb5 - \u52a8\u6001\u521b\u5efa\u7c7b\u65f6\u8bc6\u522b <code>SecretStr</code> \u7c7b\u578b</p>"},{"location":"features/settings-security/#_18","title":"\u5347\u7ea7\u6307\u5357","text":"<p>\u5982\u679c\u4f60\u4ece\u65e7\u7248\u672c\u5347\u7ea7\uff1a</p> <ol> <li>\u68c0\u67e5\u73af\u5883\u53d8\u91cf\uff1a\u786e\u4fdd\u751f\u4ea7\u73af\u5883\u8bbe\u7f6e\u4e86\u5f3a\u5bc6\u7801</li> <li>\u66f4\u65b0\u4ee3\u7801\uff1a\u5982\u679c\u76f4\u63a5\u8bbf\u95ee\u5bc6\u7801\u5b57\u6bb5\uff0c\u9700\u8981\u6539\u4e3a\u8c03\u7528 <code>get_secret_value()</code></li> <li>\u6d4b\u8bd5\u914d\u7f6e\uff1a\u5728\u90e8\u7f72\u524d\u6d4b\u8bd5\u751f\u4ea7\u73af\u5883\u914d\u7f6e\u662f\u5426\u901a\u8fc7\u9a8c\u8bc1</li> </ol> <pre><code># \u65e7\u4ee3\u7801\npassword = settings.DB_PASSWORD  # \u8fd4\u56de SecretStr \u5bf9\u8c61\n\n# \u65b0\u4ee3\u7801\npassword = settings.DB_PASSWORD.get_secret_value()  # \u8fd4\u56de\u5b57\u7b26\u4e32\n</code></pre>"},{"location":"features/settings-security/#_19","title":"\u5e38\u89c1\u95ee\u9898","text":"<p>Q: \u4e3a\u4ec0\u4e48\u5f00\u53d1\u73af\u5883\u53ef\u4ee5\u4f7f\u7528\u5f31\u5bc6\u7801\uff1f</p> <p>A: \u4e3a\u4e86\u65b9\u4fbf\u672c\u5730\u5f00\u53d1\u548c\u8c03\u8bd5\uff0c\u5f00\u53d1\u73af\u5883\uff08<code>DEBUG=True</code>\uff09\u4e0d\u5f3a\u5236\u5bc6\u7801\u7b56\u7565\u3002\u4f46\u751f\u4ea7\u73af\u5883\u5fc5\u987b\u4f7f\u7528\u5f3a\u5bc6\u7801\u3002</p> <p>Q: \u5982\u4f55\u5728\u65e5\u5fd7\u4e2d\u8f93\u51fa\u914d\u7f6e\uff08\u4e0d\u5305\u542b\u654f\u611f\u4fe1\u606f\uff09\uff1f</p> <p>A: \u76f4\u63a5\u4f7f\u7528 <code>model_dump()</code>\uff0c\u654f\u611f\u5b57\u6bb5\u4f1a\u81ea\u52a8\u9690\u85cf\uff1a</p> <pre><code>import json\nsettings_dict = settings.model_dump()\nprint(json.dumps(settings_dict, indent=2))\n</code></pre> <p>Q: \u53ef\u4ee5\u81ea\u5b9a\u4e49\u5f31\u5bc6\u7801\u5217\u8868\u5417\uff1f</p> <p>A: \u53ef\u4ee5\uff0c\u5728 <code>config/settings.py</code> \u4e2d\u7ee7\u627f <code>DefaultSettings</code> \u5e76\u91cd\u5199 <code>validate_db_password_in_production</code> \u65b9\u6cd5\u3002</p> <p>Q: TORTOISE_ORM \u914d\u7f6e\u4e3a\u4ec0\u4e48\u80fd\u76f4\u63a5\u4f7f\u7528\u5bc6\u7801\u5b57\u7b26\u4e32\uff1f</p> <p>A: \u5728 <code>DefaultSettings.__init__</code> \u4e2d\uff0c\u6211\u4eec\u8c03\u7528\u4e86 <code>get_secret_value()</code> \u5c06 <code>SecretStr</code> \u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\uff0c\u6240\u4ee5 <code>TORTOISE_ORM</code> \u914d\u7f6e\u4e2d\u7684\u5bc6\u7801\u5df2\u7ecf\u662f\u89e3\u5bc6\u540e\u7684\u5b57\u7b26\u4e32\u3002</p>"},{"location":"features/settings/","title":"\u914d\u7f6e\u7ba1\u7406","text":"<p>Faster APP \u63d0\u4f9b\u4e86\u7075\u6d3b\u7684\u914d\u7f6e\u7ba1\u7406\u7cfb\u7edf\uff0c\u652f\u6301\u73af\u5883\u53d8\u91cf\u3001\u914d\u7f6e\u6587\u4ef6\u548c\u81ea\u52a8\u53d1\u73b0\u3002</p>"},{"location":"features/settings/#_2","title":"\ud83c\udfaf \u914d\u7f6e\u4f18\u5148\u7ea7","text":"<p>\u914d\u7f6e\u6309\u4ee5\u4e0b\u4f18\u5148\u7ea7\u52a0\u8f7d\uff08\u4ece\u9ad8\u5230\u4f4e\uff09\uff1a</p> <ol> <li>\u73af\u5883\u53d8\u91cf\uff08\u6700\u9ad8\u4f18\u5148\u7ea7\uff09</li> <li>.env \u6587\u4ef6</li> <li>\u81ea\u5b9a\u4e49\u914d\u7f6e\u7c7b</li> <li>\u5185\u7f6e\u9ed8\u8ba4\u914d\u7f6e\uff08\u6700\u4f4e\u4f18\u5148\u7ea7\uff09</li> </ol>"},{"location":"features/settings/#_3","title":"\u5185\u7f6e\u914d\u7f6e","text":"<p>Faster APP \u63d0\u4f9b\u4e86\u4e00\u4e9b\u5185\u7f6e\u914d\u7f6e\uff1a</p> <pre><code>class Settings(BaseSettings):\n    # \u5e94\u7528\u914d\u7f6e\n    DEBUG: bool = True\n    HOST: str = \"0.0.0.0\"\n    PORT: int = 8000\n\n    # \u6570\u636e\u5e93\u914d\u7f6e\n    DATABASE_URL: str = \"sqlite://./faster_app.db\"\n\n    # \u65e5\u5fd7\u914d\u7f6e\n    LOG_LEVEL: str = \"INFO\"\n</code></pre>"},{"location":"features/settings/#_4","title":"\u81ea\u5b9a\u4e49\u914d\u7f6e","text":"<p>\u521b\u5efa\u81ea\u5b9a\u4e49\u914d\u7f6e\u7c7b\uff1a</p> <pre><code># config/settings.py\nfrom faster_app.settings.config import BaseSettings\n\nclass CustomSettings(BaseSettings):\n    \"\"\"\u81ea\u5b9a\u4e49\u914d\u7f6e\"\"\"\n\n    # \u5e94\u7528\u914d\u7f6e\n    APP_NAME: str = \"My App\"\n    APP_VERSION: str = \"1.0.0\"\n\n    # \u4e1a\u52a1\u914d\u7f6e\n    MAX_UPLOAD_SIZE: int = 10 * 1024 * 1024  # 10MB\n    ALLOWED_FILE_TYPES: list[str] = [\".jpg\", \".png\", \".pdf\"]\n\n    # \u7b2c\u4e09\u65b9\u670d\u52a1\n    REDIS_URL: str = \"redis://localhost:6379/0\"\n</code></pre>"},{"location":"features/settings/#_5","title":"\u4f7f\u7528\u914d\u7f6e","text":"<pre><code>from faster_app.settings.config import get_settings\n\nsettings = get_settings()\n\nprint(settings.APP_NAME)\nprint(settings.DEBUG)\n</code></pre> <p>\u66f4\u591a\u5185\u5bb9\u8bf7\u67e5\u770b\u5b8c\u6574\u6587\u6863...</p>"},{"location":"features/tortoise-orm-config/","title":"TORTOISE_ORM \u914d\u7f6e\u4f18\u5316","text":""},{"location":"features/tortoise-orm-config/#_1","title":"\u95ee\u9898\u80cc\u666f","text":"<p>\u5728\u4e4b\u524d\u7684\u5b9e\u73b0\u4e2d\uff0c<code>TORTOISE_ORM</code> \u914d\u7f6e\u662f\u5728 <code>__init__</code> \u65b9\u6cd5\u4e2d\u52a8\u6001\u751f\u6210\u7684\uff1a</p> <pre><code>def __init__(self, **kwargs):\n    super().__init__(**kwargs)\n    self.TORTOISE_ORM = {\n        \"connections\": {...},\n        \"apps\": {...}\n    }\n</code></pre> <p>\u8fd9\u79cd\u5b9e\u73b0\u5b58\u5728\u4ee5\u4e0b\u95ee\u9898\uff1a</p>"},{"location":"features/tortoise-orm-config/#_2","title":"\u274c \u5b58\u5728\u7684\u95ee\u9898","text":"<ol> <li>\u4e0d\u7b26\u5408\u6700\u4f73\u5b9e\u8df5</li> <li>\u5728 <code>__init__</code> \u4e2d\u624b\u52a8\u8bbe\u7f6e\u5b9e\u4f8b\u5c5e\u6027\u8fdd\u53cd\u4e86 Pydantic \u7684\u8bbe\u8ba1\u539f\u5219</li> <li> <p>Pydantic \u6a21\u578b\u5e94\u8be5\u901a\u8fc7\u5b57\u6bb5\u5b9a\u4e49\u6216\u8ba1\u7b97\u5b57\u6bb5\u6765\u7ba1\u7406\u6570\u636e</p> </li> <li> <p>\u914d\u7f6e\u4e0d\u4f1a\u52a8\u6001\u66f4\u65b0</p> </li> <li>\u5982\u679c\u5728\u5b9e\u4f8b\u5316\u540e\u4fee\u6539\u4e86 <code>DB_HOST</code>\u3001<code>DB_PORT</code> \u7b49\u5b57\u6bb5</li> <li><code>TORTOISE_ORM</code> \u914d\u7f6e\u4e0d\u4f1a\u81ea\u52a8\u66f4\u65b0\uff0c\u4ecd\u7136\u4fdd\u7559\u521d\u59cb\u5316\u65f6\u7684\u503c</li> <li> <p>\u53ef\u80fd\u5bfc\u81f4\u914d\u7f6e\u4e0d\u4e00\u81f4\u7684 Bug</p> </li> <li> <p>\u4ee3\u7801\u53ef\u7ef4\u62a4\u6027\u5dee</p> </li> <li><code>__init__</code> \u65b9\u6cd5\u4e2d\u7684\u526f\u4f5c\u7528\u4f7f\u4ee3\u7801\u96be\u4ee5\u7406\u89e3\u548c\u7ef4\u62a4</li> <li> <p>\u4e0d\u5229\u4e8e\u5355\u5143\u6d4b\u8bd5\u548c\u8c03\u8bd5</p> </li> <li> <p>\u6f5c\u5728\u7684\u5faa\u73af\u5f15\u7528\u98ce\u9669</p> </li> <li>\u5728 <code>__init__</code> \u4e2d\u8bbf\u95ee\u5176\u4ed6\u5b57\u6bb5\u53ef\u80fd\u5bfc\u81f4\u521d\u59cb\u5316\u987a\u5e8f\u95ee\u9898</li> </ol>"},{"location":"features/tortoise-orm-config/#_3","title":"\u89e3\u51b3\u65b9\u6848","text":"<p>\u4f7f\u7528 Python \u7684 <code>@property</code> \u88c5\u9970\u5668\u5c06 <code>TORTOISE_ORM</code> \u6539\u4e3a\u52a8\u6001\u8ba1\u7b97\u5c5e\u6027\uff1a</p> <pre><code>@property\ndef TORTOISE_ORM(self) -&gt; dict:\n    \"\"\"\n    \u52a8\u6001\u751f\u6210 Tortoise ORM \u914d\u7f6e\n\n    \u4f18\u70b9:\n    1. \u914d\u7f6e\u662f\u52a8\u6001\u8ba1\u7b97\u7684\uff0c\u5f53\u4f9d\u8d56\u7684\u5b57\u6bb5\u6539\u53d8\u65f6\u4f1a\u81ea\u52a8\u66f4\u65b0\n    2. \u907f\u514d\u5728 __init__ \u4e2d\u624b\u52a8\u8bbe\u7f6e\u5b9e\u4f8b\u5c5e\u6027\n    3. \u7b26\u5408 Pydantic \u6700\u4f73\u5b9e\u8df5\n    4. \u61d2\u52a0\u8f7d\uff0c\u53ea\u5728\u9700\u8981\u65f6\u8ba1\u7b97\n\n    Returns:\n        Tortoise ORM \u914d\u7f6e\u5b57\u5178\n    \"\"\"\n    return {\n        \"connections\": {\n            \"SQLITE\": {\n                \"engine\": \"tortoise.backends.sqlite\",\n                \"credentials\": {\n                    \"file_path\": f\"{self._normalize_db_name(self.PROJECT_NAME)}.db\"\n                },\n            },\n            \"POSTGRES\": {\n                \"engine\": self.DB_ENGINE,\n                \"credentials\": {\n                    \"host\": self.DB_HOST,\n                    \"port\": self.DB_PORT,\n                    \"user\": self.DB_USER,\n                    \"password\": self.DB_PASSWORD.get_secret_value(),\n                    \"database\": self.DB_DATABASE,\n                },\n            },\n        },\n        \"apps\": {\n            \"models\": {\n                \"default_connection\": self.DB_TYPE.upper()\n            }\n        },\n    }\n</code></pre>"},{"location":"features/tortoise-orm-config/#_4","title":"\u4f18\u52bf\u5bf9\u6bd4","text":""},{"location":"features/tortoise-orm-config/#_5","title":"\u2705 \u65b0\u5b9e\u73b0\u7684\u4f18\u70b9","text":"\u7279\u6027 \u65e7\u5b9e\u73b0 (<code>__init__</code>) \u65b0\u5b9e\u73b0 (<code>@property</code>) \u52a8\u6001\u66f4\u65b0 \u274c \u4e0d\u652f\u6301 \u2705 \u81ea\u52a8\u66f4\u65b0 \u61d2\u52a0\u8f7d \u274c \u521d\u59cb\u5316\u65f6\u751f\u6210 \u2705 \u6309\u9700\u8ba1\u7b97 \u7b26\u5408\u6700\u4f73\u5b9e\u8df5 \u274c \u526f\u4f5c\u7528 \u2705 \u58f0\u660e\u5f0f \u4ee3\u7801\u6e05\u6670\u5ea6 \u274c \u8f83\u5dee \u2705 \u4f18\u79c0 \u53ef\u6d4b\u8bd5\u6027 \u274c \u4e00\u822c \u2705 \u4f18\u79c0 \u5185\u5b58\u6548\u7387 \u274c \u7acb\u5373\u5360\u7528 \u2705 \u6309\u9700\u751f\u6210"},{"location":"features/tortoise-orm-config/#1","title":"1. \u914d\u7f6e\u52a8\u6001\u66f4\u65b0","text":"<p>\u65e7\u5b9e\u73b0\u7684\u95ee\u9898\uff1a <pre><code>settings = DefaultSettings()\nprint(settings.TORTOISE_ORM[\"connections\"][\"POSTGRES\"][\"credentials\"][\"host\"])\n# \u8f93\u51fa: localhost\n\nsettings.DB_HOST = \"192.168.1.100\"\nprint(settings.TORTOISE_ORM[\"connections\"][\"POSTGRES\"][\"credentials\"][\"host\"])\n# \u8f93\u51fa: localhost (\u672a\u66f4\u65b0\uff01\u274c)\n</code></pre></p> <p>\u65b0\u5b9e\u73b0\u7684\u4f18\u52bf\uff1a <pre><code>settings = DefaultSettings()\nprint(settings.TORTOISE_ORM[\"connections\"][\"POSTGRES\"][\"credentials\"][\"host\"])\n# \u8f93\u51fa: localhost\n\nsettings.DB_HOST = \"192.168.1.100\"\nprint(settings.TORTOISE_ORM[\"connections\"][\"POSTGRES\"][\"credentials\"][\"host\"])\n# \u8f93\u51fa: 192.168.1.100 (\u81ea\u52a8\u66f4\u65b0\uff01\u2705)\n</code></pre></p>"},{"location":"features/tortoise-orm-config/#2","title":"2. \u61d2\u52a0\u8f7d","text":"<p>\u65e7\u5b9e\u73b0\uff1a - \u6bcf\u6b21\u521b\u5efa <code>DefaultSettings</code> \u5b9e\u4f8b\u65f6\u90fd\u4f1a\u7acb\u5373\u751f\u6210 <code>TORTOISE_ORM</code> - \u5373\u4f7f\u4e0d\u4f7f\u7528\u6570\u636e\u5e93\u529f\u80fd\u4e5f\u4f1a\u8ba1\u7b97\u914d\u7f6e</p> <p>\u65b0\u5b9e\u73b0\uff1a - \u53ea\u6709\u5728\u8bbf\u95ee <code>TORTOISE_ORM</code> \u65f6\u624d\u4f1a\u8ba1\u7b97 - \u5982\u679c\u4e0d\u4f7f\u7528\u6570\u636e\u5e93\uff0c\u4e0d\u4f1a\u6709\u4efb\u4f55\u5f00\u9500</p> <pre><code># \u4e0d\u4f7f\u7528\u6570\u636e\u5e93\nsettings = DefaultSettings()\n# \u6b64\u65f6 TORTOISE_ORM \u8fd8\u672a\u751f\u6210\uff0c\u65e0\u6027\u80fd\u5f00\u9500\n\n# \u9700\u8981\u4f7f\u7528\u65f6\u624d\u751f\u6210\norm_config = settings.TORTOISE_ORM  # \u6b64\u65f6\u624d\u8ba1\u7b97\n</code></pre>"},{"location":"features/tortoise-orm-config/#3-pydantic","title":"3. \u7b26\u5408 Pydantic \u6700\u4f73\u5b9e\u8df5","text":"<p>Pydantic \u63a8\u8350\u7684\u914d\u7f6e\u65b9\u5f0f\uff1a - \u2705 \u4f7f\u7528\u5b57\u6bb5\u5b9a\u4e49\uff08Field\uff09 - \u2705 \u4f7f\u7528 <code>@property</code> \u6216 <code>@computed_field</code> \u505a\u8ba1\u7b97 - \u274c \u907f\u514d\u5728 <code>__init__</code> \u4e2d\u8bbe\u7f6e\u5b9e\u4f8b\u5c5e\u6027</p>"},{"location":"features/tortoise-orm-config/#4","title":"4. \u654f\u611f\u4fe1\u606f\u5b89\u5168","text":"<p>\u65b0\u5b9e\u73b0\u786e\u4fdd\u6bcf\u6b21\u8bbf\u95ee\u65f6\u90fd\u8c03\u7528 <code>get_secret_value()</code>\uff0c\u907f\u514d\u5bc6\u7801\u6cc4\u9732\uff1a</p> <pre><code>settings = DefaultSettings(DB_PASSWORD=\"MySecret\")\n\n# \u6bcf\u6b21\u8bbf\u95ee\u90fd\u4f1a\u91cd\u65b0\u89e3\u5bc6\npassword = settings.TORTOISE_ORM[\"connections\"][\"POSTGRES\"][\"credentials\"][\"password\"]\n# \u8fd4\u56de: \"MySecret\"\n</code></pre>"},{"location":"features/tortoise-orm-config/#_6","title":"\u4f7f\u7528\u65b9\u5f0f","text":""},{"location":"features/tortoise-orm-config/#_7","title":"\u57fa\u672c\u4f7f\u7528","text":"<pre><code>from faster_app.settings.discover import SettingsDiscover\n\n# \u83b7\u53d6\u914d\u7f6e\nsettings = SettingsDiscover().merge()\n\n# \u8bbf\u95ee TORTOISE_ORM\uff08\u81ea\u52a8\u8ba1\u7b97\uff09\norm_config = settings.TORTOISE_ORM\n\n# \u4f7f\u7528\u914d\u7f6e\u521d\u59cb\u5316 Tortoise\nfrom tortoise import Tortoise\n\nawait Tortoise.init(config=settings.TORTOISE_ORM)\n</code></pre>"},{"location":"features/tortoise-orm-config/#_8","title":"\u52a8\u6001\u4fee\u6539\u914d\u7f6e","text":"<pre><code># \u4fee\u6539\u6570\u636e\u5e93\u914d\u7f6e\nsettings.DB_HOST = \"prod.database.com\"\nsettings.DB_PORT = 3306\nsettings.DB_DATABASE = \"production_db\"\n\n# TORTOISE_ORM \u81ea\u52a8\u53cd\u6620\u65b0\u914d\u7f6e\norm_config = settings.TORTOISE_ORM\nprint(orm_config[\"connections\"][\"POSTGRES\"][\"credentials\"][\"host\"])\n# \u8f93\u51fa: prod.database.com\n</code></pre>"},{"location":"features/tortoise-orm-config/#_9","title":"\u5207\u6362\u6570\u636e\u5e93\u7c7b\u578b","text":"<pre><code># \u9ed8\u8ba4\u4f7f\u7528 SQLite\nsettings = DefaultSettings()\nprint(settings.TORTOISE_ORM[\"apps\"][\"models\"][\"default_connection\"])\n# \u8f93\u51fa: SQLITE\n\n# \u5207\u6362\u5230 PostgreSQL\nsettings.DB_TYPE = \"postgres\"\nprint(settings.TORTOISE_ORM[\"apps\"][\"models\"][\"default_connection\"])\n# \u8f93\u51fa: POSTGRES\n</code></pre>"},{"location":"features/tortoise-orm-config/#_10","title":"\u9879\u76ee\u540d\u79f0\u81ea\u52a8\u89c4\u8303\u5316","text":"<pre><code>settings = DefaultSettings(PROJECT_NAME=\"My Cool Project\")\nsqlite_path = settings.TORTOISE_ORM[\"connections\"][\"SQLITE\"][\"credentials\"][\"file_path\"]\nprint(sqlite_path)\n# \u8f93\u51fa: my_cool_project.db\n\n# \u4fee\u6539\u9879\u76ee\u540d\nsettings.PROJECT_NAME = \"Test-App (2024)!\"\nnew_sqlite_path = settings.TORTOISE_ORM[\"connections\"][\"SQLITE\"][\"credentials\"][\"file_path\"]\nprint(new_sqlite_path)\n# \u8f93\u51fa: test_app_2024.db\n</code></pre>"},{"location":"features/tortoise-orm-config/#_11","title":"\u6ce8\u610f\u4e8b\u9879","text":""},{"location":"features/tortoise-orm-config/#1-property","title":"1. Property \u4e0d\u4f1a\u5e8f\u5217\u5316","text":"<p><code>@property</code> \u4e0d\u662f Pydantic \u5b57\u6bb5\uff0c\u56e0\u6b64\u4e0d\u4f1a\u51fa\u73b0\u5728 <code>model_dump()</code> \u4e2d\uff1a</p> <pre><code>settings = DefaultSettings()\nsettings_dict = settings.model_dump()\n\n# TORTOISE_ORM \u4e0d\u5728\u5b57\u5178\u4e2d\uff08\u9884\u671f\u884c\u4e3a\uff09\nprint(\"TORTOISE_ORM\" in settings_dict)  # False\n\n# \u4f46\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\norm_config = settings.TORTOISE_ORM  # \u6b63\u5e38\u5de5\u4f5c\n</code></pre> <p>\u5982\u679c\u9700\u8981\u5e8f\u5217\u5316 TORTOISE_ORM\uff0c\u53ef\u4ee5\u624b\u52a8\u6dfb\u52a0\uff1a</p> <pre><code>settings_dict = settings.model_dump()\nsettings_dict[\"TORTOISE_ORM\"] = settings.TORTOISE_ORM\n</code></pre>"},{"location":"features/tortoise-orm-config/#2_1","title":"2. \u6bcf\u6b21\u8bbf\u95ee\u90fd\u4f1a\u91cd\u65b0\u8ba1\u7b97","text":"<p>Property \u6bcf\u6b21\u8bbf\u95ee\u90fd\u4f1a\u91cd\u65b0\u751f\u6210\u5b57\u5178\uff1a</p> <pre><code>config1 = settings.TORTOISE_ORM\nconfig2 = settings.TORTOISE_ORM\n\n# \u503c\u76f8\u540c\nassert config1 == config2  # True\n\n# \u4f46\u662f\u4e0d\u540c\u7684\u5bf9\u8c61\u5b9e\u4f8b\nassert config1 is not config2  # True\n</code></pre> <p>\u5982\u679c\u9700\u8981\u7f13\u5b58\uff0c\u53ef\u4ee5\u4fdd\u5b58\u5230\u53d8\u91cf\uff1a</p> <pre><code># \u7f13\u5b58\u914d\u7f6e\u907f\u514d\u91cd\u590d\u8ba1\u7b97\norm_config = settings.TORTOISE_ORM\n\n# \u591a\u6b21\u4f7f\u7528\u7f13\u5b58\u7684\u914d\u7f6e\nawait Tortoise.init(config=orm_config)\n# ... \u5176\u4ed6\u4f7f\u7528 orm_config \u7684\u5730\u65b9\n</code></pre>"},{"location":"features/tortoise-orm-config/#3","title":"3. \u4e0e\u81ea\u52a8\u53d1\u73b0\u673a\u5236\u96c6\u6210","text":"<p>TORTOISE_ORM \u4e2d\u7684 <code>models</code> \u5217\u8868\u7531\u81ea\u52a8\u53d1\u73b0\u673a\u5236\u586b\u5145\uff1a</p> <pre><code>from faster_app.models.discover import ModelsDiscover\n\n# \u53d1\u73b0\u6240\u6709\u6a21\u578b\nmodels = ModelsDiscover().discover_models()\n\n# \u586b\u5145\u5230\u914d\u7f6e\u4e2d\nsettings.TORTOISE_ORM[\"apps\"][\"models\"][\"models\"] = models\n</code></pre>"},{"location":"features/tortoise-orm-config/#_12","title":"\u6027\u80fd\u5bf9\u6bd4","text":""},{"location":"features/tortoise-orm-config/#_13","title":"\u5185\u5b58\u4f7f\u7528","text":"\u573a\u666f \u65e7\u5b9e\u73b0 \u65b0\u5b9e\u73b0 \u521b\u5efa\u5b9e\u4f8b \u7acb\u5373\u5206\u914d\u5185\u5b58 \u65e0\u989d\u5916\u5185\u5b58 \u4e0d\u4f7f\u7528\u6570\u636e\u5e93 \u6d6a\u8d39\u5185\u5b58 \u96f6\u5f00\u9500 \u9891\u7e41\u8bbf\u95ee \u56fa\u5b9a\u5185\u5b58 \u6309\u9700\u751f\u6210"},{"location":"features/tortoise-orm-config/#_14","title":"\u8ba1\u7b97\u5f00\u9500","text":"<ul> <li>\u65e7\u5b9e\u73b0: \u521d\u59cb\u5316\u65f6\u8ba1\u7b97\u4e00\u6b21</li> <li>\u65b0\u5b9e\u73b0: \u6bcf\u6b21\u8bbf\u95ee\u65f6\u8ba1\u7b97\uff08\u901a\u5e38\u8bbf\u95ee\u6b21\u6570\u5f88\u5c11\uff09</li> </ul> <p>\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff1a - \u5e94\u7528\u542f\u52a8\u65f6\u901a\u5e38\u53ea\u8bbf\u95ee\u4e00\u6b21 <code>TORTOISE_ORM</code> - \u6027\u80fd\u5dee\u5f02\u53ef\u5ffd\u7565\u4e0d\u8ba1 - \u65b0\u5b9e\u73b0\u7684\u4f18\u52bf\uff08\u52a8\u6001\u66f4\u65b0\u3001\u4ee3\u7801\u6e05\u6670\uff09\u8fdc\u5927\u4e8e\u5fae\u5c0f\u7684\u6027\u80fd\u5f00\u9500</p>"},{"location":"features/tortoise-orm-config/#_15","title":"\u6d4b\u8bd5\u7528\u4f8b","text":"<p>\u5b8c\u6574\u7684\u6d4b\u8bd5\u8986\u76d6\uff1a</p> <pre><code>def test_tortoise_orm_dynamic_updates():\n    \"\"\"\u6d4b\u8bd5\u52a8\u6001\u66f4\u65b0\"\"\"\n    settings = DefaultSettings()\n\n    settings.DB_HOST = \"192.168.1.100\"\n    assert settings.TORTOISE_ORM[\"connections\"][\"POSTGRES\"][\"credentials\"][\"host\"] == \"192.168.1.100\"\n\n    settings.DB_PORT = 3306\n    assert settings.TORTOISE_ORM[\"connections\"][\"POSTGRES\"][\"credentials\"][\"port\"] == 3306\n\ndef test_tortoise_orm_password_decryption():\n    \"\"\"\u6d4b\u8bd5\u5bc6\u7801\u89e3\u5bc6\"\"\"\n    settings = DefaultSettings(DB_PASSWORD=\"MySecret\")\n    password = settings.TORTOISE_ORM[\"connections\"][\"POSTGRES\"][\"credentials\"][\"password\"]\n    assert password == \"MySecret\"\n\ndef test_tortoise_orm_sqlite_path():\n    \"\"\"\u6d4b\u8bd5 SQLite \u8def\u5f84\u751f\u6210\"\"\"\n    settings = DefaultSettings(PROJECT_NAME=\"My Project\")\n    path = settings.TORTOISE_ORM[\"connections\"][\"SQLITE\"][\"credentials\"][\"file_path\"]\n    assert path == \"my_project.db\"\n</code></pre>"},{"location":"features/tortoise-orm-config/#_16","title":"\u603b\u7ed3","text":"<p>\u5c06 <code>TORTOISE_ORM</code> \u4ece <code>__init__</code> \u65b9\u6cd5\u6539\u4e3a <code>@property</code> \u5e26\u6765\u4e86\u591a\u65b9\u9762\u7684\u6539\u8fdb\uff1a</p>"},{"location":"features/tortoise-orm-config/#_17","title":"\u4e3b\u8981\u6536\u76ca","text":"<ol> <li>\u2705 \u914d\u7f6e\u52a8\u6001\u66f4\u65b0 - \u4fee\u6539\u5b57\u6bb5\u540e\u81ea\u52a8\u53cd\u6620\u53d8\u5316</li> <li>\u2705 \u61d2\u52a0\u8f7d - \u6309\u9700\u8ba1\u7b97\uff0c\u63d0\u9ad8\u542f\u52a8\u6027\u80fd</li> <li>\u2705 \u7b26\u5408\u6700\u4f73\u5b9e\u8df5 - \u9075\u5faa Pydantic \u8bbe\u8ba1\u539f\u5219</li> <li>\u2705 \u4ee3\u7801\u6e05\u6670 - \u58f0\u660e\u5f0f\u7f16\u7a0b\uff0c\u6613\u4e8e\u7406\u89e3</li> <li>\u2705 \u6613\u4e8e\u6d4b\u8bd5 - \u51cf\u5c11\u526f\u4f5c\u7528\uff0c\u63d0\u9ad8\u53ef\u6d4b\u8bd5\u6027</li> <li>\u2705 \u907f\u514d Bug - \u6d88\u9664\u914d\u7f6e\u4e0d\u4e00\u81f4\u7684\u98ce\u9669</li> </ol>"},{"location":"features/tortoise-orm-config/#_18","title":"\u9002\u7528\u573a\u666f","text":"<p>\u8fd9\u79cd\u6a21\u5f0f\u9002\u5408\u6240\u6709\u9700\u8981\u57fa\u4e8e\u5176\u4ed6\u5b57\u6bb5\u52a8\u6001\u8ba1\u7b97\u7684\u914d\u7f6e\u9879\uff1a</p> <ul> <li>\u2705 \u6570\u636e\u5e93\u8fde\u63a5\u914d\u7f6e</li> <li>\u2705 API \u7aef\u70b9 URL</li> <li>\u2705 \u65e5\u5fd7\u914d\u7f6e</li> <li>\u2705 \u7f13\u5b58\u914d\u7f6e</li> <li>\u2705 \u4efb\u4f55\u6d3e\u751f\u914d\u7f6e</li> </ul>"},{"location":"features/tortoise-orm-config/#_19","title":"\u672a\u6765\u4f18\u5316","text":"<p>\u5982\u679c\u9700\u8981\u7f13\u5b58\u4ee5\u907f\u514d\u91cd\u590d\u8ba1\u7b97\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>functools.lru_cache</code>\uff1a</p> <pre><code>from functools import lru_cache\n\n@property\ndef TORTOISE_ORM(self) -&gt; dict:\n    return self._get_tortoise_orm_config()\n\n@lru_cache(maxsize=1)\ndef _get_tortoise_orm_config(self) -&gt; dict:\n    # \u914d\u7f6e\u751f\u6210\u903b\u8f91\n    return {...}\n</code></pre> <p>\u4f46\u5728\u5f53\u524d\u573a\u666f\u4e0b\uff0c\u76f4\u63a5\u8ba1\u7b97\u5df2\u7ecf\u8db3\u591f\u9ad8\u6548\u3002</p>"},{"location":"getting-started/installation/","title":"\u5b89\u88c5","text":"<p>\u672c\u9875\u9762\u4ecb\u7ecd\u5982\u4f55\u5b89\u88c5 Faster APP\u3002</p>"},{"location":"getting-started/installation/#_2","title":"\u7cfb\u7edf\u8981\u6c42","text":"<ul> <li>Python: &gt;= 3.12</li> <li>\u6570\u636e\u5e93: PostgreSQL (\u63a8\u8350) \u6216 SQLite</li> <li>\u5305\u7ba1\u7406\u5668: uv (\u63a8\u8350) \u6216 pip</li> </ul>"},{"location":"getting-started/installation/#uv","title":"\u4f7f\u7528 uv \u5b89\u88c5\uff08\u63a8\u8350\uff09","text":"<p>uv \u662f\u4e00\u4e2a\u6781\u5feb\u7684 Python \u5305\u7ba1\u7406\u5668\uff0c\u6211\u4eec\u5f3a\u70c8\u63a8\u8350\u4f7f\u7528\u5b83\u3002</p>"},{"location":"getting-started/installation/#1-uv","title":"1. \u5b89\u88c5 uv","text":"macOS/LinuxWindows <pre><code>curl -LsSf https://astral.sh/uv/install.sh | sh\n</code></pre> <pre><code>powershell -c \"irm https://astral.sh/uv/install.ps1 | iex\"\n</code></pre>"},{"location":"getting-started/installation/#2","title":"2. \u521b\u5efa\u9879\u76ee","text":"<pre><code># \u521d\u59cb\u5316\u65b0\u9879\u76ee\nuv init my-project\ncd my-project\n\n# \u6dfb\u52a0 Faster APP\nuv add faster-app\n\n# \u79fb\u9664\u9ed8\u8ba4\u7684 main.py\nrm main.py\n</code></pre>"},{"location":"getting-started/installation/#3","title":"3. \u9a8c\u8bc1\u5b89\u88c5","text":"<pre><code>faster --help\n</code></pre> <p>\u5982\u679c\u770b\u5230 Faster APP \u7684\u547d\u4ee4\u5217\u8868\uff0c\u8bf4\u660e\u5b89\u88c5\u6210\u529f\uff01</p>"},{"location":"getting-started/installation/#pip","title":"\u4f7f\u7528 pip \u5b89\u88c5","text":"<p>\u5982\u679c\u4f60\u66f4\u4e60\u60ef\u4f7f\u7528 pip\uff0c\u4e5f\u53ef\u4ee5\u8fd9\u6837\u5b89\u88c5\uff1a</p>"},{"location":"getting-started/installation/#1","title":"1. \u521b\u5efa\u865a\u62df\u73af\u5883","text":"<pre><code># \u521b\u5efa\u9879\u76ee\u76ee\u5f55\nmkdir my-project\ncd my-project\n\n# \u521b\u5efa\u865a\u62df\u73af\u5883\npython -m venv .venv\n\n# \u6fc0\u6d3b\u865a\u62df\u73af\u5883\nsource .venv/bin/activate  # Linux/macOS\n# \u6216\n.venv\\Scripts\\activate  # Windows\n</code></pre>"},{"location":"getting-started/installation/#2-faster-app","title":"2. \u5b89\u88c5 Faster APP","text":"<pre><code>pip install faster-app\n</code></pre>"},{"location":"getting-started/installation/#3_1","title":"3. \u9a8c\u8bc1\u5b89\u88c5","text":"<pre><code>faster --help\n</code></pre>"},{"location":"getting-started/installation/#_3","title":"\u6570\u636e\u5e93\u51c6\u5907","text":"<p>Faster APP \u9ed8\u8ba4\u4f7f\u7528 SQLite\uff0c\u65e0\u9700\u989d\u5916\u914d\u7f6e\u3002\u5982\u679c\u9700\u8981\u4f7f\u7528 PostgreSQL\uff1a</p>"},{"location":"getting-started/installation/#postgresql","title":"PostgreSQL \u5b89\u88c5","text":"macOSUbuntu/Debian\u4f7f\u7528 Docker <pre><code>brew install postgresql@15\nbrew services start postgresql@15\n</code></pre> <pre><code>sudo apt update\nsudo apt install postgresql postgresql-contrib\nsudo systemctl start postgresql\n</code></pre> <pre><code>docker run -d \\\n  --name faster-postgres \\\n  -e POSTGRES_PASSWORD=password \\\n  -e POSTGRES_DB=faster_app \\\n  -p 5432:5432 \\\n  postgres:15-alpine\n</code></pre>"},{"location":"getting-started/installation/#_4","title":"\u521b\u5efa\u6570\u636e\u5e93","text":"<pre><code># \u8fde\u63a5\u5230 PostgreSQL\npsql -U postgres\n\n# \u521b\u5efa\u6570\u636e\u5e93\nCREATE DATABASE faster_app;\n\n# \u521b\u5efa\u7528\u6237\nCREATE USER faster_user WITH PASSWORD 'password';\n\n# \u6388\u6743\nGRANT ALL PRIVILEGES ON DATABASE faster_app TO faster_user;\n</code></pre>"},{"location":"getting-started/installation/#_5","title":"\u5f00\u53d1\u5de5\u5177\uff08\u53ef\u9009\uff09","text":"<p>\u63a8\u8350\u5b89\u88c5\u4ee5\u4e0b\u5f00\u53d1\u5de5\u5177\uff1a</p> <pre><code># \u4f7f\u7528 uv\nuv add --dev ruff black mypy\n\n# \u4f7f\u7528 pip\npip install ruff black mypy\n</code></pre>"},{"location":"getting-started/installation/#_6","title":"\u4e0b\u4e00\u6b65","text":"<p>\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u7ee7\u7eed\u9605\u8bfb \u5feb\u901f\u5165\u95e8 \u5f00\u59cb\u4f60\u7684\u7b2c\u4e00\u4e2a Faster APP \u9879\u76ee\u3002</p>"},{"location":"getting-started/installation/#_7","title":"\u5e38\u89c1\u95ee\u9898","text":"\u5982\u4f55\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\uff1f uvpip <pre><code>uv add faster-app --upgrade\n</code></pre> <pre><code>pip install --upgrade faster-app\n</code></pre> \u5b89\u88c5\u5931\u8d25\u600e\u4e48\u529e\uff1f <ol> <li>\u68c0\u67e5 Python \u7248\u672c\uff1a<code>python --version</code>\uff08\u9700\u8981 &gt;= 3.12\uff09</li> <li>\u5347\u7ea7 pip\uff1a<code>pip install --upgrade pip</code></li> <li>\u67e5\u770b\u8be6\u7ec6\u9519\u8bef\u4fe1\u606f\uff1a<code>pip install faster-app --verbose</code></li> <li>\u5728 GitHub Issues \u5bfb\u6c42\u5e2e\u52a9</li> </ol> \u662f\u5426\u652f\u6301 Python 3.10\uff1f <p>\u76ee\u524d Faster APP \u8981\u6c42 Python &gt;= 3.12\uff0c\u56e0\u4e3a\u6211\u4eec\u4f7f\u7528\u4e86\u4e00\u4e9b\u65b0\u7279\u6027\uff08\u5982 tomllib\uff09\u3002</p>"},{"location":"getting-started/quickstart/","title":"\u5feb\u901f\u5165\u95e8","text":"<p>\u672c\u9875\u9762\u5c06\u5e26\u4f60\u5728 5 \u5206\u949f\u5185\u521b\u5efa\u7b2c\u4e00\u4e2a Faster APP \u5e94\u7528\u3002</p>"},{"location":"getting-started/quickstart/#_2","title":"\u521b\u5efa\u9879\u76ee","text":"<p>\u9996\u5148\uff0c\u8ba9\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u65b0\u9879\u76ee\uff1a</p> <pre><code># \u4f7f\u7528 uv \u521b\u5efa\u9879\u76ee\nuv init my-blog\ncd my-blog\n\n# \u5b89\u88c5 Faster APP\nuv add faster-app\n\n# \u79fb\u9664\u9ed8\u8ba4\u7684 main.py\nrm main.py\n</code></pre>"},{"location":"getting-started/quickstart/#_3","title":"\u521d\u59cb\u5316\u5e94\u7528","text":"<p>\u4f7f\u7528\u5185\u7f6e\u547d\u4ee4\u5feb\u901f\u642d\u5efa\u9879\u76ee\u7ed3\u6784\uff1a</p> <pre><code># \u521b\u5efa\u793a\u4f8b\u5e94\u7528\nfaster app demo\n\n# \u521b\u5efa\u914d\u7f6e\u6587\u4ef6\nfaster app config\nfaster app env\n</code></pre> <p>\u6b64\u65f6\u9879\u76ee\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>my-blog/\n\u251c\u2500\u2500 apps/\n\u2502   \u2514\u2500\u2500 demo/\n\u2502       \u251c\u2500\u2500 models.py      # \u6570\u636e\u6a21\u578b\n\u2502       \u251c\u2500\u2500 routes.py      # API \u8def\u7531\n\u2502       \u251c\u2500\u2500 schemas.py     # Pydantic \u6a21\u578b\n\u2502       \u251c\u2500\u2500 commands.py    # \u547d\u4ee4\u884c\u5de5\u5177\n\u2502       \u2514\u2500\u2500 tasks.py       # \u5f02\u6b65\u4efb\u52a1\n\u251c\u2500\u2500 config/\n\u2502   \u2514\u2500\u2500 settings.py        # \u81ea\u5b9a\u4e49\u914d\u7f6e\n\u251c\u2500\u2500 .env                   # \u73af\u5883\u53d8\u91cf\n\u2514\u2500\u2500 pyproject.toml\n</code></pre>"},{"location":"getting-started/quickstart/#_4","title":"\u521d\u59cb\u5316\u6570\u636e\u5e93","text":"<pre><code># \u521d\u59cb\u5316\u6570\u636e\u5e93\u8fc1\u79fb\nfaster db init\n\n# \u521b\u5efa\u6570\u636e\u5e93\u8868\nfaster db init_db\n</code></pre>"},{"location":"getting-started/quickstart/#_5","title":"\u542f\u52a8\u670d\u52a1\u5668","text":"<pre><code>faster server start\n</code></pre> <p>\u770b\u5230\u5982\u4e0b\u8f93\u51fa\u8868\u793a\u542f\u52a8\u6210\u529f\uff1a</p> <pre><code>INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)\nINFO:     Started reloader process [12345] using WatchFiles\nINFO:     Started server process [12346]\nINFO:     Waiting for application startup.\nINFO:     Application startup complete.\n</code></pre>"},{"location":"getting-started/quickstart/#api","title":"\u8bbf\u95ee API","text":"<p>\u6253\u5f00\u6d4f\u89c8\u5668\u8bbf\u95ee\uff1a</p> <ul> <li>Swagger UI: http://localhost:8000/docs</li> <li>ReDoc: http://localhost:8000/redoc</li> </ul> <p>\u4f60\u4f1a\u770b\u5230\u81ea\u52a8\u751f\u6210\u7684 API \u6587\u6863\uff01</p>"},{"location":"getting-started/quickstart/#_6","title":"\u521b\u5efa\u4f60\u7684\u7b2c\u4e00\u4e2a\u6a21\u578b","text":"<p>\u7f16\u8f91 <code>apps/demo/models.py</code>\uff1a</p> <pre><code>from faster_app.models.base import UUIDModel, DateTimeModel\n\nclass Article(UUIDModel, DateTimeModel):\n    \"\"\"\u6587\u7ae0\u6a21\u578b\"\"\"\n\n    title: str = Field(..., max_length=200, description=\"\u6807\u9898\")\n    content: str = Field(..., description=\"\u5185\u5bb9\")\n    author: str = Field(..., max_length=50, description=\"\u4f5c\u8005\")\n\n    class Meta:\n        table = \"articles\"\n</code></pre>"},{"location":"getting-started/quickstart/#_7","title":"\u521b\u5efa\u6570\u636e\u5e93\u8fc1\u79fb","text":"<pre><code># \u751f\u6210\u8fc1\u79fb\u6587\u4ef6\nfaster db migrate --name=\"add_article_model\"\n\n# \u6267\u884c\u8fc1\u79fb\nfaster db upgrade\n</code></pre>"},{"location":"getting-started/quickstart/#api_1","title":"\u521b\u5efa API \u8def\u7531","text":"<p>\u7f16\u8f91 <code>apps/demo/routes.py</code>\uff1a</p> <pre><code>from fastapi import APIRouter\nfrom faster_app.utils.response import success_response\nfrom .models import Article\nfrom .schemas import ArticleCreate, ArticleResponse\n\nrouter = APIRouter(prefix=\"/articles\", tags=[\"\u6587\u7ae0\"])\n\n@router.post(\"\", response_model=ArticleResponse)\nasync def create_article(data: ArticleCreate):\n    \"\"\"\u521b\u5efa\u6587\u7ae0\"\"\"\n    article = await Article.create(**data.dict())\n    return success_response(data=article)\n\n@router.get(\"\", response_model=list[ArticleResponse])\nasync def list_articles():\n    \"\"\"\u6587\u7ae0\u5217\u8868\"\"\"\n    articles = await Article.all()\n    return success_response(data=articles)\n\n@router.get(\"/{article_id}\", response_model=ArticleResponse)\nasync def get_article(article_id: str):\n    \"\"\"\u83b7\u53d6\u6587\u7ae0\u8be6\u60c5\"\"\"\n    article = await Article.get(id=article_id)\n    return success_response(data=article)\n</code></pre>"},{"location":"getting-started/quickstart/#pydantic","title":"\u521b\u5efa Pydantic \u6a21\u578b","text":"<p>\u7f16\u8f91 <code>apps/demo/schemas.py</code>\uff1a</p> <pre><code>from pydantic import BaseModel, Field\n\nclass ArticleCreate(BaseModel):\n    \"\"\"\u521b\u5efa\u6587\u7ae0\u8bf7\u6c42\"\"\"\n    title: str = Field(..., max_length=200, description=\"\u6807\u9898\")\n    content: str = Field(..., description=\"\u5185\u5bb9\")\n    author: str = Field(..., max_length=50, description=\"\u4f5c\u8005\")\n\nclass ArticleResponse(BaseModel):\n    \"\"\"\u6587\u7ae0\u54cd\u5e94\"\"\"\n    id: str\n    title: str\n    content: str\n    author: str\n    created_at: datetime\n    updated_at: datetime\n\n    class Config:\n        from_attributes = True\n</code></pre>"},{"location":"getting-started/quickstart/#api_2","title":"\u6d4b\u8bd5 API","text":"<p>\u8def\u7531\u4f1a\u81ea\u52a8\u88ab\u53d1\u73b0\u5e76\u6ce8\u518c\uff0c\u65e0\u9700\u624b\u52a8\u914d\u7f6e\uff01\u5237\u65b0 http://localhost:8000/docs\uff0c\u4f60\u4f1a\u770b\u5230\u65b0\u7684 API \u7aef\u70b9\u3002</p> <p>\u4f7f\u7528 curl \u6d4b\u8bd5\uff1a</p> <pre><code># \u521b\u5efa\u6587\u7ae0\ncurl -X POST \"http://localhost:8000/articles\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"title\": \"\u6211\u7684\u7b2c\u4e00\u7bc7\u6587\u7ae0\",\n    \"content\": \"\u8fd9\u662f\u6587\u7ae0\u5185\u5bb9\",\n    \"author\": \"\u5f20\u4e09\"\n  }'\n\n# \u83b7\u53d6\u6587\u7ae0\u5217\u8868\ncurl \"http://localhost:8000/articles\"\n</code></pre>"},{"location":"getting-started/quickstart/#_8","title":"\u521b\u5efa\u81ea\u5b9a\u4e49\u547d\u4ee4","text":"<p>\u7f16\u8f91 <code>apps/demo/commands.py</code>\uff1a</p> <pre><code>from faster_app.commands.base import BaseCommand\nfrom .models import Article\n\nclass ArticleCommand(BaseCommand):\n    \"\"\"\u6587\u7ae0\u7ba1\u7406\u547d\u4ee4\"\"\"\n\n    async def count(self):\n        \"\"\"\u7edf\u8ba1\u6587\u7ae0\u6570\u91cf\"\"\"\n        count = await Article.all().count()\n        print(f\"\u603b\u5171\u6709 {count} \u7bc7\u6587\u7ae0\")\n\n    async def clear(self):\n        \"\"\"\u6e05\u7a7a\u6240\u6709\u6587\u7ae0\"\"\"\n        await Article.all().delete()\n        print(\"\u5df2\u6e05\u7a7a\u6240\u6709\u6587\u7ae0\")\n</code></pre> <p>\u8fd0\u884c\u547d\u4ee4\uff1a</p> <pre><code>faster article count\nfaster article clear\n</code></pre>"},{"location":"getting-started/quickstart/#_9","title":"\u4e0b\u4e00\u6b65","text":"<p>\u606d\u559c\uff01\u4f60\u5df2\u7ecf\u521b\u5efa\u4e86\u7b2c\u4e00\u4e2a Faster APP \u5e94\u7528\u3002\u63a5\u4e0b\u6765\u53ef\u4ee5\uff1a</p> <ul> <li>\ud83d\udcd6 \u9605\u8bfb \u9879\u76ee\u7ed3\u6784 \u4e86\u89e3\u76ee\u5f55\u7ec4\u7ec7</li> <li>\ud83d\udd0d \u6df1\u5165 \u81ea\u52a8\u53d1\u73b0\u673a\u5236</li> <li>\ud83d\uddc4\ufe0f \u63a2\u7d22 \u6a21\u578b\u57fa\u7c7b \u7684\u5f3a\u5927\u529f\u80fd</li> <li>\ud83d\udee0\ufe0f \u67e5\u770b \u547d\u4ee4\u884c\u5de5\u5177 \u5b8c\u6574\u53c2\u8003</li> </ul>"},{"location":"getting-started/quickstart/#_10","title":"\u793a\u4f8b\u9879\u76ee","text":"<p>\u67e5\u770b\u5b8c\u6574\u7684\u793a\u4f8b\u9879\u76ee\uff1a</p> <ul> <li>\u535a\u5ba2\u7cfb\u7edf</li> <li>\u7535\u5546\u540e\u53f0</li> <li>Todo \u5e94\u7528</li> </ul>"},{"location":"getting-started/structure/","title":"\u9879\u76ee\u7ed3\u6784","text":"<p>Faster APP \u91c7\u7528\u7ea6\u5b9a\u4f18\u4e8e\u914d\u7f6e\u7684\u7406\u5ff5\uff0c\u4e3a FastAPI \u9879\u76ee\u5b9a\u4e49\u4e86\u4e00\u5957\u6807\u51c6\u5316\u7684\u76ee\u5f55\u7ed3\u6784\u3002</p>"},{"location":"getting-started/structure/#_2","title":"\u5b8c\u6574\u9879\u76ee\u7ed3\u6784","text":"<pre><code>your-project/\n\u251c\u2500\u2500 apps/                      # \u5e94\u7528\u76ee\u5f55\uff08\u6838\u5fc3\uff09\n\u2502   \u251c\u2500\u2500 users/                # \u7528\u6237\u6a21\u5757\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 models.py         # \u6570\u636e\u6a21\u578b\n\u2502   \u2502   \u251c\u2500\u2500 routes.py         # API \u8def\u7531\n\u2502   \u2502   \u251c\u2500\u2500 schemas.py        # Pydantic \u6a21\u578b\n\u2502   \u2502   \u251c\u2500\u2500 commands.py       # \u547d\u4ee4\u884c\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 tasks.py          # \u5f02\u6b65\u4efb\u52a1\n\u2502   \u2502   \u2514\u2500\u2500 utils.py          # \u5de5\u5177\u51fd\u6570\n\u2502   \u251c\u2500\u2500 posts/                # \u6587\u7ae0\u6a21\u5757\n\u2502   \u2502   \u251c\u2500\u2500 models.py\n\u2502   \u2502   \u251c\u2500\u2500 routes.py\n\u2502   \u2502   \u2514\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 ...                   # \u66f4\u591a\u5e94\u7528\u6a21\u5757\n\u251c\u2500\u2500 config/                    # \u914d\u7f6e\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 settings.py           # \u81ea\u5b9a\u4e49\u914d\u7f6e\n\u251c\u2500\u2500 middleware/                # \u4e2d\u95f4\u4ef6\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 auth.py               # \u8ba4\u8bc1\u4e2d\u95f4\u4ef6\n\u251c\u2500\u2500 migrations/                # \u6570\u636e\u5e93\u8fc1\u79fb\n\u2502   \u2514\u2500\u2500 models/\n\u2502       \u2514\u2500\u2500 0_*.py            # \u8fc1\u79fb\u6587\u4ef6\n\u251c\u2500\u2500 .env                       # \u73af\u5883\u53d8\u91cf\n\u251c\u2500\u2500 .env.example              # \u73af\u5883\u53d8\u91cf\u793a\u4f8b\n\u251c\u2500\u2500 main.py                   # \u81ea\u5b9a\u4e49\u5165\u53e3\uff08\u53ef\u9009\uff09\n\u251c\u2500\u2500 pyproject.toml            # \u9879\u76ee\u914d\u7f6e\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"getting-started/structure/#_3","title":"\u6838\u5fc3\u76ee\u5f55\u8bf4\u660e","text":""},{"location":"getting-started/structure/#apps-","title":"<code>apps/</code> - \u5e94\u7528\u76ee\u5f55","text":"<p>\u8fd9\u662f\u9879\u76ee\u7684\u6838\u5fc3\uff0c\u6240\u6709\u4e1a\u52a1\u903b\u8f91\u90fd\u7ec4\u7ec7\u5728\u8fd9\u91cc\u3002\u6bcf\u4e2a\u5b50\u76ee\u5f55\u4ee3\u8868\u4e00\u4e2a\u529f\u80fd\u6a21\u5757\uff08\u7c7b\u4f3c Django \u7684 app\uff09\u3002</p>"},{"location":"getting-started/structure/#_4","title":"\u6807\u51c6\u6a21\u5757\u7ed3\u6784","text":"<p>\u6bcf\u4e2a\u5e94\u7528\u6a21\u5757\u9075\u5faa\u7edf\u4e00\u7684\u6587\u4ef6\u7ec4\u7ec7\uff1a</p> <pre><code>apps/users/\n\u251c\u2500\u2500 __init__.py         # \u6a21\u5757\u521d\u59cb\u5316\n\u251c\u2500\u2500 models.py          # \u6570\u636e\u6a21\u578b\uff08Tortoise ORM\uff09\n\u251c\u2500\u2500 routes.py          # API \u8def\u7531\uff08FastAPI Router\uff09\n\u251c\u2500\u2500 schemas.py         # \u6570\u636e\u9a8c\u8bc1\u6a21\u578b\uff08Pydantic\uff09\n\u251c\u2500\u2500 commands.py        # \u547d\u4ee4\u884c\u5de5\u5177\n\u251c\u2500\u2500 tasks.py           # \u5f02\u6b65\u4efb\u52a1\n\u2514\u2500\u2500 utils.py           # \u5de5\u5177\u51fd\u6570\n</code></pre>"},{"location":"getting-started/structure/#_5","title":"\u5404\u6587\u4ef6\u804c\u8d23","text":""},{"location":"getting-started/structure/#modelspy-","title":"<code>models.py</code> - \u6570\u636e\u6a21\u578b","text":"<p>\u5b9a\u4e49\u6570\u636e\u5e93\u6a21\u578b\uff0c\u4f7f\u7528 Tortoise ORM\uff1a</p> <pre><code>from faster_app.models.base import UUIDModel, DateTimeModel\n\nclass User(UUIDModel, DateTimeModel):\n    \"\"\"\u7528\u6237\u6a21\u578b\"\"\"\n    username: str = Field(..., max_length=50)\n    email: str = Field(..., max_length=100)\n\n    class Meta:\n        table = \"users\"\n</code></pre> <p>\u81ea\u52a8\u53d1\u73b0</p> <p>\u6240\u6709\u7ee7\u627f\u81ea <code>tortoise.Model</code> \u7684\u7c7b\u4f1a\u88ab\u81ea\u52a8\u53d1\u73b0\u5e76\u6ce8\u518c\u3002</p>"},{"location":"getting-started/structure/#routespy-api","title":"<code>routes.py</code> - API \u8def\u7531","text":"<p>\u5b9a\u4e49 HTTP \u63a5\u53e3\uff1a</p> <pre><code>from fastapi import APIRouter\n\nrouter = APIRouter(prefix=\"/users\", tags=[\"\u7528\u6237\"])\n\n@router.get(\"\")\nasync def list_users():\n    \"\"\"\u83b7\u53d6\u7528\u6237\u5217\u8868\"\"\"\n    return {\"users\": []}\n</code></pre> <p>\u81ea\u52a8\u6ce8\u518c</p> <p>\u6240\u6709 <code>APIRouter</code> \u5b9e\u4f8b\u4f1a\u88ab\u81ea\u52a8\u53d1\u73b0\u5e76\u6ce8\u518c\u5230 FastAPI \u5e94\u7528\u3002</p>"},{"location":"getting-started/structure/#schemaspy-","title":"<code>schemas.py</code> - \u6570\u636e\u9a8c\u8bc1","text":"<p>\u5b9a\u4e49\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u6570\u636e\u7ed3\u6784\uff1a</p> <pre><code>from pydantic import BaseModel, EmailStr\n\nclass UserCreate(BaseModel):\n    \"\"\"\u521b\u5efa\u7528\u6237\u8bf7\u6c42\"\"\"\n    username: str\n    email: EmailStr\n\nclass UserResponse(BaseModel):\n    \"\"\"\u7528\u6237\u54cd\u5e94\"\"\"\n    id: str\n    username: str\n    email: str\n</code></pre>"},{"location":"getting-started/structure/#commandspy-","title":"<code>commands.py</code> - \u547d\u4ee4\u884c\u5de5\u5177","text":"<p>\u5b9a\u4e49\u81ea\u5b9a\u4e49\u547d\u4ee4\uff1a</p> <pre><code>from faster_app.commands.base import BaseCommand\n\nclass UserCommand(BaseCommand):\n    \"\"\"\u7528\u6237\u7ba1\u7406\u547d\u4ee4\"\"\"\n\n    async def create_admin(self):\n        \"\"\"\u521b\u5efa\u7ba1\u7406\u5458\"\"\"\n        pass\n</code></pre> <p>\u81ea\u52a8\u6ce8\u518c</p> <p>\u6240\u6709 <code>BaseCommand</code> \u5b50\u7c7b\u4f1a\u88ab\u81ea\u52a8\u6ce8\u518c\u4e3a\u547d\u4ee4\u3002</p>"},{"location":"getting-started/structure/#taskspy-","title":"<code>tasks.py</code> - \u5f02\u6b65\u4efb\u52a1","text":"<p>\u5b9a\u4e49\u540e\u53f0\u4efb\u52a1\uff1a</p> <pre><code>async def send_welcome_email(user_id: str):\n    \"\"\"\u53d1\u9001\u6b22\u8fce\u90ae\u4ef6\"\"\"\n    pass\n</code></pre>"},{"location":"getting-started/structure/#utilspy-","title":"<code>utils.py</code> - \u5de5\u5177\u51fd\u6570","text":"<p>\u6a21\u5757\u5185\u90e8\u4f7f\u7528\u7684\u5de5\u5177\u51fd\u6570\uff1a</p> <pre><code>def hash_password(password: str) -&gt; str:\n    \"\"\"\u5bc6\u7801\u54c8\u5e0c\"\"\"\n    pass\n</code></pre>"},{"location":"getting-started/structure/#config-","title":"<code>config/</code> - \u914d\u7f6e\u76ee\u5f55","text":"<p>\u5b58\u653e\u81ea\u5b9a\u4e49\u914d\u7f6e\uff1a</p> <pre><code># config/settings.py\nfrom faster_app.settings.config import BaseSettings\n\nclass CustomSettings(BaseSettings):\n    \"\"\"\u81ea\u5b9a\u4e49\u914d\u7f6e\"\"\"\n    APP_NAME: str = \"My App\"\n    MAX_UPLOAD_SIZE: int = 10 * 1024 * 1024  # 10MB\n</code></pre> <p>\u81ea\u52a8\u5408\u5e76</p> <p>\u6240\u6709 <code>BaseSettings</code> \u5b50\u7c7b\u4f1a\u88ab\u81ea\u52a8\u53d1\u73b0\u5e76\u5408\u5e76\u5230\u5168\u5c40\u914d\u7f6e\u3002</p>"},{"location":"getting-started/structure/#middleware-","title":"<code>middleware/</code> - \u4e2d\u95f4\u4ef6\u76ee\u5f55","text":"<p>\u5b58\u653e\u81ea\u5b9a\u4e49\u4e2d\u95f4\u4ef6\uff1a</p> <pre><code># middleware/auth.py\nfrom faster_app.middleware.base import BaseMiddleware\n\nclass AuthMiddleware(BaseMiddleware):\n    \"\"\"\u8ba4\u8bc1\u4e2d\u95f4\u4ef6\"\"\"\n\n    async def __call__(self, request, call_next):\n        # \u4e2d\u95f4\u4ef6\u903b\u8f91\n        response = await call_next(request)\n        return response\n</code></pre>"},{"location":"getting-started/structure/#migrations-","title":"<code>migrations/</code> - \u6570\u636e\u5e93\u8fc1\u79fb","text":"<p>\u7531 Aerich \u81ea\u52a8\u751f\u6210\u548c\u7ba1\u7406\uff1a</p> <pre><code>migrations/\n\u251c\u2500\u2500 models/\n\u2502   \u251c\u2500\u2500 0_20240101000000_init.py\n\u2502   \u2514\u2500\u2500 1_20240102000000_add_user_table.py\n\u2514\u2500\u2500 pyproject.toml\n</code></pre> <p>\u6ce8\u610f</p> <p>\u4e0d\u8981\u624b\u52a8\u4fee\u6539\u8fc1\u79fb\u6587\u4ef6\uff0c\u9664\u975e\u4f60\u77e5\u9053\u81ea\u5df1\u5728\u505a\u4ec0\u4e48\u3002</p>"},{"location":"getting-started/structure/#_6","title":"\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"getting-started/structure/#env-","title":"<code>.env</code> - \u73af\u5883\u53d8\u91cf","text":"<p>\u5b58\u653e\u654f\u611f\u914d\u7f6e\u548c\u73af\u5883\u76f8\u5173\u914d\u7f6e\uff1a</p> <pre><code># \u5e94\u7528\u914d\u7f6e\nDEBUG=True\nHOST=0.0.0.0\nPORT=8000\n\n# \u6570\u636e\u5e93\u914d\u7f6e\nDATABASE_URL=postgres://user:pass@localhost/db\n\n# \u65e5\u5fd7\u914d\u7f6e\nLOG_LEVEL=INFO\n</code></pre>"},{"location":"getting-started/structure/#pyprojecttoml-","title":"<code>pyproject.toml</code> - \u9879\u76ee\u914d\u7f6e","text":"<p>Python \u9879\u76ee\u7684\u6807\u51c6\u914d\u7f6e\u6587\u4ef6\uff1a</p> <pre><code>[project]\nname = \"my-app\"\nversion = \"0.1.0\"\ndependencies = [\n    \"faster-app\",\n]\n\n[dependency-groups]\ndev = [\n    \"mkdocs-material\",\n    \"ruff\",\n]\n</code></pre>"},{"location":"getting-started/structure/#mainpy-","title":"<code>main.py</code> - \u81ea\u5b9a\u4e49\u5165\u53e3\uff08\u53ef\u9009\uff09","text":"<p>\u5982\u679c\u9700\u8981\u81ea\u5b9a\u4e49 FastAPI \u5e94\u7528\uff0c\u53ef\u4ee5\u521b\u5efa\u6b64\u6587\u4ef6\uff1a</p> <pre><code>from faster_app.app import create_app\n\n# \u83b7\u53d6\u5e94\u7528\u5b9e\u4f8b\napp = create_app()\n\n# \u81ea\u5b9a\u4e49\u4e2d\u95f4\u4ef6\n@app.middleware(\"http\")\nasync def custom_middleware(request, call_next):\n    response = await call_next(request)\n    return response\n</code></pre> <p>\u4f18\u5148\u7ea7</p> <p>\u5982\u679c\u5b58\u5728 <code>main.py</code>\uff0c<code>faster server start</code> \u4f1a\u4f18\u5148\u4f7f\u7528\u5b83\u3002</p>"},{"location":"getting-started/structure/#_7","title":"\u76ee\u5f55\u521b\u5efa\u547d\u4ee4","text":"<p>Faster APP \u63d0\u4f9b\u4e86\u547d\u4ee4\u5feb\u901f\u521b\u5efa\u8fd9\u4e9b\u76ee\u5f55\uff1a</p> <pre><code>faster app demo        # \u521b\u5efa\u793a\u4f8b\u5e94\u7528\nfaster app config      # \u521b\u5efa\u914d\u7f6e\u76ee\u5f55\nfaster app middleware  # \u521b\u5efa\u4e2d\u95f4\u4ef6\u76ee\u5f55\nfaster app env         # \u521b\u5efa .env \u6587\u4ef6\nfaster app main        # \u521b\u5efa main.py \u6a21\u677f\n</code></pre>"},{"location":"getting-started/structure/#_8","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"getting-started/structure/#1","title":"1. \u6a21\u5757\u5316\u7ec4\u7ec7","text":"<p>\u5c06\u76f8\u5173\u529f\u80fd\u7ec4\u7ec7\u5728\u540c\u4e00\u4e2a\u5e94\u7528\u6a21\u5757\u4e0b\uff1a</p> <pre><code>apps/\n\u251c\u2500\u2500 auth/          # \u8ba4\u8bc1\u76f8\u5173\n\u251c\u2500\u2500 users/         # \u7528\u6237\u7ba1\u7406\n\u251c\u2500\u2500 posts/         # \u6587\u7ae0\u7ba1\u7406\n\u2514\u2500\u2500 comments/      # \u8bc4\u8bba\u7ba1\u7406\n</code></pre>"},{"location":"getting-started/structure/#2","title":"2. \u4fdd\u6301\u6a21\u5757\u72ec\u7acb","text":"<p>\u6bcf\u4e2a\u6a21\u5757\u5e94\u8be5\u5c3d\u53ef\u80fd\u72ec\u7acb\uff0c\u907f\u514d\u5faa\u73af\u4f9d\u8d56\u3002</p>"},{"location":"getting-started/structure/#3","title":"3. \u4f7f\u7528\u547d\u540d\u7ea6\u5b9a","text":"<ul> <li>\u6a21\u5757\u540d\uff1a\u5c0f\u5199\uff0c\u4f7f\u7528\u4e0b\u5212\u7ebf\uff08\u5982 <code>user_profile</code>\uff09</li> <li>\u6a21\u578b\u540d\uff1a\u5e15\u65af\u5361\u547d\u540d\uff08\u5982 <code>UserProfile</code>\uff09</li> <li>\u8def\u7531\u524d\u7f00\uff1a\u5c0f\u5199\uff0c\u4f7f\u7528\u8fde\u5b57\u7b26\uff08\u5982 <code>/user-profiles</code>\uff09</li> </ul>"},{"location":"getting-started/structure/#4","title":"4. \u5408\u7406\u5212\u5206\u7c92\u5ea6","text":"<ul> <li>\u5c0f\u578b\u9879\u76ee\uff1a\u5c11\u91cf\u6a21\u5757\uff0c\u529f\u80fd\u96c6\u4e2d</li> <li>\u5927\u578b\u9879\u76ee\uff1a\u7ec6\u7c92\u5ea6\u6a21\u5757\uff0c\u804c\u8d23\u5355\u4e00</li> </ul>"},{"location":"getting-started/structure/#_9","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u4e86\u89e3 \u81ea\u52a8\u53d1\u73b0\u673a\u5236</li> <li>\u5b66\u4e60 \u6a21\u578b\u57fa\u7c7b</li> <li>\u638c\u63e1 \u8def\u7531\u7ba1\u7406</li> </ul>"}]}